{"utilities":{},"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"ISPGetPrchseOrd":{"sourceUuid":"f65058ed-dac1-40d1-a9ed-feebcaf6a608","name":"ISPGetPrchseOrd","program":"EXT001MI","description":"ALL_MI_0001_GetPurchaseOrders","active":true,"multi":true,"modified":1678284918938,"modifiedBy":"APE_SMA","outputFields":[{"name":"RCTP","description":"Record Type (OH,OC,OL,LR,LC)","length":2,"mandatory":false,"type":"A"},{"name":"DIVI","description":"division","length":3,"mandatory":false,"type":"A"},{"name":"FACI","description":"facility","length":3,"mandatory":false,"type":"A"},{"name":"WHLO","description":"warehouse","length":3,"mandatory":false,"type":"A"},{"name":"PUNO","description":"purchase order number","length":10,"mandatory":false,"type":"A"},{"name":"SUNO","description":"supplier","length":10,"mandatory":false,"type":"A"},{"name":"SUNM","description":"supplier name","length":700,"mandatory":false,"type":"A"},{"name":"RENM","description":"name","length":36,"mandatory":false,"type":"A"},{"name":"BUYE","description":"buyer","length":10,"mandatory":false,"type":"A"},{"name":"CSCD","description":"country","length":3,"mandatory":false,"type":"A"},{"name":"CUCD","description":"currency","length":3,"mandatory":false,"type":"A"},{"name":"DATE","description":"entry date","length":8,"mandatory":false,"type":"N"},{"name":"PUDT","description":"order date","length":8,"mandatory":false,"type":"N"},{"name":"DWDT","description":"requested delivery date","length":8,"mandatory":false,"type":"N"},{"name":"YRE1","description":"your reference","length":36,"mandatory":false,"type":"A"},{"name":"PHNO","description":"telephone number 1","length":16,"mandatory":false,"type":"A"},{"name":"TFNO","description":"facsimile transmission number","length":16,"mandatory":false,"type":"A"},{"name":"REMK","description":"remark","length":30,"mandatory":false,"type":"A"},{"name":"ORTY","description":"order type","length":3,"mandatory":false,"type":"A"},{"name":"COAM","description":"total order cost","length":17,"mandatory":false,"type":"N"},{"name":"TOQT","description":"total quantity","length":15,"mandatory":false,"type":"N"},{"name":"TEPY","description":"payment terms","length":3,"mandatory":false,"type":"A"},{"name":"MODL","description":"delivery method","length":3,"mandatory":false,"type":"A"},{"name":"TEDL","description":"delivery terms","length":3,"mandatory":false,"type":"A"},{"name":"TEPA","description":"packaging terms","length":3,"mandatory":false,"type":"A"},{"name":"TEL1","description":"terms text","length":36,"mandatory":false,"type":"A"},{"name":"PUSL","description":"lowest status - purchase order","length":2,"mandatory":false,"type":"A"},{"name":"PUST","description":"highest status - purchase order","length":2,"mandatory":false,"type":"A"},{"name":"CDSE","description":"sequence number - costing element","length":4,"mandatory":false,"type":"N"},{"name":"REPN","description":"receiving number","length":10,"mandatory":false,"type":"N"},{"name":"EXTY","description":"charge type","length":1,"mandatory":false,"type":"N"},{"name":"TX30","description":"description","length":30,"mandatory":false,"type":"A"},{"name":"EXIC","description":"charge invoicing","length":1,"mandatory":false,"type":"N"},{"name":"WSOP","description":"costing operator","length":2,"mandatory":false,"type":"A"},{"name":"CCUC","description":"Charge Currency","length":3,"mandatory":false,"type":"A"},{"name":"CEVA","description":"costing element amount","length":15,"mandatory":false,"type":"N"},{"name":"CEVJ","description":"adjusted costing element amount","length":15,"mandatory":false,"type":"N"},{"name":"THPR","description":"3rd party charges","length":1,"mandatory":false,"type":"N"},{"name":"IVCQ","description":"invoice charge quantity","length":1,"mandatory":false,"type":"N"},{"name":"CEID","description":"costing element","length":6,"mandatory":false,"type":"A"},{"name":"PNLI","description":"purchase order line","length":3,"mandatory":false,"type":"N"},{"name":"PNLS","description":"purchase order line subnumber","length":3,"mandatory":false,"type":"N"},{"name":"ITNO","description":"item number","length":15,"mandatory":false,"type":"A"},{"name":"ADQA","description":"transport notified quantit alternate U/M","length":15,"mandatory":false,"type":"N"},{"name":"ORQT","description":"ordered quantity - basic U/M","length":15,"mandatory":false,"type":"N"},{"name":"TRDT","description":"transaction date","length":8,"mandatory":false,"type":"N"},{"name":"LWHL","description":"Line Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"PITD","description":"purchase order item name","length":60,"mandatory":false,"type":"A"},{"name":"PITT","description":"purchase order item description","length":120,"mandatory":false,"type":"A"},{"name":"SITE","description":"supplier item number","length":30,"mandatory":false,"type":"A"},{"name":"CAQA","description":"approved quantity - alternate U/M","length":15,"mandatory":false,"type":"N"},{"name":"RJQA","description":"rejected quantity","length":15,"mandatory":false,"type":"N"},{"name":"SDQA","description":"stored quantity","length":15,"mandatory":false,"type":"N"},{"name":"ORQA","description":"ordered quantity - alternate U/M","length":15,"mandatory":false,"type":"N"},{"name":"IVQA","description":"invoiced quantity - alternate U/M","length":15,"mandatory":false,"type":"N"},{"name":"RVQA","description":"received quantity","length":15,"mandatory":false,"type":"N"},{"name":"CFQA","description":"confirmed quantity","length":15,"mandatory":false,"type":"N"},{"name":"OQPU","description":"Open Quantity Price UM","length":3,"mandatory":false,"type":"A"},{"name":"PURC","description":"requisition by","length":10,"mandatory":false,"type":"A"},{"name":"LBUY","description":"Line Buyer","length":10,"mandatory":false,"type":"A"},{"name":"STUM","description":"Standard UM","length":3,"mandatory":false,"type":"A"},{"name":"UNMS","description":"basic unit of measure","length":3,"mandatory":false,"type":"A"},{"name":"ALUM","description":"Alternative UM","length":3,"mandatory":false,"type":"A"},{"name":"LNAM","description":"line amount - order currency","length":15,"mandatory":false,"type":"N"},{"name":"PUPR","description":"purchase price","length":17,"mandatory":false,"type":"N"},{"name":"PUQT","description":"purchased quantity","length":15,"mandatory":false,"type":"N"},{"name":"ALPR","description":"Alternative Price","length":17,"mandatory":false,"type":"N"},{"name":"PTCD","description":"purchase price text","length":1,"mandatory":false,"type":"N"},{"name":"VTCD","description":"VAT code","length":2,"mandatory":false,"type":"N"},{"name":"GRMT","description":"goods receiving method","length":3,"mandatory":false,"type":"A"},{"name":"LMOD","description":"Line MODL","length":3,"mandatory":false,"type":"A"},{"name":"LTED","description":"Line TEDL","length":3,"mandatory":false,"type":"A"},{"name":"LTEL","description":"Line TEL1","length":36,"mandatory":false,"type":"A"},{"name":"LPSL","description":"Line PUSL","length":2,"mandatory":false,"type":"A"},{"name":"LPST","description":"Line PUST","length":2,"mandatory":false,"type":"A"},{"name":"POPN","description":"alias number","length":30,"mandatory":false,"type":"A"},{"name":"RORC","description":"reference order category","length":1,"mandatory":false,"type":"N"},{"name":"RORN","description":"reference order number","length":10,"mandatory":false,"type":"A"},{"name":"RORL","description":"reference order line","length":6,"mandatory":false,"type":"N"},{"name":"RORX","description":"line suffix","length":3,"mandatory":false,"type":"N"},{"name":"SUDO","description":"delivery note number","length":20,"mandatory":false,"type":"A"},{"name":"FRRC","description":"freight reference type","length":1,"mandatory":false,"type":"N"},{"name":"FRRE","description":"freight reference","length":12,"mandatory":false,"type":"N"},{"name":"AMOP","description":"Amount Open Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"AMOR","description":"Amount Ordered Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"PRCE","description":"Price Std Unit Value","length":17,"mandatory":false,"type":"N"},{"name":"UNIT","description":"Unit - Std Unit Value","length":3,"mandatory":false,"type":"A"},{"name":"OPQT","description":"Open Quantity Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"QTIV","description":"Quantity Invoice Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"QTOR","description":"Quantity Ordered Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"QTRV","description":"Quantity Received - Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"ALTU","description":"Alternative Unit - Unit Value","length":3,"mandatory":false,"type":"A"},{"name":"ALQO","description":"Alternative Quanity Open Unit Value","length":17,"mandatory":false,"type":"N"},{"name":"ALTP","description":"Alternative Price Unit Value","length":17,"mandatory":false,"type":"N"},{"name":"RPNM","description":"Receipt Number","length":15,"mandatory":false,"type":"A"},{"name":"RELP","description":"receipt type","length":1,"mandatory":false,"type":"N"},{"name":"RPDT","description":"Receipt Date","length":8,"mandatory":false,"type":"A"},{"name":"RPQT","description":"Receipt Quantity","length":17,"mandatory":false,"type":"N"},{"name":"RQAL","description":"Receipt Quantity Alternative UM","length":17,"mandatory":false,"type":"A"},{"name":"OAOU","description":"Open Amount Order UM","length":17,"mandatory":false,"type":"A"},{"name":"OALC","description":"Open Amount Local Currency","length":17,"mandatory":false,"type":"A"},{"name":"OPCW","description":"Open Catch Weight","length":17,"mandatory":false,"type":"N"},{"name":"OQOU","description":"Open Quantity Order UM","length":17,"mandatory":false,"type":"A"},{"name":"OQPM","description":"Open Quantity Purchase Order Price UM","length":17,"mandatory":false,"type":"A"},{"name":"CELD","description":"Costing element Description","length":20,"mandatory":false,"type":"A"},{"name":"IVCS","description":"Invoice Costs","length":20,"mandatory":false,"type":"A"},{"name":"CHFC","description":"Charge Factor","length":20,"mandatory":false,"type":"A"},{"name":"CWUN","description":"CATCH WEIGHT UM","length":3,"mandatory":false,"type":"A"}],"inputFields":[{"name":"SUNO","description":"supplier","length":10,"mandatory":false,"type":"A"},{"name":"PUNO","description":"Purchase Orders List (semi-colon separated)","length":500,"mandatory":false,"type":"A"},{"name":"PUSL","description":"lowest status - purchase order","length":2,"mandatory":false,"type":"A"},{"name":"PUST","description":"highest status - purchase order","length":2,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{}}},"sources":{"f65058ed-dac1-40d1-a9ed-feebcaf6a608":{"uuid":"f65058ed-dac1-40d1-a9ed-feebcaf6a608","updated":1678284893718,"updatedBy":"APE_SMA","created":1671807110498,"createdBy":"RLO","apiVersion":"0.9","beVersion":"16.0.0.20221210044646.5","codeHash":"C9E514BB574DB6DCEB15962A16FA8FCDC77660C705351EBFCC98134ED63B1DF3","code":"LyoqDQogKiBOYW1lOiBJU1BHZXRQcmNoc2VPcmQNCiAqIFR5cGUgOiBFeHRlbmRNM0FQSQ0KICogRGVzY3JpcHRpb246IFNlbmQgTTMgUHVyY2hhc2Ugb3JkZXIgZGV0YWlscyAoTGluZSBkZXRhaWxzLGNoYXJnZSBkZXRhaWxzLCBpdGVtIGRldGFpbHMsc3VwcGxpZXIgZGV0YWlscykNCiAqICoNCiAqIENyZWF0ZWQgQnk6IEFwZXgNCiAqIEF1dGhvcjogQW5naGVsbyBGZXJuYW5kZXosIFNoYXNoYW5rIE1hbGFsaQ0KICoNCiAqIEhpc3RvcnkNCiAqIDI3IEp1bHkgMjAyMSBLZWRhciBNYWhhbGFuZ3Jla2FyIC0gQ2hhbmdlIGluIFBPIHN0YXR1cyBjb25kaXRpb24gaW4gIFBPIGhlYWRlciByZWNvcmRzIA0KICogMDYgSnVseSAyMDIyIFNoYXNoYW5rIE1hbGFsaSAtIEFkZGVkL21vZGlmaWVkIHRoZSBsb2dpYyBvZiB0aGUgY29uZmlybWVkIHB1cmNoYXNlIHByaWNlIHdpdGggZGlzY291bnRzDQogKiAwMiBGZWIgIDIwMjMgIFNoYXNoYW5rIC0gQWRkZWQgY2hhcmdlcyBhbmQgY2hhbmdlIG9mIGludm9pY2UgcHJpY2UgdG8gaW52b2ljZWQgYW1tb3VudA0KICogMDMgRmViICAyMDIzICBTaGFzaGFuayAtIENvZGUgY2xlYW51cCBhbmQgZ2VuZXJhbCBmaXhlcw0KICovDQoNCmltcG9ydCBncm9vdnkuanNvbi4qOw0KaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGU7DQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcjsNCmltcG9ydCBqYXZhLnRleHQuRGVjaW1hbEZvcm1hdDsNCmltcG9ydCBqYXZhLmxhbmcuRG91YmxlOw0KaW1wb3J0IGphdmEubGFuZy5JbnRlZ2VyOw0KaW1wb3J0IGphdmEubWF0aC4qOw0KDQpwdWJsaWMgY2xhc3MgSVNQR2V0UHJjaHNlT3JkIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7DQogIHByaXZhdGUgZmluYWwgTUlBUEkgbWk7DQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXI7DQogIHByaXZhdGUgZmluYWwgTG9nZ2VyQVBJIGxvZ2dlcjsNCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW07DQogIHByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2U7DQogIHByaXZhdGUgZmluYWwgSW9uQVBJIGlvbjsNCiAgcHJpdmF0ZSBTdHJpbmcgQ09OTyA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBTVU5PID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIFBVTk8gPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgaW5wdXRQVVNMID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIGlucHV0UFVTVCA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBjaGVja1BVU0wgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgY2hlY2tQVVNUID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIGNoZWNrQ09BTSA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBjaGVja1BPVEMgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgY2hlY2tUT1FUID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIG51bWJlck9mRGVjaW1hbHMgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgcHJpY2VVbml0U3RhbmRhcmQgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgZXhwb3J0RW1wdHkgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgdmFsaWRDaGFyZ2VUeXBlcyA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBSZWNlaXB0UXVhbnRpdHkgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgT3BlbkFtb3VudExvY2FsQ3VycmVuY3kgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgZml4ZWRDaGFyZ2VUeXBlcyA9ICIiOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IFN0cmluZyA+IHZhbGlkUHVyY2hhc2VPcmRlckxpc3QgPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IFN0cmluZyA+IHRlbXBQVU5PID0gbnVsbDsNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBIYXNodGFibGUgPiBjaGFyZ2VMaXN0ID0gbnVsbDsNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBIYXNodGFibGUgPiBsaW5lTGlzdCA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gbGluZVJlY2VpcHRMaXN0ID0gbnVsbDsNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBIYXNodGFibGUgPiBvcGVuTGluZVJlY2VpcHRMaXN0ID0gbnVsbDsNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBIYXNodGFibGUgPiBsaW5lQ2hhcmdlUmVjZWlwdExpc3QgPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IGxpbmVPcGVuQ2hhcmdlUmVjZWlwdExpc3QgPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IHRlbXBMaW5lQ2hhcmdlTGlzdCA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gTGluZUNoYXJnZUxpc3QgPSBudWxsOw0KICBwcml2YXRlIFN0cmluZyBvRElWSSA9ICIiLCBvRkFDSSA9ICIiLCBvV0hMTyA9ICIiLCBvUFVOTyA9ICIiLCBvU1VOTyA9ICIiLCBvU1VOTSA9ICIiLCBvUkVOTSA9ICIiLCBvQlVZRSA9ICIiLCBvT1JUWSA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBvQ1NDRCA9ICIiLCBvQ1VDRCA9ICIiLCBvREFURSA9ICIiLCBvUFVEVCA9ICIiLCBvRFdEVCA9ICIiLCBvWVJFMSA9ICIiLCBvUEhOTyA9ICIiLCBvVEZOTyA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBvSUFQQyA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBvUkVNSyA9ICIiLCBvT1JUSyA9ICIiLCBvQ09BTSA9ICIiLCBvVE9RVCA9ICIiLCBvTU9ETCA9ICIiLCBvVEVQWSA9ICIiLCBvVEVQQSA9ICIiLCBvVEVMMSA9ICIiLCBvUFVTTCA9ICIiLCBvUFVTVCA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBvRE1DVSA9ICIiLCBvVEVETCA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBzdGFuZGFyZFVuaXRNZWFzdXJlID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIHVuaXRNZWFzdXJlID0gIiIsIGludlF0eSwgcmVwUXR5Ow0KICBwcml2YXRlIFN0cmluZyBhbHRlcm5hdGVVbml0TWVhc3VyZSA9ICIiLCBPcGVuUXVhbnRpdHlPcmRlclVNX2EgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgUHJpY2VVTV9EQ0NEID0gIiIsIFByaWNlVU1fRE1DRiA9ICIiLCBQcmljZVVNX0NPRkEgPSAiIiwgT3JkZXJVTV9EQ0NEID0gIiIsIE9yZGVyVU1fRE1DRiA9ICIiLCBPcmRlclVNX0NPRkEgPSAiIiwgQmFzaWNVTV9EQ0NEID0gIiIsIFBPUE5fRUExMyA9ICIiLCBJVlFUID0gIiIsIGVhY2hMaW5lUFVVTiA9ICIiLCBlYWNoTGluZVBQVU4gPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgT3JkZXJlZFF1YW50aXR5UHJpY2VVTSwgUmVjZWl2ZWRRdWFudGl0eVByaWNlVU0sIEludm9pY2VkUXVhbnRpdHlQcmljZVVNLCBPcGVuUXVhbnRpdHlQcmljZVVNLCBPcGVuUXVhbnRpdHlPcmRlclVNLCBBbW91bnRPcGVuLCBQcmljZVBlclBpZWNlUHJpY2VVTSwgUHJpY2VQZXJQaWVjZU9yZGVyVU07DQogIHByaXZhdGUgU3RyaW5nIFByaWNlUGVyUGllY2VTdGFuZGFyZFVNLCBwcmljZXBlclBpZWNlT1VNLCBPcGVuUXVhbnRpdHlTdGFuZGFyZFVNLCBJbnZvaWNlZFF1YW50aXR5U3RhbmRhcmRVTSwgT3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVTSwgUmVjZWl2ZWRRdWFudGl0eVN0YW5kYXJkVU0sIEFsdGVybmF0aXZlUXVhbnRpdHlPcGVuLCBBbHRlcm5hdGl2ZVByaWNlOw0KICBwcml2YXRlIFN0cmluZyBBVVRQX2EgPSAiIiwgUmVjZWl2ZWRRdWFudGl0eU9yZGVyVU0gPSAiIiwgUmVjZWl2ZWRDb3N0QW1vdW50T3JkZXJVTU9yZGVyQ3VycmVuY3kgPSAiIiwgQW1vdW50UmVjZWl2ZWRQcmljZVVNID0gIiIsIEFtb3VudE9wZW5QcmljZVVNID0gIiIsIEFtb3VudE9wZW5PcmRlclVNID0gIiI7DQogIHByaXZhdGUgYm9vbGVhbiBpc0VuZE9mRmlsZSA9IGZhbHNlOw0KICBwcml2YXRlIERvdWJsZSBkQ1BQUiA9IDAuMGQ7DQogIHByaXZhdGUgSGFzaHRhYmxlIHRlbXBUYWJsZUNoYXJnZXMgPSBudWxsOw0KICBwcml2YXRlIEhhc2h0YWJsZSB0ZW1wVGFibGVDaGFyZ2VzMSA9IG51bGw7DQoNCiAgcHVibGljIElTUEdldFByY2hzZU9yZChNSUFQSSBtaSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIsIFByb2dyYW1BUEkgcHJvZ3JhbSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIElvbkFQSSBpb24sIExvZ2dlckFQSSBsb2dnZXIpIHsNCiAgICB0aGlzLm1pID0gbWk7DQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTsNCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXI7DQogICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7DQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlOw0KICAgIHRoaXMuaW9uID0gaW9uOw0KICB9DQoNCiAgcHVibGljIHZvaWQgbWFpbigpIHsNCiAgICBnZXRDb250cm9sUHJvcGVydGllcygpOw0KICAgIHZhbGlkUHVyY2hhc2VPcmRlckxpc3QgPSBuZXcgQXJyYXlMaXN0IDwgU3RyaW5nID4gKCk7DQogICAgdGVtcFRhYmxlQ2hhcmdlcyA9IG5ldyBIYXNodGFibGUgPCBTdHJpbmcsIFN0cmluZyA+ICgpOw0KICAgIHRlbXBUYWJsZUNoYXJnZXMxID0gbmV3IEhhc2h0YWJsZSA8IFN0cmluZywgU3RyaW5nID4gKCk7DQogICAgQ09OTyA9IHByb2dyYW0uTERBWkQuZ2V0KCdDT05PJyk7DQogICAgU1VOTyA9IG1pLmluRGF0YS5nZXQoJ1NVTk8nKTsNCiAgICBQVU5PID0gbWkuaW5EYXRhLmdldCgnUFVOTycpOw0KICAgIGlucHV0UFVTTCA9IG1pLmluRGF0YS5nZXQoJ1BVU0wnKTsNCiAgICBpbnB1dFBVU1QgPSBtaS5pbkRhdGEuZ2V0KCdQVVNUJyk7DQogICAgaWYgKGlucHV0UFVTTCA9PSBudWxsIHx8IGlucHV0UFVTTC50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICBpbnB1dFBVU0wgPSAiMCI7DQogICAgfQ0KICAgIGlmIChpbnB1dFBVU1QgPT0gbnVsbCB8fCBpbnB1dFBVU1QudHJpbSgpLmlzRW1wdHkoKSkgew0KICAgICAgaW5wdXRQVVNUID0gIjEwMCI7DQogICAgfQ0KICAgIGludCBvcmRlckFycmF5TGVuZ3RoID0gMDsNCiAgICBpZiAoIVBVTk8udHJpbSgpLmlzRW1wdHkoKSAmJiBTVU5PLnRyaW0oKS5pc0VtcHR5KCkpIHsNCiAgICAgIFN0cmluZ1tdIG9yZGVyQXJyYXkgPSBQVU5PLnNwbGl0KCc7Jyk7DQogICAgICBvcmRlckFycmF5TGVuZ3RoID0gb3JkZXJBcnJheS5sZW5ndGg7DQogICAgICBvcmRlckFycmF5LmVhY2ggew0KICAgICAgICB2YWx1ZSAtPg0KICAgICAgICAgIFN0cmluZyBlYWNoUFVOTyA9IHZhbHVlOw0KDQogICAgICAgIGdldEhlYWRCYXNpYyhlYWNoUFVOTyk7DQogICAgICAgIGdldEhlYWQoZWFjaFBVTk8pOw0KICAgICAgICB2YWxpZFB1cmNoYXNlT3JkZXJMaXN0LmFkZChlYWNoUFVOTy50cmltKCkpOw0KDQogICAgICB9DQoNCiAgICB9IGVsc2UgaWYgKCFTVU5PLnRyaW0oKS5pc0VtcHR5KCkpIHsNCiAgICAgIGdldFB1cmNoYXNlT3JkZXJGb3JTdXBwbGllcigpOw0KICAgIH0NCg0KICAgIGludCBwdXJjaGFzZU9yZGVyQ2FwID0gMDsNCiAgICBpZiAob3JkZXJBcnJheUxlbmd0aCA9PSAwKSB7DQogICAgICBvcmRlckFycmF5TGVuZ3RoID0gNTA7DQogICAgfQ0KICAgIGlmICh2YWxpZFB1cmNoYXNlT3JkZXJMaXN0LnNpemUgPiAxMDApIHsNCiAgICAgIHZhbGlkUHVyY2hhc2VPcmRlckxpc3Quc2l6ZSA9IDEwMDsNCiAgICB9DQogICAgaWYgKHZhbGlkUHVyY2hhc2VPcmRlckxpc3Quc2l6ZSA8IDUwKSB7DQogICAgICBpc0VuZE9mRmlsZSA9IHRydWU7DQogICAgfQ0KICAgIHZhbGlkUHVyY2hhc2VPcmRlckxpc3QuZWFjaCB7DQogICAgICB2YWx1ZSAtPg0KICAgICAgICBTdHJpbmcgZWFjaFBVTk8gPSB2YWx1ZTsNCiAgICAgIGNsZWFyUE9IZWFkZXJGaWVsZHMoKTsNCiAgICAgIGJvb2xlYW4gcmVjb3JkRm91bmQgPSBnZXRPcmRlckRldGFpbHMoZWFjaFBVTk8udHJpbSgpKTsNCiAgICAgIGdldFBPU3RhdHVzKGVhY2hQVU5PLnRyaW0oKSk7DQogICAgICBnZXRDdXJyZW5jeUNvbnZlcnNpb24ob0RJVkkudHJpbSgpKTsNCiAgICAgIGdldFN1cHBsaWVyTmFtZShvU1VOTy50cmltKCkpOw0KICAgICAgaWYgKHJlY29yZEZvdW5kICYmIHB1cmNoYXNlT3JkZXJDYXAgPCBvcmRlckFycmF5TGVuZ3RoKSB7DQogICAgICAgIHB1cmNoYXNlT3JkZXJDYXArKzsNCiAgICAgICAgd3JpdGVQdXJjaGFzZU9yZGVyKCk7DQogICAgICAgIGdldENoYXJnZXMoZWFjaFBVTk8udHJpbSgpKTsNCiAgICAgICAgY2hhcmdlTGlzdC5lYWNoIHsNCiAgICAgICAgICB2YWx1ZTEgLT4NCiAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoQ2hhcmdlID0gdmFsdWUxOw0KICAgICAgICAgIHdyaXRlQ2hhcmdlcyhlYWNoUFVOTywgZWFjaENoYXJnZSk7DQogICAgICAgIH0NCg0KICAgICAgICBnZXRMaW5lRGV0YWlscyhlYWNoUFVOTyk7DQogICAgICAgIGxpbmVMaXN0LmVhY2ggew0KICAgICAgICAgIHZhbHVlMiAtPg0KICAgICAgICAgICAgSGFzaHRhYmxlIGVhY2hMaW5lID0gdmFsdWUyOw0KICAgICAgICAgIGdldFVuaXRPZk1lYXN1cmVtZW50Q29udmVyc2lvbihlYWNoTGluZSk7DQogICAgICAgICAgZ2V0QmFzaWNEZWNpbWFsQ29kZShlYWNoTGluZSk7DQogICAgICAgICAgZ2V0SXRlbUFsaWFzKGVhY2hMaW5lKTsNCiAgICAgICAgICBnZXRNUExJTkVEZXRhaWxzKGVhY2hQVU5PLCBlYWNoTGluZSk7DQogICAgICAgICAgdXNlQ1BQUklmQXZhaWxhYmxlKGVhY2hMaW5lKTsNCiAgICAgICAgICBjaGVja09yZGVyUHJpY2VBbmRCYXNlVW5pdHMoZWFjaExpbmUpDQogICAgICAgICAgd3JpdGVQdXJjaGFzZUxpbmUoZWFjaFBVTk8sIGVhY2hMaW5lKTsNCiAgICAgICAgICBnZXRMaW5lUmVjZWlwdHMoZWFjaFBVTk8sIGVhY2hMaW5lKTsNCiAgICAgICAgICBvcGVuTGluZVJlY2VpcHRMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgICAgICAgIGxpbmVSZWNlaXB0TGlzdC5lYWNoIHsNCiAgICAgICAgICAgIGxpbmVSZWNlaXB0IC0+DQogICAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoTGluZVJlY2VpcHQgPSBsaW5lUmVjZWlwdDsNCg0KICAgICAgICAgICAgY2FsY3VsYXRlUmVjZWlwdFF1YW50aXRpZXMoZWFjaExpbmVSZWNlaXB0LCBlYWNoTGluZSk7DQogICAgICAgICAgICBvcGVuTGluZVJlY2VpcHRMaXN0LmFkZChlYWNoTGluZVJlY2VpcHQpOw0KDQogICAgICAgICAgICBnYXRoZXJSZWNlaXB0Q2hhcmdlcyhlYWNoUFVOTywgZWFjaExpbmVSZWNlaXB0LCBlYWNoTGluZSk7DQoNCiAgICAgICAgICAgIGxpbmVPcGVuQ2hhcmdlUmVjZWlwdExpc3QgPSBuZXcgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gKCk7DQogICAgICAgICAgICBsaW5lQ2hhcmdlUmVjZWlwdExpc3QuZWFjaCB7DQogICAgICAgICAgICAgIGxpbmVDaGFyZ2VSZWNlaXB0IC0+DQogICAgICAgICAgICAgICAgSGFzaHRhYmxlIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdCA9IGxpbmVDaGFyZ2VSZWNlaXB0Ow0KICAgICAgICAgICAgICBnZXRDaGFyZ2VUZXh0KGVhY2hMaW5lQ2hhcmdlUmVjZWlwdCk7DQogICAgICAgICAgICAgIGNhbGN1bGF0ZVJlY2VpcHRDaGFyZ2VRdWFudGl0aWVzKGVhY2hMaW5lLCBlYWNoTGluZVJlY2VpcHQsIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdCk7DQoNCiAgICAgICAgICAgICAgY2hlY2tDaGFyZ2VPcmRlclByaWNlQW5kQmFzZVVuaXQoZWFjaExpbmUsIGVhY2hMaW5lUmVjZWlwdCwgZWFjaExpbmVDaGFyZ2VSZWNlaXB0KTsNCiAgICAgICAgICAgICAgYWRkVG9MaW5lT3BlbkNoYXJnZVJlY2VpcHRMaXN0KGVhY2hQVU5PLCBlYWNoTGluZSwgZWFjaExpbmVSZWNlaXB0LCBlYWNoTGluZUNoYXJnZVJlY2VpcHQpOw0KICAgICAgICAgICAgICBnZXRMaW5lQ2hhcmdlcyhlYWNoUFVOTywgZWFjaExpbmUpOw0KICAgICAgICAgICAgICB0ZW1wTGluZUNoYXJnZUxpc3QuZWFjaCB7DQoNCiAgICAgICAgICAgICAgICB0ZW1wTGluZUNoYXJnZSAtPg0KICAgICAgICAgICAgICAgICAgSGFzaHRhYmxlIGVhY2hUZW1wTGluZUNoYXJnZSA9IHRlbXBMaW5lQ2hhcmdlOw0KDQogICAgICAgICAgICAgICAgZ2V0TGluZUNoYXJnZVRleHQoZWFjaFBVTk8sIHRlbXBMaW5lQ2hhcmdlLCBlYWNoTGluZSk7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBMaW5lQ2hhcmdlTGlzdC5lYWNoIHsNCiAgICAgICAgICAgICAgbGluZUNoYXJnZSAtPg0KICAgICAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoTGluZUNoYXJnZSA9IGxpbmVDaGFyZ2U7DQogICAgICAgICAgICAgIHdyaXRlTGluZUNoYXJnZXMoZWFjaFBVTk8sIGVhY2hMaW5lQ2hhcmdlLCBlYWNoTGluZSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBvcGVuTGluZVJlY2VpcHRMaXN0LmVhY2ggew0KICAgICAgICAgICAgb3BlbkxpbmVSZWNlaXB0IC0+DQogICAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoT3BlbkxpbmVSZWNlaXB0ID0gb3BlbkxpbmVSZWNlaXB0Ow0KICAgICAgICAgICAgd3JpdGVSZWNlaXB0cyhlYWNoUFVOTywgZWFjaE9wZW5MaW5lUmVjZWlwdCwgZWFjaExpbmUpOw0KICAgICAgICAgIH0NCg0KICAgICAgICB9DQoNCiAgICAgIH0NCg0KICAgIH0NCiAgICBpZiAoaXNFbmRPZkZpbGUpIHsNCiAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgJ0wnKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgJyUlRU9GJSUnKTsNCiAgICAgIG1pLndyaXRlKCk7DQogICAgfQ0KICB9DQoNCiAgLyogcmV0cml2ZSB0aGUgY29udHJvbCBwcm9wZXJ0aWVzIGZyb20gQ1VHRVgxDQogICAqLw0KDQogIHB1YmxpYyBnZXRDb250cm9sUHJvcGVydGllcygpIHsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBudW1iZXJPZkRlY2ltYWxzID0gcmVzdWx0cy5nZXQoJ0ExMjEnKTsNCg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkuZXJyb3IoIlBsZWFzZSBtYWludGFpbiByZWNvcmQgaW4gQ1VHRVgxIGZvciBOT09GREVDSU1BTFMiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJGSUxFIjogIklTUEZJTEUiLCAiUEswMSI6ICJHRVRQVVJDSEFTRU9SREVSIiwgIlBLMDIiOiAiTk9PRkRFQ0lNQUxTIl07DQogICAgbWlDYWxsZXIuY2FsbCgiQ1VTRVhUTUkiLCAiR2V0RmllbGRWYWx1ZSIsIHBhcmFtcywgY2FsbGJhY2spOw0KDQogICAgZGVmIGNhbGxiYWNrMiA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgcHJpY2VVbml0U3RhbmRhcmQgPSByZXN1bHRzLmdldCgnQTEyMScpOw0KDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiUGxlYXNlIG1haW50YWluIHJlY29yZCBpbiBDVUdFWDEgZm9yIFBSSUNFVU5JVFNUQU5EQVJEIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtczIgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVFBVUkNIQVNFT1JERVIiLCAiUEswMiI6ICJQUklDRVVOSVRTVEFOREFSRCJdOw0KICAgIG1pQ2FsbGVyLmNhbGwoIkNVU0VYVE1JIiwgIkdldEZpZWxkVmFsdWUiLCBwYXJhbXMyLCBjYWxsYmFjazIpOw0KDQogICAgZGVmIGNhbGxiYWNrMyA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgZXhwb3J0RW1wdHkgPSByZXN1bHRzLmdldCgnQTEyMScpOw0KDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiUGxlYXNlIG1haW50YWluIHJlY29yZCBpbiBDVUdFWDEgZm9yIEVYUE9SVEVNUFRZIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtczMgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVFBVUkNIQVNFT1JERVIiLCAiUEswMiI6ICJFWFBPUlRFTVBUWSJdOw0KICAgIG1pQ2FsbGVyLmNhbGwoIkNVU0VYVE1JIiwgIkdldEZpZWxkVmFsdWUiLCBwYXJhbXMzLCBjYWxsYmFjazMpOw0KDQogICAgZGVmIGNhbGxiYWNrNCA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgdmFsaWRDaGFyZ2VUeXBlcyA9IHJlc3VsdHMuZ2V0KCdBMTIxJyk7DQoNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLmVycm9yKCJQbGVhc2UgbWFpbnRhaW4gcmVjb3JkIGluIENVR0VYMSBmb3IgQ0hBUkdFVFlQRSIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXM0ID0gWyJGSUxFIjogIklTUEZJTEUiLCAiUEswMSI6ICJHRVRQVVJDSEFTRU9SREVSIiwgIlBLMDIiOiAiQ0hBUkdFVFlQRSJdOw0KICAgIG1pQ2FsbGVyLmNhbGwoIkNVU0VYVE1JIiwgIkdldEZpZWxkVmFsdWUiLCBwYXJhbXM0LCBjYWxsYmFjazQpOw0KDQogICAgZGVmIGNhbGxiYWNrNSA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgZml4ZWRDaGFyZ2VUeXBlcyA9IHJlc3VsdHMuZ2V0KCdBMTIxJyk7DQoNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLmVycm9yKCJQbGVhc2UgbWFpbnRhaW4gcmVjb3JkIGluIENVR0VYMSBmb3IgQ0hBUkdFVFlQRSIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXM1ID0gWyJGSUxFIjogIklTUEZJTEUiLCAiUEswMSI6ICJHRVRQVVJDSEFTRU9SREVSIiwgIlBLMDIiOiAiRklYRURDSEFSR0VUWVBFIl07DQogICAgbWlDYWxsZXIuY2FsbCgiQ1VTRVhUTUkiLCAiR2V0RmllbGRWYWx1ZSIsIHBhcmFtczUsIGNhbGxiYWNrNSk7DQoNCiAgfQ0KDQogIC8qIGNsZWFyIGxvY2FsIHZlcmlhYmxlcw0KICAgKi8NCiAgcHVibGljIGNsZWFyUE9IZWFkZXJGaWVsZHMoKSB7DQogICAgb1BVTk8gPSAiIjsNCiAgICBvREFURSA9ICIiOw0KICAgIG9QVURUID0gIiI7DQogICAgb0RXRFQgPSAiIjsNCiAgICBvUkVOTSA9ICIiOw0KICAgIG9TVU5PID0gIiI7DQogICAgb0NTQ0QgPSAiIjsNCiAgICBvQlVZRSA9ICIiOw0KICAgIG9DVUNEID0gIiI7DQogICAgb1lSRTEgPSAiIjsNCiAgICBvUEhOTyA9ICIiOw0KICAgIG9URk5PID0gIiI7DQogICAgb1JFTUsgPSAiIjsNCiAgICBvQ09BTSA9ICIiOw0KICAgIG9ESVZJID0gIiI7DQogICAgb0ZBQ0kgPSAiIjsNCiAgICBvV0hMTyA9ICIiOw0KICAgIG9PUlRZID0gIiI7DQogICAgb1RFUFkgPSAiIjsNCiAgICBvTU9ETCA9ICIiOw0KICAgIG9URVBBID0gIiI7DQogICAgb1RFREwgPSAiIjsNCiAgICBvVEVMMSA9ICIiOw0KICAgIG9UT1FUID0gIiI7DQogICAgb0RNQ1UgPSAiIjsNCiAgICBvU1VOTSA9ICIiOw0KICAgIG9JQVBDID0gIiI7DQogIH0NCg0KICAvKiBnZXQgUHVyY2hhc2Ugb3JkZXIgYmFzaWMgZGF0YWJhc2UgdXNpbmcgUFBTMDAxTUkuR2V0SGVhZEJhc2ljDQogICAqLw0KICBwdWJsaWMgZ2V0SGVhZEJhc2ljKFN0cmluZyBQVU5PKSB7DQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgY2hlY2tQVVNMID0gcmVzdWx0cy5nZXQoJ1BVU0wnKTsNCiAgICAgICAgY2hlY2tQVVNUID0gcmVzdWx0cy5nZXQoJ1BVU1QnKTsNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICJQVU5PIjogUFVOT107DQogICAgbWlDYWxsZXIuY2FsbCgiUFBTMDAxTUkiLCAiR2V0SGVhZEJhc2ljIiwgcGFyYW1zLCBjYWxsYmFjayk7DQogIH0NCg0KICAvKiBnZXQgcHVyY2hhc2Ugb3JkZXIgc3RhdHVzIHVzaW5nIFBQUzAwMU1JLkdldEhlYWRCYXNpYw0KICAgKi8NCiAgcHVibGljIGdldFBPU3RhdHVzKFN0cmluZyBQVU5PKSB7DQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCg0KICAgICAgICBvUFVTTCA9IHJlc3VsdHMuZ2V0KCdQVVNMJyk7DQogICAgICAgIG9QVVNUID0gcmVzdWx0cy5nZXQoJ1BVU1QnKTsNCg0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJDT05PIjogQ09OTywgIlBVTk8iOiBQVU5PXTsNCiAgICBtaUNhbGxlci5jYWxsKCJQUFMwMDFNSSIsICJHZXRIZWFkQmFzaWMiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCiAgfQ0KDQogIC8qIGdldCBwdXJjaGFzZSBvcmRlciBhZGRpdGlvbmFsIGRldGFpbHMgZnJvbSB0YWJsZSBNUEhFQUQNCiAgICovDQoNCiAgcHVibGljIGdldEhlYWQoU3RyaW5nIGVhY2hQVU5PKSB7DQoNCiAgICBpbnQgY3VycmVudENvbXBhbnkgPSAoSW50ZWdlcikgcHJvZ3JhbS5nZXRMREFaRCgpLkNPTk87DQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTVBIRUFEIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJJQUNPTk8iLCAiSUFQVU5PIiwgIklBQ09BTSIsICJJQVBPVEMiLCAiSUFUT1FUIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKTsNCiAgICBjb250YWluZXIuc2V0KCJJQUNPTk8iLCBjdXJyZW50Q29tcGFueSk7DQogICAgY29udGFpbmVyLnNldCgiSUFQVU5PIiwgZWFjaFBVTk8pOw0KDQogICAgaWYgKHF1ZXJ5LnJlYWQoY29udGFpbmVyKSkgew0KICAgICAgY2hlY2tDT0FNID0gY29udGFpbmVyLmdldCgiSUFDT0FNIik7DQogICAgICBjaGVja1BPVEMgPSBjb250YWluZXIuZ2V0KCJJQVBPVEMiKTsNCiAgICAgIGNoZWNrVE9RVCA9IGNvbnRhaW5lci5nZXQoIklBVE9RVCIpOw0KICAgIH0NCiAgfQ0KDQogIC8qIHZhbGlkYXRlIHB1cmNoYXNlIG9yZGVyIG51bWJlcg0KICAgKi8NCiAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVQVU5PKCkgew0KICAgIGNoZWNrQ09BTSA9IGNoZWNrQ09BTS5lcXVhbHMoIiIpID8gIjAiIDogY2hlY2tDT0FNOw0KICAgIGNoZWNrVE9RVCA9IGNoZWNrVE9RVC5lcXVhbHMoIiIpID8gIjAiIDogY2hlY2tUT1FUOw0KDQogICAgQmlnRGVjaW1hbCB0b3RhbEFtb3VudCA9IG5ldyBCaWdEZWNpbWFsKGNoZWNrQ09BTSk7DQogICAgQmlnRGVjaW1hbCB0b3RhbFF1YW50aXR5ID0gbmV3IEJpZ0RlY2ltYWwoY2hlY2tUT1FUKTsNCg0KICAgIGJvb2xlYW4gaGFzQW1vdW50ID0gdG90YWxBbW91bnQuY29tcGFyZVRvKEJpZ0RlY2ltYWwuWkVSTykgIT0gMDsNCiAgICBib29sZWFuIGhhc1F1YW50aXR5ID0gdG90YWxRdWFudGl0eS5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSAhPSAwOw0KDQogICAgYm9vbGVhbiBoYXNBbW91bnRPclF1YW50aXR5ID0gaGFzQW1vdW50IHx8IGhhc1F1YW50aXR5Ow0KDQogICAgaWYgKGNoZWNrUE9UQy5lcXVhbHMoIjMwIikgfHwgY2hlY2tQT1RDLmVxdWFscygiNDAiKSkgew0KICAgICAgcmV0dXJuIGNoZWNrUFVTTC50b0ludGVnZXIoKSA8PSAzMCAmJiBjaGVja1BVU1QudG9JbnRlZ2VyKCkgPj0gMTU7DQogICAgfSBlbHNlIHsNCiAgICAgIHJldHVybiAoY2hlY2tQVVNMLnRvSW50ZWdlcigpIDw9IGlucHV0UFVTVC50b0ludGVnZXIoKSAmJiBjaGVja1BVU1QudG9JbnRlZ2VyKCkgPj0gaW5wdXRQVVNMLnRvSW50ZWdlcigpKSAmJiAoY2hlY2tQVVNMLnRvSW50ZWdlcigpIDwgODUpICYmIGhhc0Ftb3VudE9yUXVhbnRpdHk7DQogICAgfQ0KICB9DQoNCiAgLyogcmV0cml2ZSBQdXJjaGFzZSBvcmRlciBzdXBwbGllciBudW1iZXIgZnJvbSBNUEhFQUQNCiAgICovDQogIHB1YmxpYyBnZXRQdXJjaGFzZU9yZGVyRm9yU3VwcGxpZXIoKSB7DQogICAgREJBY3Rpb24gcXVlcnlNUEhFQUQgPSBkYXRhYmFzZS50YWJsZSgiTVBIRUFEIikuaW5kZXgoIjQwIikuc2VsZWN0aW9uKCJJQVBVTk8iLCAiSUFDT05PIiwgIklBU1VOTyIsICJJQVBVU0wiLCAiSUFQVVNUIiwgIklBUE9UQyIsICJJQVRPUVQiLCAiSUFDT0FNIikuYnVpbGQoKTsNCiAgICBpZiAoIVBVTk8udHJpbSgpLmlzRW1wdHkoKSAmJiAhU1VOTy50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICBFeHByZXNzaW9uRmFjdG9yeSBleHByZXNzaW9uID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIk1QSEVBRCIpOw0KICAgICAgaWYgKCFQVU5PLmNvbnRhaW5zKCc7JykpIHsNCiAgICAgICAgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uZ3QoIklBUFVOTyIsIFBVTk8udHJpbSgpKTsNCiAgICAgICAgcXVlcnlNUEhFQUQgPSBkYXRhYmFzZS50YWJsZSgiTVBIRUFEIikuaW5kZXgoIjQwIikubWF0Y2hpbmcoZXhwcmVzc2lvbikuc2VsZWN0aW9uKCJJQVBVTk8iLCAiSUFDT05PIiwgIklBU1VOTyIsICJJQVBVU0wiLCAiSUFQVVNUIiwgIklBUE9UQyIsICJJQVRPUVQiLCAiSUFDT0FNIikuYnVpbGQoKTsNCiAgICAgIH0NCg0KICAgIH0NCg0KICAgIERCQ29udGFpbmVyIHJlY29yZE1QSEVBRCA9IHF1ZXJ5TVBIRUFELmdldENvbnRhaW5lcigpOw0KICAgIHJlY29yZE1QSEVBRC5zZXQoIklBQ09OTyIsIEludGVnZXIucGFyc2VJbnQoQ09OTy50cmltKCkpKTsNCiAgICByZWNvcmRNUEhFQUQuc2V0KCJJQVNVTk8iLCBTVU5PLnRyaW0oKSk7DQogICAgDQogICAgaW50IHJlYWRzID0gcXVlcnlNUEhFQUQucmVhZEFsbChyZWNvcmRNUEhFQUQsIDIsIGdldE1QSEVBRFJlY29yZHMpOw0KDQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IGdldE1QSEVBRFJlY29yZHMgPSB7DQogICAgREJDb250YWluZXIgcmVjb3JkIC0+DQogICAgU3RyaW5nIFBVTk8gPSByZWNvcmQuZ2V0KCJJQVBVTk8iKSA9PSBudWxsID8gIiIgOiByZWNvcmQuZ2V0KCJJQVBVTk8iKTsNCiAgICBjaGVja1BVU0wgPSByZWNvcmQuZ2V0KCdJQVBVU0wnKSA9PSBudWxsID8gIjAwIiA6IHJlY29yZC5nZXQoJ0lBUFVTTCcpOw0KICAgIGNoZWNrUFVTVCA9IHJlY29yZC5nZXQoJ0lBUFVTVCcpID09IG51bGwgPyAiMDAiIDogcmVjb3JkLmdldCgnSUFQVVNUJyk7DQogICAgY2hlY2tQT1RDID0gcmVjb3JkLmdldCgiSUFQT1RDIikgPT0gbnVsbCA/ICIiIDogcmVjb3JkLmdldCgnSUFQT1RDJyk7DQogICAgY2hlY2tUT1FUID0gcmVjb3JkLmdldCgiSUFUT1FUIikgPT0gbnVsbCA/ICIiIDogcmVjb3JkLmdldCgnSUFUT1FUJyk7DQogICAgY2hlY2tDT0FNID0gcmVjb3JkLmdldCgnSUFDT0FNJykgPT0gbnVsbCA/ICIwIiA6IHJlY29yZC5nZXQoJ0lBQ09BTScpOw0KICAgIGJvb2xlYW4gaXNWYWxpZFBVTk8gPSB2YWxpZGF0ZVBVTk8oKTsNCiAgICBpZiAoaXNWYWxpZFBVTk8pIHsNCiAgICAgIHZhbGlkUHVyY2hhc2VPcmRlckxpc3QuYWRkKFBVTk8udHJpbSgpKTsNCiAgICB9IGVsc2Ugew0KICAgICAgdmFsaWRQdXJjaGFzZU9yZGVyTGlzdC5hZGQoUFVOTy50cmltKCkpOw0KICAgIH0NCg0KICB9DQoNCiAgLyogcmV0cml2ZSBwdXJjaGFzZSBvcmRlciBkZXRhaWxzIGZyb20gTVBIRUFEDQogICAqLw0KICBwdWJsaWMgYm9vbGVhbiBnZXRPcmRlckRldGFpbHMoU3RyaW5nIGVhY2hQVU5PKSB7DQoNCiAgICBib29sZWFuIHJlY29yZEZvdW5kID0gZmFsc2U7DQogICAgaW50IGN1cnJlbnRDb21wYW55ID0gKEludGVnZXIpIHByb2dyYW0uZ2V0TERBWkQoKS5DT05POw0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1QSEVBRCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiSUFDT05PIiwgIklBUFVOTyIsICJJQVBVRFQiLCAiSUFEV0RUIiwgIklBU1VOTyIsICJJQUJVWUUiLCAiSUFDVUNEIiwgIklBWVJFMSIsICJJQVRGTk8iLCAiSUFDT0FNIiwgIklBRElWSSIsICJJQUZBQ0kiLCAiSUFXSExPIiwgIklBT1JUWSIsICJJQVRFUFkiLCAiSUFNT0RMIiwgIklBVEVQQSIsICJJQVRFREwiLCAiSUFURUwxIiwgIklBVE9RVCIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgY29udGFpbmVyLnNldCgiSUFDT05PIiwgY3VycmVudENvbXBhbnkpOw0KICAgIGNvbnRhaW5lci5zZXQoIklBUFVOTyIsIGVhY2hQVU5PKTsNCg0KICAgIGlmIChxdWVyeS5yZWFkKGNvbnRhaW5lcikpIHsNCiAgICAgIHJlY29yZEZvdW5kID0gdHJ1ZTsNCiAgICAgIG9QVU5PID0gY29udGFpbmVyLmdldCgnSUFQVU5PJyk7DQogICAgICBvUFVEVCA9IGNvbnRhaW5lci5nZXQoJ0lBUFVEVCcpOw0KICAgICAgb0RXRFQgPSBjb250YWluZXIuZ2V0KCdJQURXRFQnKTsNCiAgICAgIG9TVU5PID0gY29udGFpbmVyLmdldCgnSUFTVU5PJyk7DQogICAgICBvQlVZRSA9IGNvbnRhaW5lci5nZXQoJ0lBQlVZRScpOw0KICAgICAgb0NVQ0QgPSBjb250YWluZXIuZ2V0KCdJQUNVQ0QnKTsNCiAgICAgIG9ZUkUxID0gY29udGFpbmVyLmdldCgnSUFZUkUxJyk7DQogICAgICBvVEZOTyA9IGNvbnRhaW5lci5nZXQoJ0lBVEZOTycpOw0KICAgICAgb0NPQU0gPSBjb250YWluZXIuZ2V0KCdJQUNPQU0nKTsNCiAgICAgIG9ESVZJID0gY29udGFpbmVyLmdldCgnSUFESVZJJyk7DQogICAgICBvRkFDSSA9IGNvbnRhaW5lci5nZXQoJ0lBRkFDSScpOw0KICAgICAgb1dITE8gPSBjb250YWluZXIuZ2V0KCdJQVdITE8nKTsNCiAgICAgIG9PUlRZID0gY29udGFpbmVyLmdldCgnSUFPUlRZJyk7DQogICAgICBvVEVQWSA9IGNvbnRhaW5lci5nZXQoJ0lBVEVQWScpOw0KICAgICAgb01PREwgPSBjb250YWluZXIuZ2V0KCdJQU1PREwnKTsNCiAgICAgIG9URVBBID0gY29udGFpbmVyLmdldCgnSUFURVBBJyk7DQogICAgICBvVEVETCA9IGNvbnRhaW5lci5nZXQoJ0lBVEVETCcpOw0KICAgICAgb1RFTDEgPSBjb250YWluZXIuZ2V0KCdJQVRFTDEnKTsNCiAgICAgIG9UT1FUID0gY29udGFpbmVyLmdldCgnSUFUT1FUJyk7DQoNCiAgICAgIA0KICAgICAgb0RBVEUgPSBMb2NhbERhdGUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSk7DQoNCiAgICAgIA0KICAgICAgREJBY3Rpb24gcXVlcnlDU1lVU1IgPSBkYXRhYmFzZS50YWJsZSgiQ1NZVVNSIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJDUkNPTk8iLCAiQ1JESVZJIiwgIkNSUkVTUCIsICJDUlJFTk0iKS5idWlsZCgpOw0KICAgICAgREJDb250YWluZXIgY29udGFpbmVyQ1NZVVNSID0gcXVlcnlDU1lVU1IuZ2V0Q29udGFpbmVyKCk7DQogICAgICBjb250YWluZXJDU1lVU1Iuc2V0KCJDUkNPTk8iLCBjdXJyZW50Q29tcGFueSk7DQogICAgICBjb250YWluZXJDU1lVU1Iuc2V0KCJDUkRJVkkiLCBvRElWSSk7DQogICAgICBjb250YWluZXJDU1lVU1Iuc2V0KCJDUlJFU1AiLCBvQlVZRSk7DQoNCiAgICAgIGlmIChxdWVyeUNTWVVTUi5yZWFkKGNvbnRhaW5lckNTWVVTUikpIHsNCiAgICAgICAgb1JFTk0gPSBjb250YWluZXJDU1lVU1IuZ2V0KCJDUlJFTk0iKTsNCiAgICAgIH0NCg0KICAgICAgDQogICAgICBEQkFjdGlvbiBxdWVyeUNJRE1BUyA9IGRhdGFiYXNlLnRhYmxlKCJDSURNQVMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklEQ09OTyIsICJJRFNVTk8iLCAiSURDU0NEIiwgIklEUEhOTyIpLmJ1aWxkKCk7DQogICAgICBEQkNvbnRhaW5lciBjb250YWluZXJDSURNQVMgPSBxdWVyeUNJRE1BUy5nZXRDb250YWluZXIoKTsNCiAgICAgIGNvbnRhaW5lckNJRE1BUy5zZXQoIklEQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICAgIGNvbnRhaW5lckNJRE1BUy5zZXQoIklEU1VOTyIsIG9TVU5PKTsNCg0KICAgICAgaWYgKHF1ZXJ5Q0lETUFTLnJlYWQoY29udGFpbmVyQ0lETUFTKSkgew0KICAgICAgICBvQ1NDRCA9IGNvbnRhaW5lckNJRE1BUy5nZXQoIklEQ1NDRCIpOw0KICAgICAgICBvUEhOTyA9IGNvbnRhaW5lckNJRE1BUy5nZXQoIklEUEhOTyIpOw0KICAgICAgfQ0KDQogICAgICAgDQogICAgICBEQkFjdGlvbiBxdWVyeUNJRFZFTiA9IGRhdGFiYXNlLnRhYmxlKCJDSURWRU4iKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklJQ09OTyIsICJJSVNVTk8iLCAiSUlJQVBDIikuYnVpbGQoKTsNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lckNJRFZFTiA9IHF1ZXJ5Q0lEVkVOLmdldENvbnRhaW5lcigpOw0KICAgICAgY29udGFpbmVyQ0lEVkVOLnNldCgiSUlDT05PIiwgY3VycmVudENvbXBhbnkpOw0KICAgICAgY29udGFpbmVyQ0lEVkVOLnNldCgiSUlTVU5PIiwgb1NVTk8pOw0KDQogICAgICBpZiAocXVlcnlDSURWRU4ucmVhZChjb250YWluZXJDSURWRU4pKSB7DQogICAgICAgIG9JQVBDID0gY29udGFpbmVyQ0lEVkVOLmdldCgiSUlJQVBDIik7DQogICAgICB9IA0KDQogICAgICANCiAgICAgIERCQWN0aW9uIHF1ZXJ5TVBPUkRUID0gZGF0YWJhc2UudGFibGUoIk1QT1JEVCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiT1RDT05PIiwgIk9UT1JUWSIsICJPVFAyNTAiLCAiT1RQT1RDIikuYnVpbGQoKTsNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1QT1JEVCA9IHF1ZXJ5TVBPUkRULmdldENvbnRhaW5lcigpOw0KICAgICAgY29udGFpbmVyTVBPUkRULnNldCgiT1RDT05PIiwgY3VycmVudENvbXBhbnkpOw0KICAgICAgY29udGFpbmVyTVBPUkRULnNldCgiT1RPUlRZIiwgb09SVFkpOw0KDQogICAgICBTdHJpbmcgdFAyNTAgPSAiIjsNCiAgICAgIFN0cmluZyB0UE9UQyA9ICIiOw0KICAgICAgU3RyaW5nIHRBR05UID0gY29udGFpbmVyLmdldCgiSUFBR05UIik7DQoNCiAgICAgIGlmIChxdWVyeU1QT1JEVC5yZWFkKGNvbnRhaW5lck1QT1JEVCkpIHsNCiAgICAgICAgdFAyNTAgPSBjb250YWluZXJNUE9SRFQuZ2V0KCJPVFAyNTAiKTsNCiAgICAgICAgdFBPVEMgPSBjb250YWluZXJNUE9SRFQuZ2V0KCJPVFBPVEMiKTsNCiAgICAgIH0NCg0KICAgICAgDQogICAgICBTdHJpbmcgdFNVTk8gPSBjb250YWluZXIuZ2V0KCJJQVNVTk8iKTsNCiAgICAgIFN0cmluZyB0UkZUWSA9ICIiOw0KICAgICAgU3RyaW5nIHRSRklEID0gY29udGFpbmVyLmdldCgiSUFSRklEIik7DQoNCiAgICAgIGlmICh0UDI1MC5lcXVhbHMoIjEiKSAmJiAhdEFHTlQuZXF1YWxzKCIiKSkgew0KICAgICAgICB0U1VOTyA9ICIiICsgdEFHTlQ7DQogICAgICB9DQoNCiAgICAgIGlmICh0UE9UQy5lcXVhbHMoIjYwIikgfHwgdFBPVEMuZXF1YWxzKCI2NSIpIHx8IHRQT1RDLmVxdWFscygiNzAiKSkgew0KICAgICAgICB0UkZUWSA9ICIxNSI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAodFBPVEMuZXF1YWxzKCI4MCIpIHx8IHRQT1RDLmVxdWFscygiODUiKSkgew0KICAgICAgICAgIHRSRlRZID0gIjM1IjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0UkZUWSA9ICIxMCI7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgREJBY3Rpb24gcXVlcnlDSURSRUYgPSBkYXRhYmFzZS50YWJsZSgiQ0lEUkVGIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJJUkNPTk8iLCAiSVJTVU5PIiwgIklSUkZUWSIsICJJUlJGSUQiLCAiSVJQSE5PIikuYnVpbGQoKTsNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lckNJRFJFRiA9IHF1ZXJ5Q0lEUkVGLmdldENvbnRhaW5lcigpOw0KICAgICAgY29udGFpbmVyQ0lEUkVGLnNldCgiSVJDT05PIiwgY3VycmVudENvbXBhbnkpOw0KICAgICAgY29udGFpbmVyQ0lEUkVGLnNldCgiSVJTVU5PIiwgdFNVTk8pOw0KICAgICAgY29udGFpbmVyQ0lEUkVGLnNldCgiSVJSRlRZIiwgdFJGVFkpOw0KICAgICAgY29udGFpbmVyQ0lEUkVGLnNldCgiSVJSRklEIiwgdFJGSUQpOw0KDQogICAgICBpZiAocXVlcnlDSURSRUYucmVhZChjb250YWluZXJDSURSRUYpKSB7DQogICAgICAgIG9QSE5PID0gY29udGFpbmVyQ0lEUkVGLmdldCgiSVJQSE5PIik7DQogICAgICB9DQoNCiAgICAgIA0KICAgICAgREJBY3Rpb24gcXVlcnlDUkVWVEIgPSBkYXRhYmFzZS50YWJsZSgiQ1JFVlRCIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJSVENPTk8iLCAiUlRSRVZUIiwgIlJUUklETiIsICJSVFJFTUsiKS5idWlsZCgpOw0KICAgICAgREJDb250YWluZXIgY29udGFpbmVyQ1JFVlRCID0gcXVlcnlDUkVWVEIuZ2V0Q29udGFpbmVyKCk7DQogICAgICBjb250YWluZXJDUkVWVEIuc2V0KCJSVENPTk8iLCBjdXJyZW50Q29tcGFueSk7DQogICAgICBjb250YWluZXJDUkVWVEIuc2V0KCJSVFJFVlQiLCAxKTsNCiAgICAgIGNvbnRhaW5lckNSRVZUQi5zZXQoIlJUUklETiIsIGVhY2hQVU5PKTsNCiAgICAgIHF1ZXJ5Q1JFVlRCLnJlYWRBbGwoY29udGFpbmVyQ1JFVlRCLCAzLCBjbG9zdXJlQ1JFVlRCKTsNCg0KICAgIH0NCg0KICAgIHJldHVybiByZWNvcmRGb3VuZDsNCiAgfQ0KDQogIENsb3N1cmUgPCA/ID4gY2xvc3VyZUNSRVZUQiA9IHsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJSZWNvcmQgLT4NCiAgICBvUkVNSyA9IGNvbnRhaW5lclJlY29yZC5nZXQoIlJUUkVNSyIpOw0KICB9DQoNCiAgLyogcmV0cml2ZSBjdXJyZW5jeSBzZXR0aW5nIGZvciBhIGRpdmlzaW9uDQogICAqLw0KICBwdWJsaWMgZ2V0Q3VycmVuY3lDb252ZXJzaW9uKFN0cmluZyBvRElWSSkgew0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZTsNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIG9ETUNVID0gcmVzdWx0cy5nZXQoJ0RNQ1UnKTsNCg0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJDT05PIjogQ09OTywgIkRJVkkiOiBvRElWSV07DQogICAgbWlDYWxsZXIuY2FsbCgiTU5TMTAwTUkiLCAiR2V0QmFzaWNEYXRhIiwgcGFyYW1zLCBjYWxsYmFjayk7DQogIH0NCg0KICAvKiByZXRyaXZlIHN1cHBsaWVyIGRldGFpbHMgdXNpbmcgQ1JTNjIwTUkuR2V0QmFzaWNEYXRhDQogICAqLw0KICBwdWJsaWMgZ2V0U3VwcGxpZXJOYW1lKFN0cmluZyBvU1VOTykgew0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZTsNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIG9TVU5NID0gcmVzdWx0cy5nZXQoJ1NVTk0nKTsNCg0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJDT05PIjogQ09OTywgIlNVTk8iOiBvU1VOT107DQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTNjIwTUkiLCAiR2V0QmFzaWNEYXRhIiwgcGFyYW1zLCBjYWxsYmFjayk7DQogIH0NCg0KICAvKiBzZW5kIHB1cmNoYXNlIG9yZGVyIGRhdGEgdG8gb3V0cHV0DQogICAqLw0KICBwdWJsaWMgd3JpdGVQdXJjaGFzZU9yZGVyKCkgew0KDQogICAgaWYgKG9QVVNMIDwgJzg1JykgeyANCiAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgJ09IJyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVOTycsIG9QVU5PKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdEQVRFJywgb0RBVEUpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVRFQnLCBvUFVEVCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRFdEVCcsIG9EV0RUKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdSRU5NJywgb1JFTk0pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVTk8nLCBvU1VOTyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ1NDRCcsIG9DU0NEKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdCVVlFJywgb0JVWUUpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0NVQ0QnLCBvQ1VDRCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnWVJFMScsIG9ZUkUxKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQSE5PJywgb1BITk8pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RGTk8nLCBvVEZOTyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUkVNSycsIG9SRU1LKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdDT0FNJywgb0NPQU0pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0RJVkknLCBvRElWSSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRkFDSScsIG9GQUNJKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdXSExPJywgb1dITE8pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ09SVFknLCBvT1JUWSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVEVQWScsIG9URVBZKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdNT0RMJywgb01PREwpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RFUEEnLCBvVEVQQSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVEVETCcsIG9URURMKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdURUwxJywgb1RFTDEpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RPUVQnLCBvVE9RVCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnU1VOTScsIG9TVU5NKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVVNMJywgb1BVU0wpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVU1QnLCBvUFVTVCk7DQogICAgICBtaS53cml0ZSgpOw0KICAgIH0NCiAgfQ0KDQogIC8qIGdldCBjaGFyZ2VzIGZvciBlYWNoIHB1cmNoYXNlIG9yZGVyIGZyb20gdGFibGUgTVBPRVhQDQogICAqLw0KICBwcml2YXRlIGdldENoYXJnZXMoU3RyaW5nIGVhY2hQVU5PKSB7DQogICAgY2hhcmdlTGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKTsNCiAgICBEQkFjdGlvbiBxdWVyeU1QT0VYUCA9IGRhdGFiYXNlLnRhYmxlKCJNUE9FWFAiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklWQ09OTyIsICJJVlBVTk8iLCAiSVZQTkxJIiwgIklWUE5MUyIsICJJVkNEU0UiLCAiSVZSRVBOIiwgIklWRVhUWSIsICJJVkNFSUQiLCAiSVZFWElDIiwgIklWV1NPUCIsICJJVkNVQ0QiLCAiSVZDRVZBIiwgIklWQ0VWSiIsICJJVlRIUFIiLCAiSVZJVkNRIiwgIklWQUNJTiIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgcmVjb3JkTVBPRVhQID0gcXVlcnlNUE9FWFAuZ2V0Q29udGFpbmVyKCk7DQogICAgcmVjb3JkTVBPRVhQLnNldCgiSVZDT05PIiwgSW50ZWdlci5wYXJzZUludChDT05PLnRyaW0oKSkpOw0KICAgIHJlY29yZE1QT0VYUC5zZXQoIklWUFVOTyIsIGVhY2hQVU5PLnRyaW0oKSk7DQogICAgcmVjb3JkTVBPRVhQLnNldCgiSVZQTkxJIiwgMCk7DQogICAgcmVjb3JkTVBPRVhQLnNldCgiSVZQTkxTIiwgMCk7DQogICAgDQogICAgaW50IHJlYWRzID0gcXVlcnlNUE9FWFAucmVhZEFsbChyZWNvcmRNUE9FWFAsIDQsIGdldE1QT0VYUFJlY29yZHMpOw0KDQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IGdldE1QT0VYUFJlY29yZHMgPSB7DQogICAgREJDb250YWluZXIgcmVjb3JkIC0+DQogICAgU3RyaW5nIFBOTEkgPSByZWNvcmQuZ2V0KCdJVlBOTEknKTsNCiAgICBTdHJpbmcgUE5MUyA9IHJlY29yZC5nZXQoJ0lWUE5MUycpOw0KICAgIFN0cmluZyBDRFNFID0gcmVjb3JkLmdldCgnSVZDRFNFJyk7DQogICAgU3RyaW5nIFJFUE4gPSByZWNvcmQuZ2V0KCdJVlJFUE4nKTsNCiAgICBTdHJpbmcgRVhUWSA9IHJlY29yZC5nZXQoJ0lWRVhUWScpOw0KICAgIFN0cmluZyBDRUlEID0gcmVjb3JkLmdldCgnSVZDRUlEJyk7DQogICAgU3RyaW5nIEVYSUMgPSByZWNvcmQuZ2V0KCdJVkVYSUMnKTsNCiAgICBTdHJpbmcgV1NPUCA9IHJlY29yZC5nZXQoJ0lWV1NPUCcpOw0KICAgIFN0cmluZyBDVUNEID0gcmVjb3JkLmdldCgnSVZDVUNEJyk7DQogICAgU3RyaW5nIENFVkEgPSByZWNvcmQuZ2V0KCdJVkNFVkEnKTsNCiAgICBTdHJpbmcgQ0VWSiA9IHJlY29yZC5nZXQoJ0lWQ0VWSicpOw0KICAgIFN0cmluZyBUSFBSID0gcmVjb3JkLmdldCgnSVZUSFBSJyk7DQogICAgU3RyaW5nIElWQ1EgPSByZWNvcmQuZ2V0KCdJVklWQ1EnKTsNCiAgICANCiAgICBTdHJpbmcgQUNJTiA9IHJlY29yZC5nZXQoJ0lWQUNJTicpOw0KICAgIEhhc2h0YWJsZSB0ZW1wVGFibGUgPSBuZXcgSGFzaHRhYmxlIDwgU3RyaW5nLA0KICAgIFN0cmluZyA+ICgpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BOTEknLCBQTkxJKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQTkxTJywgUE5MUyk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0RTRScsIENEU0UpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1JFUE4nLCBSRVBOKTsNCiAgICB0ZW1wVGFibGUucHV0KCdFWFRZJywgRVhUWSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0VJRCcsIENFSUQpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0VYSUMnLCBFWElDKTsNCiAgICB0ZW1wVGFibGUucHV0KCdXU09QJywgV1NPUCk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ1VDRCcsIENVQ0QpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NFVkEnLCBDRVZBKTsNCiAgICB0ZW1wVGFibGUucHV0KCdDRVZKJywgQ0VWSik7DQogICAgdGVtcFRhYmxlLnB1dCgnVEhQUicsIFRIUFIpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0lWQ1EnLCBJVkNRKTsNCiAgICB0ZW1wVGFibGUucHV0KCdBQ0lOJywgQUNJTik7DQogICAgY2hhcmdlTGlzdC5hZGQodGVtcFRhYmxlKTsNCg0KICB9DQogIC8qIHNlbmQgY2hhcmdlIGRldGFpbHMgdG8gb3V0cHV0DQogICAqLw0KICBwdWJsaWMgd3JpdGVDaGFyZ2VzKFN0cmluZyBlYWNoUFVOTywgSGFzaHRhYmxlIGVhY2hDaGFyZ2UpIHsNCiAgICBTdHJpbmcgQ0VJRCA9IGVhY2hDaGFyZ2UuZ2V0KCdDRUlEJyk7DQogICAgU3RyaW5nIFRYMzAgPSAiIjsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBUWDMwID0gcmVzdWx0cy5nZXQoJ1RYMzAnKTsNCg0KICAgICAgfQ0KICAgICAgU3RyaW5nIFBOTEkgPSBlYWNoQ2hhcmdlLmdldCgnUE5MSScpOw0KICAgICAgU3RyaW5nIFBOTFMgPSBlYWNoQ2hhcmdlLmdldCgnUE5MUycpOw0KICAgICAgU3RyaW5nIENEU0UgPSBlYWNoQ2hhcmdlLmdldCgnQ0RTRScpOw0KICAgICAgU3RyaW5nIFJFUE4gPSBlYWNoQ2hhcmdlLmdldCgnUkVQTicpOw0KICAgICAgU3RyaW5nIEVYVFkgPSBlYWNoQ2hhcmdlLmdldCgnRVhUWScpOw0KICAgICAgU3RyaW5nIEVYSUMgPSBlYWNoQ2hhcmdlLmdldCgnRVhJQycpOw0KICAgICAgU3RyaW5nIFdTT1AgPSBlYWNoQ2hhcmdlLmdldCgnV1NPUCcpOw0KICAgICAgU3RyaW5nIENVQ0QgPSBlYWNoQ2hhcmdlLmdldCgnQ1VDRCcpOw0KICAgICAgU3RyaW5nIENFVkEgPSBlYWNoQ2hhcmdlLmdldCgnQ0VWQScpOw0KICAgICAgU3RyaW5nIENFVkogPSBlYWNoQ2hhcmdlLmdldCgnQ0VWSicpOw0KICAgICAgU3RyaW5nIFRIUFIgPSBlYWNoQ2hhcmdlLmdldCgnVEhQUicpOw0KICAgICAgU3RyaW5nIElWQ1EgPSBlYWNoQ2hhcmdlLmdldCgnSVZDUScpOw0KICAgICAgU3RyaW5nIEFDSU4gPSBlYWNoQ2hhcmdlLmdldCgnQUNJTicpOw0KDQogICAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICdPQycpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVTk8nLCBlYWNoUFVOTyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ0RTRScsIENEU0UpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JFUE4nLCBSRVBOKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdFWFRZJywgRVhUWSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRVhJQycsIEVYSUMpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1dTT1AnLCBXU09QKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdDQ1VDJywgQ1VDRCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ0VWQScsIENFVkEpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFVkonLCBDRVZKKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdUSFBSJywgVEhQUik7DQogICAgICBtaS5vdXREYXRhLnB1dCgnSVZDUScsIElWQ1EpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RYMzAnLCBUWDMwKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdDRUlEJywgQ0VJRCk7DQogICAgICBtaS53cml0ZSgpOw0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJDRUlEIjogQ0VJRC50cmltKCldOw0KICAgIG1pQ2FsbGVyLmNhbGwoIlBQUzI4ME1JIiwgIkdldEVsZW1lbnQiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCg0KICB9DQoNCiAgLyogUmV0cml2ZSBwdXJjaGFzZSBvcmRlciBsaW5lIGRldGFpbHMgZnJvbSBNUExJTkUNCiAgICovDQoNCiAgcHVibGljIGdldExpbmVEZXRhaWxzKFN0cmluZyBlYWNoUFVOTykgew0KDQogICAgbGluZUxpc3QgPSBuZXcgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gKCk7DQogICAgaW50IGN1cnJlbnRDb21wYW55ID0gKEludGVnZXIpIHByb2dyYW0uZ2V0TERBWkQoKS5DT05POw0KDQogICAgREJBY3Rpb24gcXVlcnlNUExJTkUgPSBkYXRhYmFzZS50YWJsZSgiTVBMSU5FIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJJQkNPTk8iLCAiSUJQVU5PIiwgIklCUE5MSSIsICJJQlBOTFMiLCAiSUJJVE5PIiwgIklCU0lURSIsICJJQkNGUUEiLCAiSUJQVVVOIiwgIklCV0hMTyIsICJJQlBVU1QiLCAiSUJQVVNMIiwgIklCU1VOTyIsICJJQlBJVEQiLCAiSUJQSVRUIiwgIklCUFVQUiIsICJJQkNQUFIiLCAiSUJDRkQxIiwgIklCQ0ZEMiIsICJJQkNGRDMiLCAiSUJQUFVOIiwgIklCUFVDRCIsICJJQkxOQU0iLCAiSUJQVENEIiwgIklCVlRDRCIsICJJQk9SUUEiLCAiSUJBRFFBIiwgIklCUlZRQSIsICJJQkNBUUEiLCAiSUJSSlFBIiwgIklCU0RRQSIsICJJQklWUUEiLCAiSUJQVVJDIiwgIklCQlVZRSIsICJJQkdSTVQiLCAiSUJST1JDIiwgIklCUk9STiIsICJJQlJPUkwiLCAiSUJST1JYIiwgIklCTU9ETCIsICJJQlRFREwiLCAiSUJURUwxIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNUExJTkUgPSBxdWVyeU1QTElORS5nZXRDb250YWluZXIoKTsNCiAgICBjb250YWluZXJNUExJTkUuc2V0KCJJQkNPTk8iLCBjdXJyZW50Q29tcGFueSk7DQogICAgY29udGFpbmVyTVBMSU5FLnNldCgiSUJQVU5PIiwgZWFjaFBVTk8pOw0KDQogICAgcXVlcnlNUExJTkUucmVhZEFsbChjb250YWluZXJNUExJTkUsIDIsIGNsb3N1cmVNUExJTkUpOw0KDQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IGNsb3N1cmVNUExJTkUgPSB7DQogICAgREJDb250YWluZXIgY29udGFpbmVyTVBMSU5FIC0+DQoNCiAgICBIYXNodGFibGUgdGVtcFRhYmxlID0gbmV3IEhhc2h0YWJsZSA8IFN0cmluZywNCiAgICBTdHJpbmcgPiAoKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQTkxJJywgY29udGFpbmVyTVBMSU5FLmdldCgnSUJQTkxJJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUE5MUycsIGNvbnRhaW5lck1QTElORS5nZXQoJ0lCUE5MUycpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0lUTk8nLCBjb250YWluZXJNUExJTkUuZ2V0KCdJQklUTk8nKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdTSVRFJywgY29udGFpbmVyTVBMSU5FLmdldCgnSUJTSVRFJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0ZRQScsIGNvbnRhaW5lck1QTElORS5nZXQoJ0lCQ0ZRQScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BVVU4nLCBjb250YWluZXJNUExJTkUuZ2V0KCdJQlBVVU4nKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdXSExPJywgY29udGFpbmVyTVBMSU5FLmdldCgnSUJXSExPJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUFVTVCcsIGNvbnRhaW5lck1QTElORS5nZXQoJ0lCUFVTVCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BVU0wnLCBjb250YWluZXJNUExJTkUuZ2V0KCdJQlBVU0wnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdTVU5PJywgY29udGFpbmVyTVBMSU5FLmdldCgnSUJTVU5PJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUElURCcsIGNvbnRhaW5lck1QTElORS5nZXQoJ0lCUElURCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BJVFQnLCBjb250YWluZXJNUExJTkUuZ2V0KCdJQlBJVFQnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQVVBSJywgY29udGFpbmVyTVBMSU5FLmdldCgnSUJQVVBSJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ1BQUicsIGNvbnRhaW5lck1QTElORS5nZXQoJ0lCQ1BQUicpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NGRDEnLCBjb250YWluZXJNUExJTkUuZ2V0KCdJQkNGRDEnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdDRkQyJywgY29udGFpbmVyTVBMSU5FLmdldCgnSUJDRkQyJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0ZEMycsIGNvbnRhaW5lck1QTElORS5nZXQoJ0lCQ0ZEMycpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BQVU4nLCBjb250YWluZXJNUExJTkUuZ2V0KCdJQlBQVU4nKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQVUNEJywgY29udGFpbmVyTVBMSU5FLmdldCgnSUJQVUNEJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnTE5BTScsIGNvbnRhaW5lck1QTElORS5nZXQoJ0lCTE5BTScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BUQ0QnLCBjb250YWluZXJNUExJTkUuZ2V0KCdJQlBUQ0QnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdWVENEJywgY29udGFpbmVyTVBMSU5FLmdldCgnSUJWVENEJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnT1JRQScsIGNvbnRhaW5lck1QTElORS5nZXQoJ0lCT1JRQScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0FEUUEnLCBjb250YWluZXJNUExJTkUuZ2V0KCdJQkFEUUEnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdSVlFBJywgY29udGFpbmVyTVBMSU5FLmdldCgnSUJSVlFBJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0FRQScsIGNvbnRhaW5lck1QTElORS5nZXQoJ0lCQ0FRQScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1JKUUEnLCBjb250YWluZXJNUExJTkUuZ2V0KCdJQlJKUUEnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdTRFFBJywgY29udGFpbmVyTVBMSU5FLmdldCgnSUJTRFFBJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnSVZRQScsIGNvbnRhaW5lck1QTElORS5nZXQoJ0lCSVZRQScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BVUkMnLCBjb250YWluZXJNUExJTkUuZ2V0KCdJQlBVUkMnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdCVVlFJywgY29udGFpbmVyTVBMSU5FLmdldCgnSUJCVVlFJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnR1JNVCcsIGNvbnRhaW5lck1QTElORS5nZXQoJ0lCR1JNVCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1ZUQ0QnLCBjb250YWluZXJNUExJTkUuZ2V0KCdJQlZUQ0QnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdST1JDJywgY29udGFpbmVyTVBMSU5FLmdldCgnSUJST1JDJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUk9STicsIGNvbnRhaW5lck1QTElORS5nZXQoJ0lCUk9STicpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1JPUkwnLCBjb250YWluZXJNUExJTkUuZ2V0KCdJQlJPUkwnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdST1JYJywgY29udGFpbmVyTVBMSU5FLmdldCgnSUJST1JYJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnTU9ETCcsIGNvbnRhaW5lck1QTElORS5nZXQoJ0lCTU9ETCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1RFREwnLCBjb250YWluZXJNUExJTkUuZ2V0KCdJQlRFREwnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdURUwxJywgY29udGFpbmVyTVBMSU5FLmdldCgnSUJURUwxJykudG9TdHJpbmcoKSk7DQoNCiAgICBpbnQgY3VycmVudENvbXBhbnkgPSAoSW50ZWdlcikgcHJvZ3JhbS5nZXRMREFaRCgpLkNPTk87DQoNCiAgICANCiAgICBTdHJpbmcgdElUTk8gPSBjb250YWluZXJNUExJTkUuZ2V0KCdJQklUTk8nKS50b1N0cmluZygpOw0KICAgIFN0cmluZyB0VU5NUyA9ICIiOw0KICAgIFN0cmluZyB0Q1dVTiA9ICIiOw0KICAgIFN0cmluZyB0RENDRCA9ICIwIjsNCiAgICBTdHJpbmcgdFBEQ0MgPSAiMCI7DQogICAgU3RyaW5nIGRlY2ltYWxaZXJvZXMgPSAiIjsNCg0KICAgIERCQWN0aW9uIHF1ZXJ5TUlUTUFTID0gZGF0YWJhc2UudGFibGUoIk1JVE1BUyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTU1DT05PIiwgIk1NSVROTyIsICJNTVVOTVMiLCAiTU1EQ0NEIiwgIk1NUERDQyIsICJNTUNXVU4iKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1JVE1BUyA9IHF1ZXJ5TUlUTUFTLmdldENvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lck1JVE1BUy5zZXQoIk1NQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICBjb250YWluZXJNSVRNQVMuc2V0KCJNTUlUTk8iLCB0SVROTyk7DQoNCiAgICBpZiAocXVlcnlNSVRNQVMucmVhZChjb250YWluZXJNSVRNQVMpKSB7DQoNCiAgICAgIHRVTk1TID0gY29udGFpbmVyTUlUTUFTLmdldCgiTU1VTk1TIik7DQogICAgICB0Q1dVTiA9IGNvbnRhaW5lck1JVE1BUy5nZXQoIk1NQ1dVTiIpOw0KICAgICAgdERDQ0QgPSBjb250YWluZXJNSVRNQVMuZ2V0KCJNTURDQ0QiKTsNCiAgICAgIHRQRENDID0gY29udGFpbmVyTUlUTUFTLmdldCgiTU1QRENDIik7DQoNCiAgICAgIA0KICAgICAgaW50IGRjY2QgPSBJbnRlZ2VyLnBhcnNlSW50KHREQ0NEKTsNCiAgICAgIGlmIChkY2NkID4gMCkgew0KICAgICAgICBkZWNpbWFsWmVyb2VzID0gIi4iOw0KDQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZGNjZDsgaSsrKSB7DQogICAgICAgICAgZGVjaW1hbFplcm9lcyA9IGRlY2ltYWxaZXJvZXMgKyAiMCI7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICB0ZW1wVGFibGUucHV0KCdVTk1TJywgdFVOTVMpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NXVU4nLCB0Q1dVTik7DQoNCiAgICANCiAgICBTdHJpbmcgdERNQ0YgPSAiMSI7DQogICAgU3RyaW5nIHRDT0ZBID0gIjEiOw0KICAgIFN0cmluZyB0UFVVTiA9IGNvbnRhaW5lck1QTElORS5nZXQoJ0lCUFVVTicpLnRvU3RyaW5nKCk7DQogICAgYm9vbGVhbiBleGlzdE1JVEFVTiA9IGZhbHNlOw0KDQogICAgREJBY3Rpb24gcXVlcnlNSVRBVU4gPSBkYXRhYmFzZS50YWJsZSgiTUlUQVVOIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNVUNPTk8iLCAiTVVJVE5PIiwgIk1VQVVUUCIsICJNVUFMVU4iLCAiTVVETUNGIiwgIk1VQ09GQSIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyTUlUQVVOID0gcXVlcnlNSVRBVU4uZ2V0Q29udGFpbmVyKCk7DQogICAgY29udGFpbmVyTUlUQVVOLnNldCgiTVVDT05PIiwgY3VycmVudENvbXBhbnkpOw0KICAgIGNvbnRhaW5lck1JVEFVTi5zZXQoIk1VSVROTyIsIHRJVE5PKTsNCiAgICBjb250YWluZXJNSVRBVU4uc2V0KCJNVUFVVFAiLCAxKTsNCiAgICBjb250YWluZXJNSVRBVU4uc2V0KCJNVUFMVU4iLCB0UFVVTik7DQoNCiAgICBpZiAocXVlcnlNSVRBVU4ucmVhZChjb250YWluZXJNSVRBVU4pKSB7DQogICAgICBleGlzdE1JVEFVTiA9IHRydWU7DQogICAgICB0RE1DRiA9IGNvbnRhaW5lck1JVEFVTi5nZXQoIk1VRE1DRiIpOw0KICAgICAgdENPRkEgPSBjb250YWluZXJNSVRBVU4uZ2V0KCJNVUNPRkEiKTsNCiAgICB9DQoNCiAgICANCiAgICBTdHJpbmcgdE9SUVQgPSBjb250YWluZXJNUExJTkUuZ2V0KCdJQk9SUUEnKS50b1N0cmluZygpOw0KDQogICAgZG91YmxlIHRQWE5VTSA9IERvdWJsZS5wYXJzZURvdWJsZSh0T1JRVCk7DQoNCiAgICBEZWNpbWFsRm9ybWF0IGRmID0gbmV3IERlY2ltYWxGb3JtYXQoIiMjIyMjIyMjIyMjMCIgKyBkZWNpbWFsWmVyb2VzKTsNCiAgICB0T1JRVCA9ICIiICsgZGYuZm9ybWF0KHRQWE5VTSk7DQoNCiAgICB0ZW1wVGFibGUucHV0KCdPUlFUJywgdE9SUVQpOw0KDQogICAgDQogICAgdGVtcFRhYmxlLnB1dCgnTE9DRCcsIHByb2dyYW0uZ2V0TERBWkQoKS5MT0NELnRvU3RyaW5nKCkpOw0KDQogICAgDQogICAgU3RyaW5nIHRQVVFUID0gY29udGFpbmVyTVBMSU5FLmdldCgnSUJQVUNEJykudG9TdHJpbmcoKTsNCg0KICAgIHRQWE5VTSA9IERvdWJsZS5wYXJzZURvdWJsZSh0UFVRVCk7DQoNCiAgICBpZiAoIXRQVVVOLmVxdWFscyh0VU5NUykpIHsNCg0KICAgICAgaWYgKGV4aXN0TUlUQVVOKSB7DQoNCiAgICAgICAgaWYgKHRETUNGLmVxdWFscygiMiIpKSB7DQogICAgICAgICAgdFBYTlVNID0gdFBYTlVNICogRG91YmxlLnBhcnNlRG91YmxlKHRDT0ZBKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0UFhOVU0gPSB0UFhOVU0gLyBEb3VibGUucGFyc2VEb3VibGUodENPRkEpOw0KICAgICAgICB9DQoNCiAgICAgIH0NCg0KICAgIH0NCg0KICAgIGRmID0gbmV3IERlY2ltYWxGb3JtYXQoIiMjIyMjIyMjIyMjMCIgKyBkZWNpbWFsWmVyb2VzKTsNCiAgICB0UFVRVCA9ICIiICsgZGYuZm9ybWF0KHRQWE5VTSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUFVRVCcsIHRQVVFUKTsNCg0KICAgIA0KICAgIFN0cmluZyB0UlZRVCA9IGNvbnRhaW5lck1QTElORS5nZXQoJ0lCUlZRQScpLnRvU3RyaW5nKCk7DQoNCiAgICB0UFhOVU0gPSBEb3VibGUucGFyc2VEb3VibGUodFJWUVQpOw0KDQogICAgZGYgPSBuZXcgRGVjaW1hbEZvcm1hdCgiIyMjIyMjIyMjIyMwIiArIGRlY2ltYWxaZXJvZXMpOw0KICAgIHRSVlFUID0gIiIgKyBkZi5mb3JtYXQodFBYTlVNKTsNCiAgICB0ZW1wVGFibGUucHV0KCdSVlFUJywgdFJWUVQpOw0KDQogICAgbGluZUxpc3QuYWRkKHRlbXBUYWJsZSk7DQoNCiAgfQ0KDQogIC8qIHJlcnRpdmUgVW5pdCBvZiBNZWFzdXJlbWVudCBmcm9tIHRhYmxlIE1JVEFVTg0KICAgKi8NCiAgcHVibGljIGdldFVuaXRPZk1lYXN1cmVtZW50Q29udmVyc2lvbihIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICBTdHJpbmcgSVROTyA9IGVhY2hMaW5lLmdldCgnSVROTycpOw0KICAgIGVhY2hMaW5lUFVVTiA9IGVhY2hMaW5lLmdldCgnUFVVTicpOw0KICAgIGVhY2hMaW5lUFBVTiA9IGVhY2hMaW5lLmdldCgnUFBVTicpOw0KICAgIGludCBjdXJyZW50Q29tcGFueSA9IHByb2dyYW0uZ2V0TERBWkQoKS5DT05POw0KDQogICAgREJBY3Rpb24gcXVlcnlNSVRBVU4gPSBkYXRhYmFzZS50YWJsZSgiTUlUQVVOIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNVUNPTk8iLCAiTVVJVE5PIiwgIk1VQVVUUCIsICJNVUFMVU4iLCAiTVVETUNGIiwgIk1VQ09GQSIsICJNVURDQ0QiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1JVEFVTiA9IHF1ZXJ5TUlUQVVOLmdldENvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lck1JVEFVTi5zZXQoIk1VQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICBjb250YWluZXJNSVRBVU4uc2V0KCJNVUlUTk8iLCBJVE5PKTsNCiAgICBxdWVyeU1JVEFVTi5yZWFkQWxsKGNvbnRhaW5lck1JVEFVTiwgMiwgY2xvc3VyZU1JVEFVTik7DQoNCiAgfQ0KDQogIENsb3N1cmUgPCA/ID4gY2xvc3VyZU1JVEFVTiA9IHsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSVRBVU4gLT4NCg0KICAgIFN0cmluZyBBVVRQID0gY29udGFpbmVyTUlUQVVOLmdldCgnTVVBVVRQJyk7DQogICAgQVVUUF9hID0gQVVUUDsNCiAgICBTdHJpbmcgQUxVTiA9IGNvbnRhaW5lck1JVEFVTi5nZXQoJ01VQUxVTicpOw0KICAgIFN0cmluZyBEQ0NEID0gY29udGFpbmVyTUlUQVVOLmdldCgnTVVEQ0NEJyk7DQogICAgU3RyaW5nIENPRkEgPSBjb250YWluZXJNSVRBVU4uZ2V0KCdNVUNPRkEnKTsNCiAgICBTdHJpbmcgRE1DRiA9IGNvbnRhaW5lck1JVEFVTi5nZXQoJ01VRE1DRicpOw0KICAgIGlmIChBTFVOLnRyaW0oKS5lcXVhbHMoZWFjaExpbmVQVVVOLnRyaW0oKSkgJiYgQVVUUC50cmltKCkuZXF1YWxzKCIxIikpIHsNCiAgICAgIE9yZGVyVU1fRENDRCA9IERDQ0Q7DQogICAgICBPcmRlclVNX0NPRkEgPSBDT0ZBOw0KICAgICAgT3JkZXJVTV9ETUNGID0gRE1DRjsNCiAgICB9DQogICAgaWYgKEFMVU4udHJpbSgpLmVxdWFscyhlYWNoTGluZVBQVU4udHJpbSgpKSkgew0KICAgICAgaWYgKEFVVFAudHJpbSgpLmVxdWFscygiMSIpKSB7DQogICAgICAgIFByaWNlVU1fRENDRCA9IERDQ0Q7DQogICAgICB9DQogICAgICBpZiAoQVVUUC50cmltKCkuZXF1YWxzKCIyIikpIHsNCiAgICAgICAgUHJpY2VVTV9DT0ZBID0gQ09GQTsNCiAgICAgICAgUHJpY2VVTV9ETUNGID0gRE1DRjsNCiAgICAgIH0NCiAgICB9DQogIH0NCiAgLyogZ2V0IGJhc2ljIGRlY2ltYWwgY29kZSBmb3IgSXRlbSBhbmQgb3JkZXIgcXVhbnRpdHlJbnZvaWNlZA0KICAgKi8NCiAgcHVibGljIGdldEJhc2ljRGVjaW1hbENvZGUoSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIElUTk8gPSBlYWNoTGluZS5nZXQoJ0lUTk8nKTsNCiAgICBTdHJpbmcgT1JRQSA9IGVhY2hMaW5lLmdldCgnT1JRQScpOw0KICAgIFN0cmluZyBBRFFBID0gZWFjaExpbmUuZ2V0KCdBRFFBJyk7DQogICAgU3RyaW5nIE9SUVQgPSBlYWNoTGluZS5nZXQoJ09SUVQnKTsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBCYXNpY1VNX0RDQ0QgPSByZXN1bHRzLmdldCgnRENDRCcpOw0KICAgICAgfQ0KICAgICAgaWYgKEFEUUEgIT0gbnVsbCAmJiBBRFFBLnRyaW0oKS5pc0VtcHR5KCkpIHsNCiAgICAgICAgQmlnRGVjaW1hbCBhZHZpc2VkUXVhbnRpdHkgPSBuZXcgQmlnRGVjaW1hbChBRFFBKTsNCiAgICAgICAgaWYgKGFkdmlzZWRRdWFudGl0eS5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSAhPSAwKSB7DQogICAgICAgICAgQmFzaWNVTV9EQ0NEID0gQmFzaWNVTV9EQ0NELmVxdWFscygiIikgPyAiMiIgOiBCYXNpY1VNX0RDQ0Q7DQogICAgICAgICAgT3JkZXJVTV9DT0ZBID0gT3JkZXJVTV9DT0ZBLmVxdWFscygiIikgPyAiMSIgOiBPcmRlclVNX0NPRkEudHJpbSgpOw0KICAgICAgICAgIE9yZGVyVU1fRE1DRiA9IE9yZGVyVU1fRE1DRi5lcXVhbHMoIiIpID8gIjEiIDogT3JkZXJVTV9ETUNGLnRyaW0oKTsNCg0KICAgICAgICAgIEJpZ0RlY2ltYWwgb3JkZXJlZFF1YW50aXR5ID0gbmV3IEJpZ0RlY2ltYWwoT1JRQSk7DQogICAgICAgICAgQmlnRGVjaW1hbCBjb252ZXJzaW9uRmFjdG9yID0gbmV3IEJpZ0RlY2ltYWwoT3JkZXJVTV9DT0ZBKTsNCiAgICAgICAgICBCaWdJbnRlZ2VyIGRlY2ltYWxQbGFjZXMgPSBuZXcgQmlnSW50ZWdlcihCYXNpY1VNX0RDQ0QpOw0KDQogICAgICAgICAgQmlnRGVjaW1hbCBiYXNlUXVhbnRpdHkgPSBudWxsOw0KDQogICAgICAgICAgaWYgKE9yZGVyVU1fRE1DRi5lcXVhbHMoIjEiKSkgew0KICAgICAgICAgICAgYmFzZVF1YW50aXR5ID0gb3JkZXJlZFF1YW50aXR5LnNldFNjYWxlKDgsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS5tdWx0aXBseShjb252ZXJzaW9uRmFjdG9yKTsNCiAgICAgICAgICAgIE9SUVQgPSBiYXNlUXVhbnRpdHkuc2V0U2NhbGUoZGVjaW1hbFBsYWNlcy5pbnRWYWx1ZSgpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBiYXNlUXVhbnRpdHkgPSBvcmRlcmVkUXVhbnRpdHkuc2V0U2NhbGUoOCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLmRpdmlkZShjb252ZXJzaW9uRmFjdG9yLCBSb3VuZGluZ01vZGUuSEFMRl9VUCk7DQogICAgICAgICAgICBPUlFUID0gYmFzZVF1YW50aXR5LnNldFNjYWxlKGRlY2ltYWxQbGFjZXMuaW50VmFsdWUoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICAgICAgICB9DQogICAgICAgICAgZWFjaExpbmUucmVwbGFjZSgnT1JRVCcsIE9SUVQpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLCAiSVROTyI6IElUTk9dOw0KICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzIwME1JIiwgIkdldEl0bUJhc2ljIiwgcGFyYW1zLCBjYWxsYmFjayk7DQogIH0NCg0KICAvKiBzZW5kIHB1cmNoYXNlIG9yZGVyIGxpbmUgZGV0YWlscyB0byBvdXRwdXQNCiAgICovDQogIHB1YmxpYyB3cml0ZVB1cmNoYXNlTGluZShTdHJpbmcgZWFjaFBVTk8sIEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIFN0cmluZyBTVURPbGluZSA9IGVhY2hMaW5lLmdldCgnU1VETycpOw0KICAgIGlmIChlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpIDwgJzg1JyAmJiBvSUFQQy5lcXVhbHMoIjEiKSkgew0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAnT0wnKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgZWFjaFBVTk8pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVFJEVCcsIGVhY2hMaW5lLmdldCgnVFJEVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xXSEwnLCBlYWNoTGluZS5nZXQoJ1dITE8nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdJVE5PJywgZWFjaExpbmUuZ2V0KCdJVE5PJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUElURCcsIGVhY2hMaW5lLmdldCgnUElURCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVFQnLCBlYWNoTGluZS5nZXQoJ1BJVFQnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdTSVRFJywgZWFjaExpbmUuZ2V0KCdTSVRFJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ0FRQScsIGVhY2hMaW5lLmdldCgnQ0FRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JKUUEnLCBlYWNoTGluZS5nZXQoJ1JKUUEnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdTRFFBJywgZWFjaExpbmUuZ2V0KCdTRFFBJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnT1JRQScsIGVhY2hMaW5lLmdldCgnT1JRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWUUEnLCBlYWNoTGluZS5nZXQoJ0lWUUEnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdSVlFBJywgZWFjaExpbmUuZ2V0KCdSVlFBJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ0ZRQScsIGVhY2hMaW5lLmdldCgnQ0ZRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ09RUFUnLCBlYWNoTGluZS5nZXQoJ09wZW5RdWFudGl0eVByaWNlVU0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVVJDJywgZWFjaExpbmUuZ2V0KCdQVVJDJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTEJVWScsIGVhY2hMaW5lLmdldCgnQlVZRScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NUVU0nLCBlYWNoTGluZS5nZXQoJ1N0YW5kYXJkVU0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdVTk1TJywgZWFjaExpbmUuZ2V0KCdVTk1TJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQUxVTScsIGVhY2hMaW5lLmdldCgnQWx0ZXJuYXRlVU0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdDV1VOJywgZWFjaExpbmUuZ2V0KCdDV1VOJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTE5BTScsIGVhY2hMaW5lLmdldCgnTE5BTScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUFInLCBlYWNoTGluZS5nZXQoJ1ByaWNlUGVyUGllY2VTdGFuZGFyZFVNJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVRVCcsIGVhY2hMaW5lLmdldCgnUFVRVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUFInLCBlYWNoTGluZS5nZXQoJ0FsdGVybmF0aXZlUHJpY2UnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0dSTVQnLCBlYWNoTGluZS5nZXQoJ0dSTVQnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdMTU9EJywgZWFjaExpbmUuZ2V0KCdNT0RMJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTFRFRCcsIGVhY2hMaW5lLmdldCgnVEVETCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xURUwnLCBlYWNoTGluZS5nZXQoJ1RFTDEnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdMUFNMJywgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTFBTVCcsIGVhY2hMaW5lLmdldCgnUFVTVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BPUE4nLCBlYWNoTGluZS5nZXQoJ1BPUE5fRUExMycpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUkMnLCBlYWNoTGluZS5nZXQoJ1JPUkMnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdST1JOJywgZWFjaExpbmUuZ2V0KCdST1JOJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUk9STCcsIGVhY2hMaW5lLmdldCgnUk9STCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUlgnLCBlYWNoTGluZS5nZXQoJ1JPUlgnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdTVURPJywgZWFjaExpbmUuZ2V0KCdTVURPJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRlJSQycsIGVhY2hMaW5lLmdldCgnRlJSQycpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0ZSUkUnLCBlYWNoTGluZS5nZXQoJ0ZSUkUnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdBRFFBJywgZWFjaExpbmUuZ2V0KCdBRFFBJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnT1JRVCcsIGVhY2hMaW5lLmdldCgnT1JRVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1AnLCBlYWNoTGluZS5nZXQoJ0Ftb3VudE9wZW4nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdBTU9SJywgZWFjaExpbmUuZ2V0KCdMTkFNJykudG9TdHJpbmcoKSk7DQoNCiAgICAgIGlmIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkgPT0gMCkgew0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIGVhY2hMaW5lLmdldCgnUHJpY2VQZXJQaWVjZVN0YW5kYXJkVU0nKS50b1N0cmluZygpKTsNCiAgICAgIH0NCg0KICAgICAgaWYgKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSAhPSAwICYmIERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NGRDEnKS50b1N0cmluZygpKSAhPSAwKSB7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSAtICgoKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NGRDEnKS50b1N0cmluZygpKSkgLyAxMDApICogKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSkpKS50b1N0cmluZygpKTsNCg0KICAgICAgfQ0KDQogICAgICBpZiAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ1BQUicpLnRvU3RyaW5nKCkpICE9IDAgJiYgRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ0ZEMicpLnRvU3RyaW5nKCkpICE9IDApIHsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ1BQUicpLnRvU3RyaW5nKCkpIC0gKCgoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ0ZEMicpLnRvU3RyaW5nKCkpKSAvIDEwMCkgKiAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ1BQUicpLnRvU3RyaW5nKCkpKSkpLnRvU3RyaW5nKCkpOw0KDQogICAgICB9DQoNCiAgICAgIGlmIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkgIT0gMCAmJiBEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDRkQzJykudG9TdHJpbmcoKSkgIT0gMCkgew0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkgLSAoKChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDRkQzJykudG9TdHJpbmcoKSkpIC8gMTAwKSAqIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkpKSkudG9TdHJpbmcoKSk7DQogICAgICB9DQoNCiAgICAgIGlmIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkgIT0gMCAmJiAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ0ZEMScpLnRvU3RyaW5nKCkpID09IDAgJiYgRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ0ZEMicpLnRvU3RyaW5nKCkpID09IDAgJiYgRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ0ZEMycpLnRvU3RyaW5nKCkpID09IDApKSB7DQoNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKTsNCiAgICAgIH0NCg0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBlYWNoTGluZS5nZXQoJ0FsdGVybmF0ZVVNJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIGVhY2hMaW5lLmdldCgnT3BlblF1YW50aXR5U3RhbmRhcmRVTScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUSVYnLCBlYWNoTGluZS5nZXQoJ0ludm9pY2VkUXVhbnRpdHlTdGFuZGFyZFVNJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIGVhY2hMaW5lLmdldCgnT3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVTScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUVRSVicsIGVhY2hMaW5lLmdldCgnUmVjZWl2ZWRRdWFudGl0eVN0YW5kYXJkVU0nKS50b1N0cmluZygpKTsNCg0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFUnLCBlYWNoTGluZS5nZXQoJ0FsdGVybmF0ZVVNJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQUxRTycsIGVhY2hMaW5lLmdldCgnQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdBTFRQJywgZWFjaExpbmUuZ2V0KCdBbHRlcm5hdGl2ZVByaWNlJykudG9TdHJpbmcoKSk7DQogICAgICBtaS53cml0ZSgpOw0KICAgIH0NCiAgfQ0KICAvKiByZXRyaXZlIGl0ZW0gYWxpYXMgdXNpbmcgTU1TMDI1TUkuR2V0QWxpYXMNCiAgICovDQogIHB1YmxpYyBnZXRJdGVtQWxpYXMoSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIElUTk8gPSBlYWNoTGluZS5nZXQoJ0lUTk8nKTsNCg0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZTsNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIFBPUE5fRUExMyA9IHJlc3VsdHMuZ2V0KCdQT1BOJyk7DQogICAgICB9DQoNCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICJBTFdUIjogIjAyIiwgIklUTk8iOiBJVE5PLCAiQUxXUSI6ICJFQTEzIl07DQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMDI1TUkiLCAiR2V0QWxpYXMiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCg0KICB9DQogIC8qIGdldCBwdXJjaGFzZSBvcmRlciBsaW5lIGRldGFpbHMgZnJvbSBNUExJTkUNCiAgICovDQogIHB1YmxpYyBnZXRNUExJTkVEZXRhaWxzKFN0cmluZyBlYWNoUFVOTywgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIFBOTEkgPSBlYWNoTGluZS5nZXQoJ1BOTEknKTsNCiAgICBTdHJpbmcgUE5MUyA9IGVhY2hMaW5lLmdldCgnUE5MUycpOw0KICAgIGlmIChQTkxJICE9IG51bGwgJiYgIVBOTEkudHJpbSgpLmVxdWFscygiIikpIFBOTEkgPSBTdHJpbmcuZm9ybWF0KCIlMDNkIiwgSW50ZWdlci5wYXJzZUludChQTkxJLnRyaW0oKSkpOw0KICAgIGlmIChQTkxTICE9IG51bGwgJiYgIVBOTFMudHJpbSgpLmVxdWFscygiIikpIFBOTFMgPSBTdHJpbmcuZm9ybWF0KCIlMDNkIiwgSW50ZWdlci5wYXJzZUludChQTkxTLnRyaW0oKSkpOw0KICAgIERCQWN0aW9uIHF1ZXJ5TVBMSU5FID0gZGF0YWJhc2UudGFibGUoIk1QTElORSIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiSUJDT05PIiwgIklCUFVOTyIsICJJQlBOTEkiLCAiSUJQTkxTIiwgIklCU1VETyIsICJJQkZSUkMiLCAiSUJGUlJFIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciByZWNvcmRNUExJTkUgPSBxdWVyeU1QTElORS5nZXRDb250YWluZXIoKTsNCiAgICByZWNvcmRNUExJTkUuc2V0KCJJQkNPTk8iLCBJbnRlZ2VyLnBhcnNlSW50KENPTk8udHJpbSgpKSk7DQogICAgcmVjb3JkTVBMSU5FLnNldCgiSUJQVU5PIiwgZWFjaFBVTk8udHJpbSgpKTsNCiAgICByZWNvcmRNUExJTkUuc2V0KCJJQlBOTEkiLCBQTkxJLnRyaW0oKS50b0ludGVnZXIoKSk7DQogICAgcmVjb3JkTVBMSU5FLnNldCgiSUJQTkxTIiwgUE5MUy50cmltKCkudG9JbnRlZ2VyKCkpOw0KICAgIHF1ZXJ5TVBMSU5FLnJlYWQocmVjb3JkTVBMSU5FKTsNCg0KICAgIGVhY2hMaW5lLnB1dCgnU1VETycsIHJlY29yZE1QTElORS5nZXQoJ0lCU1VETycpLnRvU3RyaW5nKCkpOw0KICAgIGVhY2hMaW5lLnB1dCgnRlJSQycsIHJlY29yZE1QTElORS5nZXQoJ0lCRlJSQycpLnRvU3RyaW5nKCkpOw0KICAgIGVhY2hMaW5lLnB1dCgnRlJSRScsIHJlY29yZE1QTElORS5nZXQoJ0lCRlJSRScpLnRvU3RyaW5nKCkpOw0KDQogIH0NCg0KICBwdWJsaWMgdXNlQ1BQUklmQXZhaWxhYmxlKEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIFN0cmluZyBQVVBSID0gZWFjaExpbmUuZ2V0KCdQVVBSJyk7DQogICAgU3RyaW5nIENQUFIgPSBlYWNoTGluZS5nZXQoJ0NQUFInKTsNCg0KICAgIERvdWJsZSBkUFVQUiA9IDAuMGQ7DQoNCiAgICBpZiAoUFVQUiAhPSBudWxsICYmICFQVVBSLnRyaW0oKS5lcXVhbHMoIiIpKQ0KICAgICAgZFBVUFIgPSBEb3VibGUucGFyc2VEb3VibGUoUFVQUi50cmltKCkpOw0KICAgIGlmIChDUFBSICE9IG51bGwgJiYgIUNQUFIudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkQ1BQUiA9IERvdWJsZS5wYXJzZURvdWJsZShDUFBSLnRyaW0oKSk7DQoNCiAgICBpZiAoZENQUFIgPj0gMC4wMDAwMDApDQogICAgICBlYWNoTGluZS5yZXBsYWNlKCdQVVBSJywgJ0NQUFInKTsNCiAgfQ0KDQogIC8qIGNoZWNrIFBPIG9yZGVyIHByaWNlIGFuZCBCYXNpYyB1bml0IG9mIG1lYXN1cmVtZW50DQogICAqLw0KICBwdWJsaWMgY2hlY2tPcmRlclByaWNlQW5kQmFzZVVuaXRzKEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIFN0cmluZyBVTk1TID0gZWFjaExpbmUuZ2V0KCdVTk1TJyk7DQogICAgU3RyaW5nIENXVU4gPSBlYWNoTGluZS5nZXQoJ0NXVU4nKTsNCiAgICBTdHJpbmcgUFVVTiA9IGVhY2hMaW5lLmdldCgnUFVVTicpOw0KICAgIFN0cmluZyBJVlFBID0gZWFjaExpbmUuZ2V0KCdJVlFBJyk7DQogICAgU3RyaW5nIFBQVU4gPSBlYWNoTGluZS5nZXQoJ1BQVU4nKTsNCiAgICBTdHJpbmcgT1JRQSA9IGVhY2hMaW5lLmdldCgnT1JRQScpOw0KICAgIFN0cmluZyBSVlFBID0gZWFjaExpbmUuZ2V0KCdSVlFBJyk7DQogICAgU3RyaW5nIFJWUVQgPSBlYWNoTGluZS5nZXQoJ1JWUVQnKTsNCg0KICAgIFN0cmluZyBPUlFUID0gZWFjaExpbmUuZ2V0KCdPUlFUJyk7DQogICAgU3RyaW5nIExOQU0gPSBlYWNoTGluZS5nZXQoJ0xOQU0nKTsNCiAgICBTdHJpbmcgQVVUUCA9IGVhY2hMaW5lLmdldCgnQVVUUCcpOw0KICAgIFN0cmluZyBTdGFuZGFyZFVNID0gIiI7DQogICAgU3RyaW5nIEFsdGVybmF0ZVVNID0gIiI7DQoNCiAgICBJVlFUID0gSVZRQTsNCg0KICAgIE9yZGVyVU1fRENDRCA9IEJhc2ljVU1fRENDRCA9PSBudWxsID8gIjAiIDogQmFzaWNVTV9EQ0NELnRyaW0oKTsNCiAgICBPcmRlclVNX0RNQ0YgPSAiMSI7DQogICAgT3JkZXJVTV9DT0ZBID0gIjEiOw0KICAgIGRvdWJsZSBkYmxPUlFBID0gRG91YmxlLnBhcnNlRG91YmxlKE9SUUEpOw0KICAgIGRvdWJsZSBkYmxJVlFBID0gRG91YmxlLnBhcnNlRG91YmxlKElWUUEpOw0KICAgIGRvdWJsZSB2YWx1ZSA9IGRibE9SUUEgLSBkYmxJVlFBOw0KICAgIE9wZW5RdWFudGl0eVByaWNlVU0gPSBuZXcgQmlnRGVjaW1hbChTdHJpbmcudmFsdWVPZih2YWx1ZSkpLnNldFNjYWxlKDQsIEJpZ0RlY2ltYWwuUk9VTkRfRkxPT1IpLnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgIEJpZ0RlY2ltYWwgaW52b2ljZWRRdWFudGl0eSA9IG5ldyBCaWdEZWNpbWFsKElWUUEpOw0KICAgIEJpZ0RlY2ltYWwgY29udmVyc2lvbkZhY3RvciA9IG5ldyBCaWdEZWNpbWFsKE9yZGVyVU1fQ09GQSk7DQoNCiAgICBJVlFUID0gaW52b2ljZWRRdWFudGl0eTsNCg0KICAgIE9yZGVyZWRRdWFudGl0eVByaWNlVU0gPSBPUlFUOw0KICAgIFJlY2VpdmVkUXVhbnRpdHlQcmljZVVNID0gUlZRVDsNCiAgICBJbnZvaWNlZFF1YW50aXR5UHJpY2VVTSA9IElWUVQ7DQoNCiAgICBkb3VibGUgZGJsT1JRVCA9IERvdWJsZS5wYXJzZURvdWJsZShPUlFUKTsNCiAgICBkb3VibGUgZGJsSVZRVCA9IERvdWJsZS5wYXJzZURvdWJsZShJVlFUKTsNCiAgICBkb3VibGUgdmFsdWUyID0gZGJsT1JRVCAtIGRibElWUVQ7DQogICAgT3BlblF1YW50aXR5UHJpY2VVTSA9IG5ldyBCaWdEZWNpbWFsKFN0cmluZy52YWx1ZU9mKHZhbHVlMikpLnNldFNjYWxlKDQsIEJpZ0RlY2ltYWwuUk9VTkRfRkxPT1IpLnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgIFByaWNlVU1fRENDRCA9IEJhc2ljVU1fRENDRCA9PSBudWxsID8gIjAiIDogQmFzaWNVTV9EQ0NELnRyaW0oKTsNCiAgICBQcmljZVVNX0RNQ0YgPSAiMSI7DQogICAgUHJpY2VVTV9DT0ZBID0gIjEiOw0KDQogICAgDQogICAgZG91YmxlIGRibE9SUUFfYSA9IERvdWJsZS5wYXJzZURvdWJsZShPUlFBKTsNCiAgICBkb3VibGUgZGJsUlZRQSA9IERvdWJsZS5wYXJzZURvdWJsZShSVlFBKTsNCiAgICBkb3VibGUgZGJsSVZRQV9hID0gRG91YmxlLnBhcnNlRG91YmxlKElWUUEpOw0KICAgIGludCBpbnREQ0NEID0gSW50ZWdlci52YWx1ZU9mKE9yZGVyVU1fRENDRCk7DQogICAgZG91YmxlIHZhbHVlMSA9IGRibFJWUUEgLSBkYmxJVlFBX2E7DQogICAgT3BlblF1YW50aXR5T3JkZXJVTSA9IG5ldyBCaWdEZWNpbWFsKFN0cmluZy52YWx1ZU9mKHZhbHVlMSkpLnNldFNjYWxlKGludERDQ0QsIEJpZ0RlY2ltYWwuUk9VTkRfRkxPT1IpLnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgIA0KICAgIE9wZW5RdWFudGl0eU9yZGVyVU0gPSBPcGVuUXVhbnRpdHlPcmRlclVNID09IG51bGwgPyAiIiA6IE9wZW5RdWFudGl0eU9yZGVyVU0udHJpbSgpOw0KICAgIExOQU0gPSBMTkFNID09IG51bGwgPyAiIiA6IExOQU0udHJpbSgpOw0KICAgIE9yZGVyZWRRdWFudGl0eVByaWNlVU0gPSBPcmRlcmVkUXVhbnRpdHlQcmljZVVNID09IG51bGwgPyAiIiA6IE9yZGVyZWRRdWFudGl0eVByaWNlVU0udHJpbSgpOw0KICAgIE9SUUEgPSBPUlFBID09IG51bGwgPyAiIiA6IE9SUUEudHJpbSgpOw0KDQogICAgQmlnRGVjaW1hbCBvcGVuUXVhbnRpdHlPcmRlclVNOw0KDQogICAgaWYgKE9wZW5RdWFudGl0eU9yZGVyVU0uZXF1YWxzKCIiKSkgew0KICAgICAgb3BlblF1YW50aXR5T3JkZXJVTSA9IG5ldyBCaWdEZWNpbWFsKCIwIik7DQogICAgfSBlbHNlIHsNCiAgICAgIG9wZW5RdWFudGl0eU9yZGVyVU0gPSBuZXcgQmlnRGVjaW1hbChPcGVuUXVhbnRpdHlPcmRlclVNKTsNCiAgICB9DQoNCiAgICBCaWdEZWNpbWFsIG5ldHRMaW5lQW1vdW50Ow0KDQogICAgaWYgKExOQU0uZXF1YWxzKCIiKSkgew0KICAgICAgbmV0dExpbmVBbW91bnQgPSBuZXcgQmlnRGVjaW1hbCgiMC4wIik7DQogICAgfSBlbHNlIHsNCiAgICAgIG5ldHRMaW5lQW1vdW50ID0gbmV3IEJpZ0RlY2ltYWwoTE5BTSk7DQogICAgfQ0KDQogICAgQmlnRGVjaW1hbCBvcmRlcmVkUXVhbnRpdHlQcmljZVVNOw0KDQogICAgaWYgKE9yZGVyZWRRdWFudGl0eVByaWNlVU0uZXF1YWxzKCIiKSkgew0KICAgICAgb3JkZXJlZFF1YW50aXR5UHJpY2VVTSA9IG5ldyBCaWdEZWNpbWFsKCIwIik7DQogICAgfSBlbHNlIHsNCiAgICAgIG9yZGVyZWRRdWFudGl0eVByaWNlVU0gPSBuZXcgQmlnRGVjaW1hbChPcmRlcmVkUXVhbnRpdHlQcmljZVVNKTsNCiAgICB9DQoNCiAgICBCaWdEZWNpbWFsIG9yZGVyZWRRdWFudGl0eTsNCg0KICAgIGlmIChPUlFBLmVxdWFscygiIikpIHsNCiAgICAgIG9yZGVyZWRRdWFudGl0eSA9IG5ldyBCaWdEZWNpbWFsKCIwIik7DQogICAgfSBlbHNlIHsNCiAgICAgIG9yZGVyZWRRdWFudGl0eSA9IG5ldyBCaWdEZWNpbWFsKE9SUUEpOw0KICAgIH0NCg0KICAgIEJpZ0RlY2ltYWwgcHJpY2VQZXJQaWVjZU9yZGVyVU07DQogICAgaWYgKG5ldHRMaW5lQW1vdW50LmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pID09IDAgfHwgb3JkZXJlZFF1YW50aXR5LmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pID09IDApIHsNCiAgICAgIHByaWNlUGVyUGllY2VPcmRlclVNID0gbmV3IEJpZ0RlY2ltYWwoIjAuMCIpOw0KICAgICAgcHJpY2VwZXJQaWVjZU9VTSA9IHByaWNlUGVyUGllY2VPcmRlclVNOw0KDQogICAgfSBlbHNlIHsNCiAgICAgIHByaWNlUGVyUGllY2VPcmRlclVNID0gbmV0dExpbmVBbW91bnQuZGl2aWRlKG9yZGVyZWRRdWFudGl0eSwgbnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApOw0KICAgICAgcHJpY2VwZXJQaWVjZU9VTSA9IHByaWNlUGVyUGllY2VPcmRlclVNOw0KDQogICAgfQ0KDQogICAgQmlnRGVjaW1hbCBwcmljZVBlclBpZWNlUHJpY2VVTTsNCg0KICAgIGlmIChvcmRlcmVkUXVhbnRpdHkuY29tcGFyZVRvKEJpZ0RlY2ltYWwuWkVSTykgPT0gMCB8fCBvcmRlcmVkUXVhbnRpdHlQcmljZVVNLmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pID09IDApIHsNCiAgICAgIHByaWNlUGVyUGllY2VQcmljZVVNID0gbmV3IEJpZ0RlY2ltYWwoIjAuMCIpOw0KICAgIH0gZWxzZSB7DQogICAgICBwcmljZVBlclBpZWNlUHJpY2VVTSA9IG9yZGVyZWRRdWFudGl0eS5kaXZpZGUob3JkZXJlZFF1YW50aXR5UHJpY2VVTSwgMTIsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS5tdWx0aXBseShwcmljZVBlclBpZWNlT3JkZXJVTSk7DQoNCiAgICB9DQoNCiAgICBBbW91bnRPcGVuID0gb3BlblF1YW50aXR5T3JkZXJVTS5tdWx0aXBseShwcmljZVBlclBpZWNlT3JkZXJVTSkuc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgIFByaWNlUGVyUGllY2VQcmljZVVNID0gcHJpY2VQZXJQaWVjZVByaWNlVU0uc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICBQcmljZVBlclBpZWNlT3JkZXJVTSA9IHByaWNlUGVyUGllY2VPcmRlclVNLnNldFNjYWxlKG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQoNCiAgICBpZiAocHJpY2VVbml0U3RhbmRhcmQudHJpbSgpLmVxdWFscygiMSIpKSB7DQogICAgICBTdGFuZGFyZFVNID0gUFBVTi50cmltKCk7DQogICAgICBBbHRlcm5hdGVVTSA9IFBVVU4udHJpbSgpOw0KICAgICAgUHJpY2VQZXJQaWVjZVN0YW5kYXJkVU0gPSBQcmljZVBlclBpZWNlUHJpY2VVTSA9PSBudWxsID8gIiIgOiBQcmljZVBlclBpZWNlUHJpY2VVTS50cmltKCk7DQogICAgICBPcGVuUXVhbnRpdHlTdGFuZGFyZFVNID0gT3BlblF1YW50aXR5UHJpY2VVTSA9PSBudWxsID8gIiIgOiBPcGVuUXVhbnRpdHlQcmljZVVNLnRyaW0oKTsNCiAgICAgIEludm9pY2VkUXVhbnRpdHlTdGFuZGFyZFVNID0gSW52b2ljZWRRdWFudGl0eVByaWNlVU0gPT0gbnVsbCA/ICIiIDogSW52b2ljZWRRdWFudGl0eVByaWNlVU0udHJpbSgpOw0KICAgICAgT3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVTSA9IE9yZGVyZWRRdWFudGl0eVByaWNlVU0gPT0gbnVsbCA/ICIiIDogT3JkZXJlZFF1YW50aXR5UHJpY2VVTS50cmltKCk7DQogICAgICBSZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVTSA9IFJlY2VpdmVkUXVhbnRpdHlQcmljZVVNID09IG51bGwgPyAiIiA6IFJlY2VpdmVkUXVhbnRpdHlQcmljZVVNLnRyaW0oKTsNCg0KICAgICAgQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4gPSBPcGVuUXVhbnRpdHlPcmRlclVNOw0KICAgICAgQWx0ZXJuYXRpdmVQcmljZSA9IFByaWNlUGVyUGllY2VPcmRlclVNOw0KDQogICAgfSBlbHNlIHsNCiAgICAgIFN0YW5kYXJkVU0gPSBQVVVOLnRyaW0oKTsNCiAgICAgIEFsdGVybmF0ZVVNID0gUFBVTi50cmltKCk7DQogICAgICBQcmljZVBlclBpZWNlU3RhbmRhcmRVTSA9IFByaWNlUGVyUGllY2VQcmljZVVNID09IG51bGwgPyAiIiA6IFByaWNlUGVyUGllY2VQcmljZVVNLnRyaW0oKTsNCiAgICAgIE9wZW5RdWFudGl0eVN0YW5kYXJkVU0gPSBPcGVuUXVhbnRpdHlQcmljZVVNID09IG51bGwgPyAiIiA6IE9wZW5RdWFudGl0eVByaWNlVU0udHJpbSgpOw0KICAgICAgSW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVU0gPSBJVlFBID09IG51bGwgPyAiIiA6IElWUUEudHJpbSgpOw0KICAgICAgT3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVTSA9IE9SUUEgPT0gbnVsbCA/ICIiIDogT1JRQS50cmltKCk7DQogICAgICBSZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVTSA9IFJWUUEgPT0gbnVsbCA/ICIiIDogUlZRQS50cmltKCk7DQoNCiAgICAgIEFsdGVybmF0aXZlUXVhbnRpdHlPcGVuID0gT3BlblF1YW50aXR5UHJpY2VVTTsNCiAgICAgIEFsdGVybmF0aXZlUHJpY2UgPSBQcmljZVBlclBpZWNlUHJpY2VVTTsNCiAgICB9DQogICAgZWFjaExpbmUucHV0KCdBbW91bnRPcGVuJywgQW1vdW50T3Blbik7DQogICAgZWFjaExpbmUucHV0KCdQcmljZVBlclBpZWNlU3RhbmRhcmRVTScsIFByaWNlUGVyUGllY2VTdGFuZGFyZFVNKTsNCiAgICBlYWNoTGluZS5wdXQoJ1N0YW5kYXJkVU0nLCBTdGFuZGFyZFVNKTsNCiAgICBlYWNoTGluZS5wdXQoJ09wZW5RdWFudGl0eVN0YW5kYXJkVU0nLCBPcGVuUXVhbnRpdHlTdGFuZGFyZFVNKTsNCiAgICBlYWNoTGluZS5wdXQoJ0ludm9pY2VkUXVhbnRpdHlTdGFuZGFyZFVNJywgSW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVU0pOw0KICAgIGVhY2hMaW5lLnB1dCgnT3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVTScsIE9yZGVyZWRRdWFudGl0eVN0YW5kYXJkVU0pOw0KICAgIGVhY2hMaW5lLnB1dCgnUmVjZWl2ZWRRdWFudGl0eVN0YW5kYXJkVU0nLCBSZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVTSk7DQogICAgZWFjaExpbmUucHV0KCdBbHRlcm5hdGVVTScsIEFsdGVybmF0ZVVNKTsNCiAgICBlYWNoTGluZS5wdXQoJ0FsdGVybmF0aXZlUXVhbnRpdHlPcGVuJywgQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4pOw0KICAgIGVhY2hMaW5lLnB1dCgnQWx0ZXJuYXRpdmVQcmljZScsIEFsdGVybmF0aXZlUHJpY2UpOw0KICAgIGVhY2hMaW5lLnB1dCgnT3BlblF1YW50aXR5UHJpY2VVTScsIE9wZW5RdWFudGl0eVByaWNlVU0pOw0KICAgIGVhY2hMaW5lLnB1dCgnUE9QTl9FQTEzJywgUE9QTl9FQTEzKTsNCiAgfQ0KDQogIC8qIGdldCBQTyBsaW5lIHJlY2VpcHQgZGV0YWlscyBmcm9tIHRhYmxlIEZHUkVDTA0KICAgKi8NCg0KICBwdWJsaWMgZ2V0TGluZVJlY2VpcHRzKFN0cmluZyBlYWNoUFVOTywgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgbGluZVJlY2VpcHRMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgIERCQWN0aW9uIHF1ZXJ5RkdSRUNMID0gZGF0YWJhc2UudGFibGUoIkZHUkVDTCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiRjJDT05PIiwgIkYyRElWSSIsICJGMlBVTk8iLCAiRjJQTkxJIiwgIkYyUE5MUyIsICJGMlJFUE4iLCAiRjJSRUxQIiwgIkYyUlBRVCIsICJGMklWUVQiLCAiRjJSUFFBIiwgIkYySVZRQSIsICJGMkNBV0UiLCAiRjJJVkNXIiwgIkYyUkNBQyIsICJGMklDQUMiLCAiRjJTQ09QIiwgIkYyU0NPQyIsICJGMklNU1QiLCAiRjJUUkRUIiwgIkYyU0VSQSIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgcmVjb3JkRkdSRUNMID0gcXVlcnlGR1JFQ0wuZ2V0Q29udGFpbmVyKCk7DQogICAgcmVjb3JkRkdSRUNMLnNldCgiRjJDT05PIiwgSW50ZWdlci5wYXJzZUludChDT05PLnRyaW0oKSkpOw0KICAgIHJlY29yZEZHUkVDTC5zZXQoIkYyRElWSSIsIG9ESVZJLnRyaW0oKSk7DQogICAgcmVjb3JkRkdSRUNMLnNldCgiRjJQVU5PIiwgZWFjaFBVTk8udHJpbSgpKTsNCiAgICByZWNvcmRGR1JFQ0wuc2V0KCJGMlBOTEkiLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpLnRvSW50ZWdlcigpKTsNCiAgICByZWNvcmRGR1JFQ0wuc2V0KCJGMlBOTFMiLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpLnRvSW50ZWdlcigpKTsNCiAgICANCiAgICBpbnQgcmVhZHMgPSBxdWVyeUZHUkVDTC5yZWFkQWxsKHJlY29yZEZHUkVDTCwgNSwgZ2V0RkdSRUNMUmVjb3Jkcyk7DQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IGdldEZHUkVDTFJlY29yZHMgPSB7DQogICAgREJDb250YWluZXIgcmVjb3JkIC0+DQogICAgU3RyaW5nIEYyUkVQTiA9IHJlY29yZC5nZXQoJ0YyUkVQTicpOw0KICAgIFN0cmluZyBGMlJFTFAgPSByZWNvcmQuZ2V0KCdGMlJFTFAnKTsNCiAgICBTdHJpbmcgRjJSUFFUID0gcmVjb3JkLmdldCgnRjJSUFFUJyk7DQogICAgU3RyaW5nIEYySVZRVCA9IHJlY29yZC5nZXQoJ0YySVZRVCcpOw0KICAgIFN0cmluZyBGMlJQUUEgPSByZWNvcmQuZ2V0KCdGMlJQUUEnKTsNCiAgICBTdHJpbmcgRjJJVlFBID0gcmVjb3JkLmdldCgnRjJJVlFBJyk7DQogICAgU3RyaW5nIEYyQ0FXRSA9IHJlY29yZC5nZXQoJ0YyQ0FXRScpOw0KICAgIFN0cmluZyBGMklWQ1cgPSByZWNvcmQuZ2V0KCdGMklWQ1cnKTsNCiAgICBTdHJpbmcgRjJSQ0FDID0gcmVjb3JkLmdldCgnRjJSQ0FDJyk7DQogICAgU3RyaW5nIEYySUNBQyA9IHJlY29yZC5nZXQoJ0YySUNBQycpOw0KICAgIFN0cmluZyBGMlNDT1AgPSByZWNvcmQuZ2V0KCdGMlNDT1AnKTsNCiAgICBTdHJpbmcgRjJTQ09DID0gcmVjb3JkLmdldCgnRjJTQ09DJyk7DQogICAgU3RyaW5nIEYySU1TVCA9IHJlY29yZC5nZXQoJ0YySU1TVCcpOw0KICAgIFN0cmluZyBGMlRSRFQgPSByZWNvcmQuZ2V0KCdGMlRSRFQnKTsNCiAgICBTdHJpbmcgRjJTRVJBID0gcmVjb3JkLmdldCgnRjJTRVJBJyk7DQogICAgSGFzaHRhYmxlIHRlbXBUYWJsZSA9IG5ldyBIYXNodGFibGUgPCBTdHJpbmcsDQogICAgU3RyaW5nID4gKCk7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJSRVBOJywgRjJSRVBOKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMlJFTFAnLCBGMlJFTFApOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YyUlBRVCcsIEYyUlBRVCk7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJJVlFUJywgRjJJVlFUKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMlJQUUEnLCBGMlJQUUEpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YySVZRQScsIEYySVZRQSk7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJDQVdFJywgRjJDQVdFKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMklWQ1cnLCBGMklWQ1cpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YyUkNBQycsIEYyUkNBQyk7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJJQ0FDJywgRjJJQ0FDKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMlNDT1AnLCBGMlNDT1ApOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YyU0NPQycsIEYyU0NPQyk7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJJTVNUJywgRjJJTVNUKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMlRSRFQnLCBGMlRSRFQpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YyU0VSQScsIEYyU0VSQSk7DQogICAgbGluZVJlY2VpcHRMaXN0LmFkZCh0ZW1wVGFibGUpOw0KDQogIH0NCiAgLyogY2FsY3VsYXRlIFBPIGxpbmUgcmVjZWlwdCBxdWFudGl0aWVzDQogICAqLw0KICBwdWJsaWMgY2FsY3VsYXRlUmVjZWlwdFF1YW50aXRpZXMoSGFzaHRhYmxlIGVhY2hMaW5lUmVjZWlwdCwgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIFBQVU4gPSBlYWNoTGluZS5nZXQoJ1BQVU4nKTsNCiAgICBTdHJpbmcgUFVVTiA9IGVhY2hMaW5lLmdldCgnUFVVTicpOw0KICAgIFN0cmluZyBVTk1TID0gZWFjaExpbmUuZ2V0KCdVTk1TJyk7DQogICAgU3RyaW5nIENXVU4gPSBlYWNoTGluZS5nZXQoJ0NXVU4nKTsNCg0KICAgIFN0cmluZyBGMlJFUE4gPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJFUE4nKTsNCiAgICBTdHJpbmcgRjJSRUxQID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSRUxQJyk7DQogICAgU3RyaW5nIEYyUlBRVCA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUlBRVCcpOw0KICAgIFJlY2VpcHRRdWFudGl0eSA9IEYyUlBRVDsNCg0KICAgIFN0cmluZyBGMklWUVQgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMklWUVQnKTsNCiAgICBTdHJpbmcgRjJSUFFBID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSUFFBJyk7DQogICAgU3RyaW5nIEYySVZRQSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YySVZRQScpOw0KICAgIFN0cmluZyBGMkNBV0UgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMkNBV0UnKTsNCiAgICBTdHJpbmcgRjJJVkNXID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJJVkNXJyk7DQogICAgU3RyaW5nIEYyUkNBQyA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUkNBQycpOw0KICAgIFN0cmluZyBGMklDQUMgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMklDQUMnKTsNCiAgICBTdHJpbmcgRjJTQ09QID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJTQ09QJyk7DQogICAgU3RyaW5nIEYyU0NPQyA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyU0NPQycpOw0KICAgIFN0cmluZyBGMklNU1QgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMklNU1QnKTsNCiAgICBTdHJpbmcgRjJUUkRUID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJUUkRUJyk7DQogICAgU3RyaW5nIEYyU0VSQSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyU0VSQScpOw0KDQogICAgUFBVTiA9IFBQVU4gPT0gbnVsbCA/ICIiIDogUFBVTi50cmltKCk7DQogICAgUFVVTiA9IFBVVU4gPT0gbnVsbCA/ICIiIDogUFVVTi50cmltKCk7DQogICAgVU5NUyA9IFVOTVMgPT0gbnVsbCA/ICIiIDogVU5NUy50cmltKCk7DQogICAgQ1dVTiA9IENXVU4gPT0gbnVsbCA/ICIiIDogQ1dVTi50cmltKCk7DQogICAgUHJpY2VVTV9DT0ZBID0gUHJpY2VVTV9DT0ZBID09IG51bGwgPyAiMSIgOiBQcmljZVVNX0NPRkEudHJpbSgpOw0KICAgIFByaWNlVU1fRE1DRiA9IFByaWNlVU1fRE1DRiA9PSBudWxsID8gIjEiIDogUHJpY2VVTV9ETUNGLnRyaW0oKTsNCg0KICAgIFN0cmluZyBSZWNlaXZlZFF1YW50aXR5QWx0VU0gPSAiIjsNCiAgICBTdHJpbmcgT3BlblF1YW50aXR5T3JkZXJVTSA9ICIiOw0KICAgIFN0cmluZyBPcGVuQ2F0Y2hXZWlnaHQgPSAiIjsNCiAgICBTdHJpbmcgT3BlblF1YW50aXR5UHVyY2hhc2VPcmRlclByaWNlVU0gPSAiIjsNCg0KICAgIFN0cmluZyBPcGVuQW1vdW50T3JkZXJVTSA9ICIiOw0KICAgIFN0cmluZyBSZWNlaXZlZFF1YW50aXR5ID0gIiI7DQoNCiAgICBCaWdEZWNpbWFsIGRGMlJQUVQgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKTsNCiAgICBCaWdEZWNpbWFsIGRGMklWUVQgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKTsNCiAgICBCaWdEZWNpbWFsIGRGMlJQUUEgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKTsNCiAgICBCaWdEZWNpbWFsIGRGMklWUUEgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKTsNCiAgICBCaWdEZWNpbWFsIGRGMkNBV0UgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKTsNCiAgICBCaWdEZWNpbWFsIGRGMklWQ1cgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKTsNCiAgICBCaWdEZWNpbWFsIGRGMlJDQUMgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKTsNCiAgICBCaWdEZWNpbWFsIGRGMklDQUMgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKTsNCiAgICBCaWdEZWNpbWFsIGRGMlNDT1AgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKTsNCiAgICBCaWdEZWNpbWFsIGRGMlNDT0MgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKTsNCiAgICBCaWdEZWNpbWFsIGRGMlNFUkEgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKTsNCg0KICAgIEJpZ0RlY2ltYWwgZENPRkEgPSBuZXcgQmlnRGVjaW1hbChQcmljZVVNX0NPRkEpOw0KDQogICAgaW50IGludE9yZGVyVU1fRENDRCA9IG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCk7DQogICAgaW50IGludFByaWNlVU1fRENDRCA9IG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCk7DQogICAgaW50IGludEJhc2ljVU1fRENDRCA9IG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCk7DQoNCiAgICBpZiAoRjJDQVdFICE9IG51bGwgJiYgIUYyQ0FXRS50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGMkNBV0UgPSBuZXcgQmlnRGVjaW1hbChGMkNBV0UudHJpbSgpKTsNCiAgICBpZiAoRjJSUFFUICE9IG51bGwgJiYgIUYyUlBRVC50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGMlJQUVQgPSBuZXcgQmlnRGVjaW1hbChGMlJQUVQudHJpbSgpKTsNCiAgICBpZiAoRjJJVlFUICE9IG51bGwgJiYgIUYySVZRVC50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGMklWUVQgPSBuZXcgQmlnRGVjaW1hbChGMklWUVQudHJpbSgpKTsNCiAgICBpZiAoRjJSUFFBICE9IG51bGwgJiYgIUYyUlBRQS50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGMlJQUUEgPSBuZXcgQmlnRGVjaW1hbChGMlJQUUEudHJpbSgpKTsNCiAgICBpZiAoRjJJVlFBICE9IG51bGwgJiYgIUYySVZRQS50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGMklWUUEgPSBuZXcgQmlnRGVjaW1hbChGMklWUUEudHJpbSgpKTsNCiAgICBpZiAoRjJJVkNXICE9IG51bGwgJiYgIUYySVZDVy50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGMklWQ1cgPSBuZXcgQmlnRGVjaW1hbChGMklWQ1cudHJpbSgpKTsNCiAgICBpZiAoRjJSQ0FDICE9IG51bGwgJiYgIUYyUkNBQy50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGMlJDQUMgPSBuZXcgQmlnRGVjaW1hbChGMlJDQUMudHJpbSgpKTsNCiAgICBpZiAoRjJJQ0FDICE9IG51bGwgJiYgIUYySUNBQy50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGMklDQUMgPSBuZXcgQmlnRGVjaW1hbChGMklDQUMudHJpbSgpKTsNCiAgICBpZiAoRjJTQ09QICE9IG51bGwgJiYgIUYyU0NPUC50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGMlNDT1AgPSBuZXcgQmlnRGVjaW1hbChGMlNDT1AudHJpbSgpKTsNCiAgICBpZiAoRjJTQ09DICE9IG51bGwgJiYgIUYyU0NPQy50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGMlNDT0MgPSBuZXcgQmlnRGVjaW1hbChGMlNDT0MudHJpbSgpKTsNCiAgICBpZiAoRjJTRVJBICE9IG51bGwgJiYgIUYyU0VSQS50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGMlNFUkEgPSBuZXcgQmlnRGVjaW1hbChGMlNFUkEudHJpbSgpKTsNCiAgICBpZiAoT3JkZXJVTV9EQ0NEICE9IG51bGwgJiYgIU9yZGVyVU1fRENDRC50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGludE9yZGVyVU1fRENDRCA9IEludGVnZXIudmFsdWVPZihPcmRlclVNX0RDQ0QudHJpbSgpKTsNCiAgICBpZiAoUHJpY2VVTV9EQ0NEICE9IG51bGwgJiYgIVByaWNlVU1fRENDRC50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGludFByaWNlVU1fRENDRCA9IEludGVnZXIudmFsdWVPZihQcmljZVVNX0RDQ0QudHJpbSgpKTsNCiAgICBpZiAoQmFzaWNVTV9EQ0NEICE9IG51bGwgJiYgIUJhc2ljVU1fRENDRC50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGludEJhc2ljVU1fRENDRCA9IEludGVnZXIudmFsdWVPZihCYXNpY1VNX0RDQ0QudHJpbSgpKTsNCg0KICAgIGlmIChkRjJDQVdFLmNvbXBhcmVUbyhuZXcgQmlnRGVjaW1hbCgwLjBkKSkgIT0gMCkgew0KDQogICAgICBPcGVuQ2F0Y2hXZWlnaHQgPSBkRjJDQVdFLnN1YnRyYWN0KGRGMklWQ1cpLnNldFNjYWxlKG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQoNCiAgICB9DQoNCiAgICBSZWNlaXZlZFF1YW50aXR5QWx0VU0gPSBkRjJSUFFBLnN1YnRyYWN0KGRGMklWUUEpLnNldFNjYWxlKGludE9yZGVyVU1fRENDRCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICBSZWNlaXZlZFF1YW50aXR5ID0gZEYyUlBRVC5zdWJ0cmFjdChkRjJJVlFUKS5zZXRTY2FsZShpbnRCYXNpY1VNX0RDQ0QsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgT3BlblF1YW50aXR5T3JkZXJVTSA9IGRGMlJQUUEuc3VidHJhY3QoZEYySVZRQSkuc2V0U2NhbGUoaW50QmFzaWNVTV9EQ0NELCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KDQogICAgQmlnRGVjaW1hbCBkT3BlbkFtb3VudExvY2FsQ3VycmVuY3kgPSBkRjJSQ0FDLnN1YnRyYWN0KGRGMklDQUMpOw0KICAgIE9wZW5BbW91bnRMb2NhbEN1cnJlbmN5ID0gZE9wZW5BbW91bnRMb2NhbEN1cnJlbmN5LnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgIGlmIChvRE1DVS5lcXVhbHMoIjEiKSkgew0KICAgICAgT3BlbkFtb3VudE9yZGVyVU0gPSBkT3BlbkFtb3VudExvY2FsQ3VycmVuY3kuZGl2aWRlKGRGMlNFUkEsIG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgfSBlbHNlIGlmIChvRE1DVS5lcXVhbHMoIjIiKSkgew0KICAgICAgT3BlbkFtb3VudE9yZGVyVU0gPSBkT3BlbkFtb3VudExvY2FsQ3VycmVuY3kubXVsdGlwbHkoZEYyU0VSQSkuc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICB9DQoNCiAgICBlYWNoTGluZVJlY2VpcHQucHV0KCdSZWNlaXZlZFF1YW50aXR5QWx0VU0nLCBSZWNlaXZlZFF1YW50aXR5QWx0VU0pOw0KICAgIGVhY2hMaW5lUmVjZWlwdC5wdXQoJ09wZW5RdWFudGl0eU9yZGVyVU0nLCBPcGVuUXVhbnRpdHlPcmRlclVNKTsNCiAgICBlYWNoTGluZVJlY2VpcHQucHV0KCdPcGVuQ2F0Y2hXZWlnaHQnLCBPcGVuQ2F0Y2hXZWlnaHQpOw0KICAgIGVhY2hMaW5lUmVjZWlwdC5wdXQoJ09wZW5RdWFudGl0eVB1cmNoYXNlT3JkZXJQcmljZVVNJywgT3BlblF1YW50aXR5UHVyY2hhc2VPcmRlclByaWNlVU0pOw0KICAgIGVhY2hMaW5lUmVjZWlwdC5wdXQoJ09wZW5BbW91bnRMb2NhbEN1cnJlbmN5JywgT3BlbkFtb3VudExvY2FsQ3VycmVuY3kpOw0KICAgIGVhY2hMaW5lUmVjZWlwdC5wdXQoJ09wZW5BbW91bnRPcmRlclVNJywgT3BlbkFtb3VudE9yZGVyVU0pOw0KICAgIGVhY2hMaW5lUmVjZWlwdC5wdXQoJ1JlY2VpdmVkUXVhbnRpdHknLCBSZWNlaXZlZFF1YW50aXR5KTsNCiAgfQ0KDQogIC8qIGNoZWNrIG9wZW4gcmVjZWlwdCBsaW5lDQogICAqLw0KICBwdWJsaWMgYm9vbGVhbiBpZk9wZW5SZWNlaXB0KEhhc2h0YWJsZSBlYWNoTGluZVJlY2VpcHQpIHsNCiAgICBvcGVuTGluZVJlY2VpcHRMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgIFN0cmluZyBpRjJJTVNUID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJJTVNUJyk7DQogICAgU3RyaW5nIGlPcGVuUXVhbnRpdHlPcmRlclVNID0gZWFjaExpbmVSZWNlaXB0LmdldCgnT3BlblF1YW50aXR5T3JkZXJVTScpOw0KICAgIGlGMklNU1QgPSBpRjJJTVNUID09IG51bGwgPyAiIiA6IGlGMklNU1QudHJpbSgpOw0KICAgIGlPcGVuUXVhbnRpdHlPcmRlclVNID0gaU9wZW5RdWFudGl0eU9yZGVyVU0gPT0gbnVsbCA/ICIiIDogaU9wZW5RdWFudGl0eU9yZGVyVU0udHJpbSgpOw0KICAgIGlPcGVuUXVhbnRpdHlPcmRlclVNID0gaU9wZW5RdWFudGl0eU9yZGVyVU0uZXF1YWxzKCIiKSA/ICIwIiA6IGlPcGVuUXVhbnRpdHlPcmRlclVNLnJlcGxhY2UoJywnLCAnLicpOw0KICAgIERvdWJsZSBkT3BlblF1YW50aXR5T3JkZXJVTSA9IERvdWJsZS5wYXJzZURvdWJsZShpT3BlblF1YW50aXR5T3JkZXJVTSk7DQoNCiAgICByZXR1cm4gKCFpRjJJTVNULmVxdWFscygiOSIpICYmIChEb3VibGUuY29tcGFyZShkT3BlblF1YW50aXR5T3JkZXJVTSwgMC4wMDAxZCkgPiAwIHx8IERvdWJsZS5jb21wYXJlKGRPcGVuUXVhbnRpdHlPcmRlclVNLCAtMC4wMDAxZCkgPCAwKSk7DQogIH0NCg0KICAvKiBzZW5kIFBPIGxpbmUgcmVjZWlwdCBkZXRhaWxzIHRvIG91dHB1dA0KICAgKi8NCiAgcHVibGljIHdyaXRlUmVjZWlwdHMoU3RyaW5nIGVhY2hQVU5PLCBIYXNodGFibGUgZWFjaE9wZW5MaW5lUmVjZWlwdCwgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgc3RhbmRhcmRVbml0TWVhc3VyZSA9IGVhY2hMaW5lLmdldCgnU3RhbmRhcmRVTScpLnRvU3RyaW5nKCk7DQogICAgdW5pdE1lYXN1cmUgPSBlYWNoTGluZS5nZXQoJ1VOTVMnKS50b1N0cmluZygpOw0KICAgIGFsdGVybmF0ZVVuaXRNZWFzdXJlID0gZWFjaExpbmUuZ2V0KCdBbHRlcm5hdGVVTScpLnRvU3RyaW5nKCk7DQogICAgU3RyaW5nIFJRQVVNID0gZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ1JlY2VpdmVkUXVhbnRpdHlBbHRVTScpOw0KICAgIFN0cmluZyBPQUxDID0gZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ09wZW5BbW91bnRMb2NhbEN1cnJlbmN5JykudG9TdHJpbmcoKTsNCiAgICBkb3VibGUgUlFBTSA9IERvdWJsZS5wYXJzZURvdWJsZShSUUFVTSk7DQogICAgU3RyaW5nIGNvbnZlcnRlZFByaWNlID0gIiI7DQogICAgDQogICAgaWYgKFJRQU0gIT0gMC4wKSB7DQogICAgICANCiAgICAgIGRvdWJsZSBjb252ZXJ0ZWQgPSBEb3VibGUucGFyc2VEb3VibGUoZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ09wZW5BbW91bnRPcmRlclVNJykudG9TdHJpbmcoKSkgLyBEb3VibGUucGFyc2VEb3VibGUoZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ1JlY2VpdmVkUXVhbnRpdHlBbHRVTScpLnRvU3RyaW5nKCkpOw0KICAgICAgDQogICAgICBEZWNpbWFsRm9ybWF0IGRmX29iaiA9IG5ldyBEZWNpbWFsRm9ybWF0KCIjLiMjIyMjIyIpOw0KICAgICAgY29udmVydGVkUHJpY2UgPSBkZl9vYmouZm9ybWF0KGNvbnZlcnRlZCk7DQogICAgfSBlbHNlIHsNCiAgICAgIA0KICAgICAgZG91YmxlIGNvbnZlcnRlZCA9IDAuMDAwMDAwOw0KICAgICAgRGVjaW1hbEZvcm1hdCBkZl9vYmogPSBuZXcgRGVjaW1hbEZvcm1hdCgiIy4jIyMjIyMiKTsNCiAgICAgIGNvbnZlcnRlZFByaWNlID0gZGZfb2JqLmZvcm1hdChjb252ZXJ0ZWQpOw0KICAgIH0NCiAgICBsb2dnZXIuaW5mbygicXR5aWZ6ZXJvIiArIGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdSZWNlaXZlZFF1YW50aXR5QWx0VU0nKS50b1N0cmluZygpKTsNCg0KICAgIGRvdWJsZSB2YWx1ZVJlY1F0eSA9IERvdWJsZS5wYXJzZURvdWJsZShlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnUmVjZWl2ZWRRdWFudGl0eUFsdFVNJykudG9TdHJpbmcoKSk7DQoNCiAgICBpZiAodmFsdWVSZWNRdHkgPiAwIHx8IHZhbHVlUmVjUXR5IDwgMCkgew0KICAgICAgaWYgKGVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkgPCAnODUnICYmICFvSUFQQy5lcXVhbHMoIjEiKSkgew0KICAgICAgICBsb2dnZXIuaW5mbygiaW5SZWNibG9jayIpDQoNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAnTFInKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVTk8nLCBlYWNoUFVOTyk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxJJywgZWFjaExpbmUuZ2V0KCdQTkxJJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdJVE5PJywgZWFjaExpbmUuZ2V0KCdJVE5PJykudG9TdHJpbmcoKSk7DQoNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1RSRFQnLCBlYWNoTGluZS5nZXQoJ1RSRFQnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xXSEwnLCBlYWNoTGluZS5nZXQoJ1dITE8nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBlYWNoTGluZS5nZXQoJ0lUTk8nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVEQnLCBlYWNoTGluZS5nZXQoJ1BJVEQnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVFQnLCBlYWNoTGluZS5nZXQoJ1BJVFQnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NJVEUnLCBlYWNoTGluZS5nZXQoJ1NJVEUnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NBUUEnLCBlYWNoTGluZS5nZXQoJ0NBUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JKUUEnLCBlYWNoTGluZS5nZXQoJ1JKUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NEUUEnLCBlYWNoTGluZS5nZXQoJ1NEUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09SUUEnLCBlYWNoTGluZS5nZXQoJ09SUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWUUEnLCBlYWNoTGluZS5nZXQoJ0lWUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JWUUEnLCBlYWNoTGluZS5nZXQoJ1JWUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NGUUEnLCBlYWNoTGluZS5nZXQoJ0NGUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09RUFUnLCBlYWNoTGluZS5nZXQoJ09wZW5RdWFudGl0eVByaWNlVU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUkMnLCBlYWNoTGluZS5nZXQoJ1BVUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xCVVknLCBlYWNoTGluZS5nZXQoJ0JVWUUnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NUVU0nLCBlYWNoTGluZS5nZXQoJ1N0YW5kYXJkVU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOTVMnLCBlYWNoTGluZS5nZXQoJ1VOTVMnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVU0nLCBlYWNoTGluZS5nZXQoJ0FsdGVybmF0ZVVNJykudG9TdHJpbmcoKSk7DQogICAgICAgIGlmIChlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnT3BlbkNhdGNoV2VpZ2h0JykudG9TdHJpbmcoKSAhPSAiIikgew0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDV1VOJywgZWFjaExpbmUuZ2V0KCdDV1VOJykudG9TdHJpbmcoKSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NXVU4nLCAiIik7DQogICAgICAgIH0NCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xOQU0nLCBlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUFInLCBlYWNoTGluZS5nZXQoJ1ByaWNlUGVyUGllY2VTdGFuZGFyZFVNJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQVVFUJywgZWFjaExpbmUuZ2V0KCdQVVFUJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdBTFBSJywgZWFjaExpbmUuZ2V0KCdBbHRlcm5hdGl2ZVByaWNlJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICAgIGlmIChlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpLmxlbmd0aCgpID09IDEpIHsNCg0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgJzAnICsgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICB9DQogICAgICAgIG1pLm91dERhdGEucHV0KCdHUk1UJywgZWFjaExpbmUuZ2V0KCdHUk1UJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdMTU9EJywgZWFjaExpbmUuZ2V0KCdNT0RMJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVEJywgZWFjaExpbmUuZ2V0KCdURURMJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVMJywgZWFjaExpbmUuZ2V0KCdURUwxJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNMJywgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNUJywgZWFjaExpbmUuZ2V0KCdQVVNUJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQT1BOJywgZWFjaExpbmUuZ2V0KCdQT1BOX0VBMTMnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUkMnLCBlYWNoTGluZS5nZXQoJ1JPUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUk4nLCBlYWNoTGluZS5nZXQoJ1JPUk4nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUkwnLCBlYWNoTGluZS5nZXQoJ1JPUkwnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUlgnLCBlYWNoTGluZS5nZXQoJ1JPUlgnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVRE8nLCBlYWNoTGluZS5nZXQoJ1NVRE8nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0ZSUkMnLCBlYWNoTGluZS5nZXQoJ0ZSUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0ZSUkUnLCBlYWNoTGluZS5nZXQoJ0ZSUkUnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FEUUEnLCBlYWNoTGluZS5nZXQoJ0FEUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09SUVQnLCBlYWNoTGluZS5nZXQoJ09SUVQnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1AnLCBlYWNoTGluZS5nZXQoJ0Ftb3VudE9wZW4nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1InLCBlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBjb252ZXJ0ZWRQcmljZSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBlYWNoTGluZS5nZXQoJ0FsdGVybmF0ZVVNJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdPUFFUJywgZWFjaExpbmUuZ2V0KCdPcGVuUXVhbnRpdHlTdGFuZGFyZFVNJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgZWFjaExpbmUuZ2V0KCdJbnZvaWNlZFF1YW50aXR5U3RhbmRhcmRVTScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIGVhY2hMaW5lLmdldCgnT3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVTScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdRVFJWJywgZWFjaExpbmUuZ2V0KCdSZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVTScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUVScsIGVhY2hMaW5lLmdldCgnQWx0ZXJuYXRlVU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBlYWNoTGluZS5nZXQoJ0FsdGVybmF0aXZlUXVhbnRpdHlPcGVuJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRQJywgZWFjaExpbmUuZ2V0KCdBbHRlcm5hdGl2ZVByaWNlJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdSRUxQJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ0YyUkVMUCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlBOTScsIGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdGMlJFUE4nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JQRFQnLCBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnRjJUUkRUJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdSUFFUJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ1JlY2VpdmVkUXVhbnRpdHknKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JRQUwnLCBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnUmVjZWl2ZWRRdWFudGl0eUFsdFVNJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdPQU9VJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ09wZW5BbW91bnRPcmRlclVNJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdPQUxDJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ09wZW5BbW91bnRMb2NhbEN1cnJlbmN5JykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdPUENXJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ09wZW5DYXRjaFdlaWdodCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FPVScsIGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdSZWNlaXZlZFF1YW50aXR5QWx0VU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09RUE0nLCBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnT3BlblF1YW50aXR5UHVyY2hhc2VPcmRlclByaWNlVU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkud3JpdGUoKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgfQ0KICAvKiByZXJ0aXZlIHJlY2VpcHQgY2hhcmdlcyBmcm9tIHRhYmxlIEZHUlBDTA0KICAgKi8NCiAgcHVibGljIGdhdGhlclJlY2VpcHRDaGFyZ2VzKFN0cmluZyBlYWNoUFVOTywgSGFzaHRhYmxlIGVhY2hMaW5lUmVjZWlwdCwgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgbGluZUNoYXJnZVJlY2VpcHRMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgIERCQWN0aW9uIHF1ZXJ5RkdSUENMID0gZGF0YWJhc2UudGFibGUoIkZHUlBDTCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiRjNDT05PIiwgIkYzRElWSSIsICJGM1BVTk8iLCAiRjNQTkxJIiwgIkYzUE5MUyIsICJGM1JFUE4iLCAiRjNSRUxQIiwgIkYzQ0RTRSIsICJGM0NFSUQiLCAiRjNFWFRZIiwgIkYzU0NPQyIsICJGM1NDT1AiLCAiRjNJVlFUIiwgIkYzSVZRQSIsICJGM1JDQUMiLCAiRjNJQ0FDIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciByZWNvcmRGR1JQQ0wgPSBxdWVyeUZHUlBDTC5nZXRDb250YWluZXIoKTsNCiAgICByZWNvcmRGR1JQQ0wuc2V0KCJGM0NPTk8iLCBJbnRlZ2VyLnBhcnNlSW50KENPTk8udHJpbSgpKSk7DQogICAgcmVjb3JkRkdSUENMLnNldCgiRjNESVZJIiwgb0RJVkkudHJpbSgpKTsNCiAgICByZWNvcmRGR1JQQ0wuc2V0KCJGM1BVTk8iLCBlYWNoUFVOTy50cmltKCkpOw0KICAgIHJlY29yZEZHUlBDTC5zZXQoIkYzUE5MSSIsIGVhY2hMaW5lLmdldCgnUE5MSScpLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkpOw0KICAgIHJlY29yZEZHUlBDTC5zZXQoIkYzUE5MUyIsIGVhY2hMaW5lLmdldCgnUE5MUycpLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkpOw0KICAgIHJlY29yZEZHUlBDTC5zZXQoJ0YzUkVQTicsIExvbmcucGFyc2VMb25nKGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUkVQTicpLnRvU3RyaW5nKCkpKTsNCiAgICByZWNvcmRGR1JQQ0wuc2V0KCdGM1JFTFAnLCBJbnRlZ2VyLnBhcnNlSW50KGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUkVMUCcpLnRvU3RyaW5nKCkpKTsNCiAgICANCiAgICBpbnQgcmVhZHMgPSBxdWVyeUZHUlBDTC5yZWFkQWxsKHJlY29yZEZHUlBDTCwgNywgZ2V0RkdSUENMUmVjb3Jkcyk7DQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IGdldEZHUlBDTFJlY29yZHMgPSB7DQogICAgREJDb250YWluZXIgcmVjb3JkIC0+DQogICAgSGFzaHRhYmxlIHRlbXBUYWJsZSA9IG5ldyBIYXNodGFibGUgPCBTdHJpbmcsDQogICAgU3RyaW5nID4gKCk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0RTRV9MQ1InLCByZWNvcmQuZ2V0KCdGM0NEU0UnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdDRUlEX0xDUicsIHJlY29yZC5nZXQoJ0YzQ0VJRCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0VYVFlfTENSJywgcmVjb3JkLmdldCgnRjNFWFRZJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnU0NPQ19MQ1InLCByZWNvcmQuZ2V0KCdGM1NDT0MnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdTQ09QX0xDUicsIHJlY29yZC5nZXQoJ0YzU0NPUCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0lWUVRfTENSJywgcmVjb3JkLmdldCgnRjNJVlFUJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUFVOT19MQ1InLCByZWNvcmQuZ2V0KCdGM1BVTk8nKS50b1N0cmluZygpICsgcmVjb3JkLmdldCgnRjNQTkxJJykudG9TdHJpbmcoKSArIHJlY29yZC5nZXQoJ0YzUE5MUycpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0lWUUFfTENSJywgcmVjb3JkLmdldCgnRjNJVlFBJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUkNBQ19MQ1InLCByZWNvcmQuZ2V0KCdGM1JDQUMnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdJQ0FDX0xDUicsIHJlY29yZC5nZXQoJ0YzSUNBQycpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZUNoYXJnZXMucHV0KHJlY29yZC5nZXQoJ0YzUFVOTycpLnRvU3RyaW5nKCkudHJpbSgpICsgcmVjb3JkLmdldCgnRjNQTkxJJykudG9TdHJpbmcoKS50cmltKCkgKyByZWNvcmQuZ2V0KCdGM1BOTFMnKS50b1N0cmluZygpLnRyaW0oKSArIHJlY29yZC5nZXQoJ0YzQ0RTRScpLnRvU3RyaW5nKCkudHJpbSgpLCByZWNvcmQuZ2V0KCdGM0lWUUEnKS50b1N0cmluZygpLnRyaW0oKSk7DQogICAgdGVtcFRhYmxlQ2hhcmdlczEucHV0KHJlY29yZC5nZXQoJ0YzUFVOTycpLnRvU3RyaW5nKCkudHJpbSgpLCByZWNvcmQuZ2V0KCdGM1BOTEknKS50b1N0cmluZygpLnRyaW0oKSk7DQogICAgbGluZUNoYXJnZVJlY2VpcHRMaXN0LmFkZCh0ZW1wVGFibGUpOw0KICAgIA0KICB9DQoNCiAgLyogcmV0cml2ZSBjaGFyZ2UgdGV4dCB1c2luZyBQUFMyODBNSS5HZXRFbGVtZW50DQogICAqLw0KICBwdWJsaWMgZ2V0Q2hhcmdlVGV4dChIYXNodGFibGUgZWFjaExpbmVDaGFyZ2VSZWNlaXB0KSB7DQogICAgU3RyaW5nIENFSUQgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdDRUlEX0xDUicpOw0KICAgIFN0cmluZyBUWDMwID0gIiI7DQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgVFgzMCA9IHJlc3VsdHMuZ2V0KCdUWDMwJyk7DQoNCiAgICAgIH0NCiAgICAgIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5wdXQoJ1RYMzBfTENSJywgVFgzMCk7DQoNCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ0VJRCI6IENFSUQudHJpbSgpXTsNCiAgICBtaUNhbGxlci5jYWxsKCJQUFMyODBNSSIsICJHZXRFbGVtZW50IiwgcGFyYW1zLCBjYWxsYmFjayk7DQogIH0NCiAgLyogY2FsY3VsYXRlIHJlY2VpcHQgY2hhcmdlIHF1YW50aXRpZXMNCiAgICovDQogIHB1YmxpYyBjYWxjdWxhdGVSZWNlaXB0Q2hhcmdlUXVhbnRpdGllcyhIYXNodGFibGUgZWFjaExpbmUsIEhhc2h0YWJsZSBlYWNoTGluZVJlY2VpcHQsIEhhc2h0YWJsZSBlYWNoTGluZUNoYXJnZVJlY2VpcHQpIHsNCiAgICBTdHJpbmcgUFVVTiA9IGVhY2hMaW5lLmdldCgnUFVVTicpOw0KICAgIFN0cmluZyBQUFVOID0gZWFjaExpbmUuZ2V0KCdQUFVOJyk7DQogICAgU3RyaW5nIEYyQ0FXRSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyQ0FXRScpOw0KICAgIFN0cmluZyBSUFFBID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSUFFBJyk7DQogICAgU3RyaW5nIEYyUlBRVCA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUlBRVCcpOw0KICAgIFN0cmluZyBGM0lWUVQgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdJVlFUX0xDUicpOw0KICAgIFN0cmluZyBGMlJQUUEgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJQUUEnKTsNCiAgICBTdHJpbmcgRjNJVlFBID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnSVZRQV9MQ1InKTsNCiAgICBpbnZRdHkgPSBGM0lWUUE7DQogICAgDQogICAgU3RyaW5nIEYySVZDVyA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YySVZDVycpOw0KICAgIFN0cmluZyBGM1JDQUMgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdSQ0FDX0xDUicpOw0KICAgIFN0cmluZyBGM0lDQUMgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdJQ0FDX0xDUicpOw0KICAgIFN0cmluZyBGM1NDT1AgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdTQ09QX0xDUicpOw0KICAgIFN0cmluZyBGM1NDT0MgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdTQ09DX0xDUicpOw0KICAgIFN0cmluZyBGMlNFUkEgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlNFUkEnKTsNCg0KICAgIFBVVU4gPSBQVVVOID09IG51bGwgPyAiIiA6IFBVVU4udHJpbSgpOw0KICAgIFBQVU4gPSBQUFVOID09IG51bGwgPyAiIiA6IFBQVU4udHJpbSgpOw0KICAgIEYyQ0FXRSA9IEYyQ0FXRSA9PSBudWxsID8gIiIgOiBGMkNBV0UudHJpbSgpOw0KICAgIFJQUUEgPSBSUFFBID09IG51bGwgPyAiIiA6IFJQUUEudHJpbSgpOw0KICAgIEYyUlBRVCA9IEYyUlBRVCA9PSBudWxsID8gIiIgOiBGMlJQUVQudHJpbSgpOw0KICAgIEYzSVZRVCA9IEYzSVZRVCA9PSBudWxsID8gIiIgOiBGM0lWUVQudHJpbSgpOw0KICAgIEYyUlBRQSA9IEYyUlBRQSA9PSBudWxsID8gIiIgOiBGMlJQUUEudHJpbSgpOw0KICAgIEYzSVZRQSA9IEYzSVZRQSA9PSBudWxsID8gIiIgOiBGM0lWUUEudHJpbSgpOw0KICAgIEYySVZDVyA9IEYySVZDVyA9PSBudWxsID8gIiIgOiBGMklWQ1cudHJpbSgpOw0KICAgIEYzUkNBQyA9IEYzUkNBQyA9PSBudWxsID8gIiIgOiBGM1JDQUMudHJpbSgpOw0KICAgIEYzSUNBQyA9IEYzSUNBQyA9PSBudWxsID8gIiIgOiBGM0lDQUMudHJpbSgpOw0KICAgIEYzU0NPUCA9IEYzU0NPUCA9PSBudWxsID8gIiIgOiBGM1NDT1AudHJpbSgpOw0KICAgIEYzU0NPQyA9IEYzU0NPQyA9PSBudWxsID8gIiIgOiBGM1NDT0MudHJpbSgpOw0KICAgIEYyU0VSQSA9IEYyU0VSQSA9PSBudWxsID8gIiIgOiBGMlNFUkEudHJpbSgpOw0KICAgIG9ETUNVID0gb0RNQ1UgPT0gbnVsbCA/ICIiIDogb0RNQ1UudHJpbSgpOw0KICAgIE9yZGVyVU1fRENDRCA9IE9yZGVyVU1fRENDRCA9PSBudWxsID8gIiIgOiBPcmRlclVNX0RDQ0QudHJpbSgpOw0KICAgIEJhc2ljVU1fRENDRCA9IEJhc2ljVU1fRENDRCA9PSBudWxsID8gIiIgOiBCYXNpY1VNX0RDQ0QudHJpbSgpOw0KDQogICAgRG91YmxlIGRGMkNBV0UgPSBEb3VibGUucGFyc2VEb3VibGUoRjJDQVdFLmlzRW1wdHkoKSA/ICIwIiA6IEYyQ0FXRS50cmltKCkpOw0KICAgIERvdWJsZSBkRjJSUFFUID0gRG91YmxlLnBhcnNlRG91YmxlKEYyUlBRVC5pc0VtcHR5KCkgPyAiMCIgOiBGMlJQUVQudHJpbSgpKTsNCiAgICBEb3VibGUgZEYzSVZRVCA9IERvdWJsZS5wYXJzZURvdWJsZShGM0lWUVQuaXNFbXB0eSgpID8gIjAiIDogRjNJVlFULnRyaW0oKSk7DQogICAgRG91YmxlIGRGMlJQUUEgPSBEb3VibGUucGFyc2VEb3VibGUoRjJSUFFBLmlzRW1wdHkoKSA/ICIwIiA6IEYyUlBRQS50cmltKCkpOw0KICAgIERvdWJsZSBkRjNSQ0FDID0gRG91YmxlLnBhcnNlRG91YmxlKEYzUkNBQy5pc0VtcHR5KCkgPyAiMCIgOiBGM1JDQUMudHJpbSgpKTsNCiAgICBEb3VibGUgZEYyU0VSQSA9IERvdWJsZS5wYXJzZURvdWJsZShGMlNFUkEuaXNFbXB0eSgpID8gIjAiIDogRjJTRVJBLnRyaW0oKSk7DQoNCiAgICBpbnQgaW50QmFzaWNVTV9EQ0NEID0gSW50ZWdlci52YWx1ZU9mKEJhc2ljVU1fRENDRC50cmltKCkpOw0KICAgIGludCBpbnRPcmRlclVNX0RDQ0QgPSBPcmRlclVNX0RDQ0QuaXNFbXB0eSgpID8gaW50QmFzaWNVTV9EQ0NEIDogSW50ZWdlci52YWx1ZU9mKE9yZGVyVU1fRENDRC50cmltKCkpOw0KDQogICAgRG91YmxlIGRSZWNlaXZlZFF1YW50aXR5ID0gMC4wZDsNCiAgICBEb3VibGUgZFJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVU1PcmRlckN1cnJlbmN5ID0gMC4wZDsNCg0KICAgIGlmIChvRE1DVS5lcXVhbHMoIjEiKSkgew0KICAgICAgZEYyU0VSQSA9IDFkIC8gZEYyU0VSQTsNCiAgICB9DQogICAgZFJlY2VpdmVkUXVhbnRpdHkgPSBkRjJSUFFBOw0KICAgIGRSZWNlaXZlZENvc3RBbW91bnRPcmRlclVNT3JkZXJDdXJyZW5jeSA9IERvdWJsZS5jb21wYXJlKGRGMlJQUVQsIDAuMGQpID09IDAgPyAwLjBkIDogKERvdWJsZSkoKGRGMlJQUUEgLyBkRjJSUFFUKSAqIGRGM1JDQUMgKiBkRjJTRVJBKTsNCiAgICBSZWNlaXZlZFF1YW50aXR5T3JkZXJVTSA9IERvdWJsZS50b1N0cmluZyhuZXcgQmlnRGVjaW1hbChkUmVjZWl2ZWRRdWFudGl0eSkuc2V0U2NhbGUoaW50T3JkZXJVTV9EQ0NELCBSb3VuZGluZ01vZGUuSEFMRl9VUCkuZG91YmxlVmFsdWUoKSk7DQogICAgUmVjZWl2ZWRDb3N0QW1vdW50T3JkZXJVTU9yZGVyQ3VycmVuY3kgPSBEb3VibGUudG9TdHJpbmcobmV3IEJpZ0RlY2ltYWwoZFJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVU1PcmRlckN1cnJlbmN5KS5zZXRTY2FsZShudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkuZG91YmxlVmFsdWUoKSk7DQogICAgT3BlblF1YW50aXR5T3JkZXJVTSA9IERvdWJsZS50b1N0cmluZyhuZXcgQmlnRGVjaW1hbCgoZEYyUlBRVCAtIGRGM0lWUVQpKS5zZXRTY2FsZShpbnRCYXNpY1VNX0RDQ0QsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS5kb3VibGVWYWx1ZSgpKTsNCg0KICAgIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5wdXQoJ1JlY2VpdmVkUXVhbnRpdHlPcmRlclVNJywgUmVjZWl2ZWRRdWFudGl0eU9yZGVyVU0pOw0KICAgIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5wdXQoJ1JlY2VpdmVkQ29zdEFtb3VudE9yZGVyVU1PcmRlckN1cnJlbmN5JywgUmVjZWl2ZWRDb3N0QW1vdW50T3JkZXJVTU9yZGVyQ3VycmVuY3kpOw0KICAgIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5wdXQoJ09wZW5RdWFudGl0eU9yZGVyVU0nLCBPcGVuUXVhbnRpdHlPcmRlclVNKTsNCiAgfQ0KDQogIHB1YmxpYyBpZlJlY2VpcHRDaGFyZ2VPcGVuKEhhc2h0YWJsZSBlYWNoTGluZUNoYXJnZVJlY2VpcHQpIHsNCiAgICBTdHJpbmcgT3BlblF1YW50aXR5T3JkZXJVTSA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ09wZW5RdWFudGl0eU9yZGVyVU0nKTsNCiAgICBTdHJpbmcgUmVjZWl2ZWRDb3N0QW1vdW50T3JkZXJVTU9yZGVyQ3VycmVuY3kgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdSZWNlaXZlZENvc3RBbW91bnRPcmRlclVNT3JkZXJDdXJyZW5jeScpOw0KDQogICAgT3BlblF1YW50aXR5T3JkZXJVTSA9IE9wZW5RdWFudGl0eU9yZGVyVU0gPT0gbnVsbCA/ICIiIDogT3BlblF1YW50aXR5T3JkZXJVTS50cmltKCk7DQogICAgT3BlblF1YW50aXR5T3JkZXJVTSA9IE9wZW5RdWFudGl0eU9yZGVyVU0uZXF1YWxzKCIiKSA/ICIwIiA6IE9wZW5RdWFudGl0eU9yZGVyVU0ucmVwbGFjZSgnLCcsICcuJyk7DQoNCiAgICBCaWdEZWNpbWFsIG9wZW5RdWFudGl0eU9yZGVyVU0gPSBuZXcgQmlnRGVjaW1hbChPcGVuUXVhbnRpdHlPcmRlclVNKTsNCg0KICAgIFJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVU1PcmRlckN1cnJlbmN5ID0gUmVjZWl2ZWRDb3N0QW1vdW50T3JkZXJVTU9yZGVyQ3VycmVuY3kgPT0gbnVsbCA/ICIiIDogUmVjZWl2ZWRDb3N0QW1vdW50T3JkZXJVTU9yZGVyQ3VycmVuY3kudHJpbSgpOw0KICAgIFJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVU1PcmRlckN1cnJlbmN5ID0gUmVjZWl2ZWRDb3N0QW1vdW50T3JkZXJVTU9yZGVyQ3VycmVuY3kuZXF1YWxzKCIiKSA/ICIwIiA6IFJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVU1PcmRlckN1cnJlbmN5LnJlcGxhY2UoJywnLCAnLicpOw0KDQogICAgQmlnRGVjaW1hbCByZWNlaXZlZENvc3RBbW91bnRPcmRlclVNT3JkZXJDdXJyZW5jeSA9IG5ldyBCaWdEZWNpbWFsKFJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVU1PcmRlckN1cnJlbmN5KTsNCg0KICAgIFN0cmluZyBFeHBvcnRFbXB0eUNoYXJnZXMgPSBleHBvcnRFbXB0eSA9PSBudWxsID8gIiIgOiBleHBvcnRFbXB0eS50cmltKCk7DQoNCiAgICBib29sZWFuIG9wZW5RdWFudGl0eSA9IG9wZW5RdWFudGl0eU9yZGVyVU0uY29tcGFyZVRvKEJpZ0RlY2ltYWwuWkVSTykgIT0gMDsNCg0KICAgIGJvb2xlYW4gb3BlbkFtb3VudCA9IHJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVU1PcmRlckN1cnJlbmN5LmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pICE9IDA7DQoNCiAgICBpZiAoIUV4cG9ydEVtcHR5Q2hhcmdlcy5lcXVhbHMoIjEiKSAmJiAhb3BlbkFtb3VudCAmJiBvcGVuUXVhbnRpdHkpIHsNCiAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9IGVsc2Ugew0KICAgICAgcmV0dXJuIG9wZW5RdWFudGl0eTsNCiAgICB9DQogIH0NCiAgLyogY2hlY2sgUE8gbGluZSBjaGFyZ2Ugb3JkZXIgcHJpY2UgYW5kIEJhc2ljIHVuaXQNCiAgICovDQogIHB1YmxpYyBjaGVja0NoYXJnZU9yZGVyUHJpY2VBbmRCYXNlVW5pdChIYXNodGFibGUgZWFjaExpbmUsIEhhc2h0YWJsZSBlYWNoTGluZVJlY2VpcHQsIEhhc2h0YWJsZSBlYWNoTGluZUNoYXJnZVJlY2VpcHQpIHsNCiAgICBTdHJpbmcgUFVVTiA9IGVhY2hMaW5lLmdldCgnUFVVTicpOw0KICAgIFN0cmluZyBVTk1TID0gZWFjaExpbmUuZ2V0KCdVTk1TJyk7DQogICAgU3RyaW5nIENXVU4gPSBlYWNoTGluZS5nZXQoJ0NXVU4nKTsNCiAgICBTdHJpbmcgUFBVTiA9IGVhY2hMaW5lLmdldCgnUFBVTicpOw0KICAgIFN0cmluZyBPUlFBID0gZWFjaExpbmUuZ2V0KCdPUlFBJyk7DQogICAgU3RyaW5nIE9SUVQgPSBlYWNoTGluZS5nZXQoJ09SUVQnKTsNCiAgICBTdHJpbmcgUlBRQSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUlBRQScpOw0KICAgIHJlcFF0eSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUlBRQScpOw0KICAgIFN0cmluZyBSUFFUID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSUFFUJyk7DQogICAgU3RyaW5nIElWUUEgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdJVlFBX0xDUicpOw0KICAgIFN0cmluZyBJVlFUID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnSVZRVF9MQ1InKTsNCg0KICAgIGlmIChQVVVOLnRyaW0oKS5lcXVhbHMoVU5NUy50cmltKCkpKSB7DQogICAgICBlYWNoTGluZUNoYXJnZVJlY2VpcHQucmVwbGFjZSgnSVZRVF9MQ1InLCBJVlFBKTsNCiAgICB9IGVsc2Ugew0KICAgICAgQmlnRGVjaW1hbCBkYmxJVlFBID0gbmV3IEJpZ0RlY2ltYWwoSVZRQSk7DQogICAgICBCaWdEZWNpbWFsIGRibENPRkEgPSBuZXcgQmlnRGVjaW1hbChPcmRlclVNX0NPRkEpOw0KDQogICAgICBpZiAoT3JkZXJVTV9ETUNGLmVxdWFscygiMSIpKSB7DQogICAgICAgIElWUVQgPSBkYmxJVlFBLm11bHRpcGx5KGRibENPRkEpLnNldFNjYWxlKDgsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQoNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIElWUVQgPSBkYmxJVlFBLmRpdmlkZShkYmxDT0ZBKS5zZXRTY2FsZSg4LCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgfQ0KICAgICAgZWFjaExpbmVDaGFyZ2VSZWNlaXB0LnJlcGxhY2UoJ0lWUVRfTENSJywgSVZRVCk7DQogICAgfQ0KDQogICAgaWYgKFBQVU4udHJpbSgpLmVxdWFscyhQVVVOLnRyaW0oKSkpIHsNCiAgICAgIE9SUUEgPSBPUlFBID09IG51bGwgPyAiIiA6IE9SUUEudHJpbSgpOw0KICAgICAgUlBRQSA9IFJQUUEgPT0gbnVsbCA/ICIiIDogUlBRQS50cmltKCk7DQogICAgICBJVlFBID0gSVZRQSA9PSBudWxsID8gIiIgOiBJVlFBLnRyaW0oKTsNCg0KICAgICAgT3JkZXJlZFF1YW50aXR5UHJpY2VVTSA9IE9SUUE7DQogICAgICBSZWNlaXZlZFF1YW50aXR5UHJpY2VVTSA9IFJQUUE7DQogICAgICBJbnZvaWNlZFF1YW50aXR5UHJpY2VVTSA9IElWUUE7DQoNCiAgICAgIEJpZ0RlY2ltYWwgZGJsUlBRQSA9IG5ldyBCaWdEZWNpbWFsKFJQUUEpOw0KICAgICAgQmlnRGVjaW1hbCBkYmxJVlFBID0gbmV3IEJpZ0RlY2ltYWwoSVZRQSk7DQoNCiAgICAgIE9wZW5RdWFudGl0eVByaWNlVU0gPSAoZGJsUlBRQSAtIGRibElWUUEpLnNldFNjYWxlKDQsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgfQ0KDQogICAgaWYgKFBQVU4udHJpbSgpLmVxdWFscyhVTk1TLnRyaW0oKSkgJiYgIVBQVU4udHJpbSgpLmVxdWFscyhQVVVOLnRyaW0oKSkpIHsNCiAgICAgIE9SUVQgPSBPUlFUID09IG51bGwgPyAiIiA6IE9SUVQudHJpbSgpOw0KICAgICAgUlBRVCA9IFJQUVQgPT0gbnVsbCA/ICIiIDogUlBRVC50cmltKCk7DQogICAgICBJVlFUID0gSVZRVCA9PSBudWxsID8gIiIgOiBJVlFULnRyaW0oKTsNCg0KICAgICAgT3JkZXJlZFF1YW50aXR5UHJpY2VVTSA9IE9SUVQ7DQogICAgICBSZWNlaXZlZFF1YW50aXR5UHJpY2VVTSA9IFJQUVQ7DQogICAgICBJbnZvaWNlZFF1YW50aXR5UHJpY2VVTSA9IElWUVQ7DQoNCiAgICAgIEJpZ0RlY2ltYWwgZGJsUlBRVCA9IG5ldyBCaWdEZWNpbWFsKFJQUVQpOw0KICAgICAgQmlnRGVjaW1hbCBkYmxJVlFUID0gbmV3IEJpZ0RlY2ltYWwoSVZRVCk7DQoNCiAgICAgIE9wZW5RdWFudGl0eVByaWNlVU0gPSAoZGJsUlBRVCAtIGRibElWUVQpLnNldFNjYWxlKDQsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgfQ0KICAgIGlmICghUFBVTi50cmltKCkuZXF1YWxzKFVOTVMudHJpbSgpKSAmJiAhUFBVTi50cmltKCkuZXF1YWxzKFBVVU4udHJpbSgpKSkgew0KICAgICAgSVZRVCA9IElWUVQgPT0gbnVsbCA/ICIiIDogSVZRVC50cmltKCk7DQogICAgICBPUlFUID0gT1JRVCA9PSBudWxsID8gIiIgOiBPUlFULnRyaW0oKTsNCiAgICAgIFJQUVQgPSBSUFFUID09IG51bGwgPyAiIiA6IFJQUVQudHJpbSgpOw0KICAgICAgU3RyaW5nIERDQ0QgPSBQcmljZVVNX0RDQ0QgPT0gbnVsbCA/ICIiIDogUHJpY2VVTV9EQ0NELnRyaW0oKTsNCiAgICAgIFN0cmluZyBETUNGID0gUHJpY2VVTV9ETUNGID09IG51bGwgPyAiIiA6IFByaWNlVU1fRE1DRi50cmltKCk7DQogICAgICBTdHJpbmcgQ09GQSA9IFByaWNlVU1fQ09GQSA9PSBudWxsID8gIiIgOiBQcmljZVVNX0NPRkEudHJpbSgpOw0KDQogICAgICBCaWdEZWNpbWFsIGRibElWUVQgPSBuZXcgQmlnRGVjaW1hbChJVlFUKTsNCiAgICAgIEJpZ0RlY2ltYWwgZGJsQ09GQSA9IG5ldyBCaWdEZWNpbWFsKENPRkEpOw0KICAgICAgQmlnRGVjaW1hbCBkYmxPUlFUID0gbmV3IEJpZ0RlY2ltYWwoT1JRVCk7DQogICAgICBCaWdEZWNpbWFsIGRibFJQUVQgPSBuZXcgQmlnRGVjaW1hbChSUFFUKTsNCg0KICAgICAgaWYgKEFVVFBfYS5lcXVhbHMoIjEiKSkgew0KICAgICAgICBpZiAoRE1DRi5lcXVhbHMoIjEiKSkgew0KDQogICAgICAgICAgT3JkZXJlZFF1YW50aXR5UHJpY2VVTSA9IGRibE9SUVQuZGl2aWRlKGRibENPRkEpLnNldFNjYWxlKEludGVnZXIucGFyc2VJbnQoRENDRCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgICAgICAgUmVjZWl2ZWRRdWFudGl0eVByaWNlVU0gPSBkYmxSUFFULmRpdmlkZShkYmxDT0ZBKS5zZXRTY2FsZShJbnRlZ2VyLnBhcnNlSW50KERDQ0QpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICAgIE9wZW5RdWFudGl0eVByaWNlVU0gPSAoZGJsUlBRVCAtIGRibElWUVQpLmRpdmlkZShkYmxDT0ZBKS5zZXRTY2FsZShJbnRlZ2VyLnBhcnNlSW50KERDQ0QpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KDQogICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICBPcmRlcmVkUXVhbnRpdHlQcmljZVVNID0gZGJsT1JRVC5tdWx0aXBseShkYmxDT0ZBKS5zZXRTY2FsZShJbnRlZ2VyLnBhcnNlSW50KERDQ0QpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICAgIFJlY2VpdmVkUXVhbnRpdHlQcmljZVVNID0gZGJsUlBRVC5tdWx0aXBseShkYmxDT0ZBKS5zZXRTY2FsZShJbnRlZ2VyLnBhcnNlSW50KERDQ0QpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICAgIE9wZW5RdWFudGl0eVByaWNlVU0gPSAoZGJsUlBRVCAtIGRibElWUVQpLm11bHRpcGx5KGRibENPRkEpLnNldFNjYWxlKEludGVnZXIucGFyc2VJbnQoRENDRCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChBVVRQX2EuZXF1YWxzKCIyIikpIHsNCiAgICAgICAgaWYgKERNQ0YuZXF1YWxzKCIxIikpIHsNCg0KICAgICAgICAgIE9yZGVyZWRRdWFudGl0eVByaWNlVU0gPSBkYmxPUlFULmRpdmlkZShkYmxDT0ZBKS5zZXRTY2FsZSgyLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICAgIFJlY2VpdmVkUXVhbnRpdHlQcmljZVVNID0gZGJsUlBRVC5kaXZpZGUoZGJsQ09GQSkuc2V0U2NhbGUoMiwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICAgICAgICBPcGVuUXVhbnRpdHlQcmljZVVNID0gKGRibFJQUVQgLSBkYmxJVlFUKS5kaXZpZGUoZGJsQ09GQSkuc2V0U2NhbGUoMiwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgICAgICB9IGVsc2Ugew0KDQogICAgICAgICAgT3JkZXJlZFF1YW50aXR5UHJpY2VVTSA9IGRibE9SUVQubXVsdGlwbHkoZGJsQ09GQSkuc2V0U2NhbGUoMiwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICAgICAgICBSZWNlaXZlZFF1YW50aXR5UHJpY2VVTSA9IGRibFJQUVQubXVsdGlwbHkoZGJsQ09GQSkuc2V0U2NhbGUoMiwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICAgICAgICBPcGVuUXVhbnRpdHlQcmljZVVNID0gKGRibFJQUVQgLSBkYmxJVlFUKS5tdWx0aXBseShkYmxDT0ZBKS5zZXRTY2FsZSgyLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgUlBRQSA9IFJQUUEgPT0gbnVsbCA/ICIiIDogUlBRQS50cmltKCk7DQogICAgSVZRQSA9IElWUUEgPT0gbnVsbCA/ICIiIDogSVZRQS50cmltKCk7DQogICAgT3JkZXJVTV9EQ0NEID0gT3JkZXJVTV9EQ0NEID09IG51bGwgPyAiIiA6IE9yZGVyVU1fRENDRC50cmltKCk7DQoNCiAgICBCaWdEZWNpbWFsIGRibFJQUUEgPSBuZXcgQmlnRGVjaW1hbChSUFFBKTsNCiAgICBCaWdEZWNpbWFsIGRibElWUUEgPSBuZXcgQmlnRGVjaW1hbChJVlFBKTsNCiAgICBCaWdEZWNpbWFsIGRibGludlF0eSA9IG5ldyBCaWdEZWNpbWFsKGludlF0eSk7DQogICAgaW50IGludE9yZGVyVU1fRENDRCA9IEludGVnZXIudmFsdWVPZihPcmRlclVNX0RDQ0QpOw0KDQogICAgT3BlblF1YW50aXR5T3JkZXJVTSA9IGRibFJQUUEuc3VidHJhY3QoZGJsSVZRQSkuc2V0U2NhbGUoaW50T3JkZXJVTV9EQ0NELCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgIE9wZW5RdWFudGl0eU9yZGVyVU1fYSA9IGRibFJQUUEuc3VidHJhY3QoZGJsaW52UXR5KS5zZXRTY2FsZShpbnRPcmRlclVNX0RDQ0QsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQoNCiAgICBPcGVuUXVhbnRpdHlPcmRlclVNID0gT3BlblF1YW50aXR5T3JkZXJVTSA9PSBudWxsID8gIiIgOiBPcGVuUXVhbnRpdHlPcmRlclVNLnRyaW0oKTsNCiAgICBSZWNlaXZlZENvc3RBbW91bnRPcmRlclVNT3JkZXJDdXJyZW5jeSA9IFJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVU1PcmRlckN1cnJlbmN5ID09IG51bGwgPyAiIiA6IFJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVU1PcmRlckN1cnJlbmN5LnRyaW0oKTsNCiAgICBSZWNlaXZlZFF1YW50aXR5UHJpY2VVTSA9IFJlY2VpdmVkUXVhbnRpdHlQcmljZVVNID09IG51bGwgPyAiIiA6IFJlY2VpdmVkUXVhbnRpdHlQcmljZVVNLnRyaW0oKTsNCiAgICBSZWNlaXZlZFF1YW50aXR5T3JkZXJVTSA9IFJlY2VpdmVkUXVhbnRpdHlPcmRlclVNID09IG51bGwgPyAiIiA6IFJlY2VpdmVkUXVhbnRpdHlPcmRlclVNLnRyaW0oKTsNCiAgICBPcGVuUXVhbnRpdHlQcmljZVVNID0gT3BlblF1YW50aXR5UHJpY2VVTSA9PSBudWxsID8gIiIgOiBPcGVuUXVhbnRpdHlQcmljZVVNLnRyaW0oKTsNCg0KICAgIEJpZ0RlY2ltYWwgZGJsT3BlblF1YW50aXR5T3JkZXJVTSA9IG5ldyBCaWdEZWNpbWFsKE9wZW5RdWFudGl0eU9yZGVyVU0pOw0KICAgIEJpZ0RlY2ltYWwgZGJsUmVjZWl2ZWRDb3N0QW1vdW50T3JkZXJVTU9yZGVyQ3VycmVuY3kgPSBuZXcgQmlnRGVjaW1hbChSZWNlaXZlZENvc3RBbW91bnRPcmRlclVNT3JkZXJDdXJyZW5jeSk7DQogICAgQmlnRGVjaW1hbCBkYmxSZWNlaXZlZFF1YW50aXR5UHJpY2VVTSA9IG5ldyBCaWdEZWNpbWFsKFJlY2VpdmVkUXVhbnRpdHlQcmljZVVNKTsNCiAgICBCaWdEZWNpbWFsIGRibFJlY2VpdmVkUXVhbnRpdHlPcmRlclVNID0gbmV3IEJpZ0RlY2ltYWwoUmVjZWl2ZWRRdWFudGl0eU9yZGVyVU0pOw0KICAgIEJpZ0RlY2ltYWwgZGJsT3BlblF1YW50aXR5UHJpY2VVTSA9IG5ldyBCaWdEZWNpbWFsKE9wZW5RdWFudGl0eVByaWNlVU0pOw0KDQogICAgQmlnRGVjaW1hbCBkYmxQcmljZVBlclBpZWNlT3JkZXJVTSA9IGRibFJlY2VpdmVkUXVhbnRpdHlPcmRlclVNLmNvbXBhcmVUbygwLjApID09IDAgPyAwLjAgOiBkYmxSZWNlaXZlZENvc3RBbW91bnRPcmRlclVNT3JkZXJDdXJyZW5jeSAvIGRibFJlY2VpdmVkUXVhbnRpdHlPcmRlclVNOw0KICAgIEJpZ0RlY2ltYWwgZGJsUHJpY2VQZXJQaWVjZVByaWNlVU0gPSBkYmxSZWNlaXZlZFF1YW50aXR5UHJpY2VVTS5jb21wYXJlVG8oMC4wKSA9PSAwID8gMC4wIDogKGRibFJlY2VpdmVkUXVhbnRpdHlPcmRlclVNIC8gZGJsUmVjZWl2ZWRRdWFudGl0eVByaWNlVU0pICogZGJsUHJpY2VQZXJQaWVjZU9yZGVyVU07DQoNCiAgICBBbW91bnRSZWNlaXZlZFByaWNlVU0gPSBkYmxSZWNlaXZlZFF1YW50aXR5UHJpY2VVTS5tdWx0aXBseShkYmxQcmljZVBlclBpZWNlUHJpY2VVTSkuc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICBBbW91bnRPcGVuUHJpY2VVTSA9IGRibE9wZW5RdWFudGl0eVByaWNlVU0ubXVsdGlwbHkoZGJsUHJpY2VQZXJQaWVjZVByaWNlVU0pLnNldFNjYWxlKG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgQW1vdW50T3Blbk9yZGVyVU0gPSBkYmxPcGVuUXVhbnRpdHlPcmRlclVNLm11bHRpcGx5KGRibFByaWNlUGVyUGllY2VPcmRlclVNKS5zZXRTY2FsZShudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KDQogICAgUHJpY2VQZXJQaWVjZVByaWNlVU0gPSBkYmxQcmljZVBlclBpZWNlUHJpY2VVTS5zZXRTY2FsZShudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgIFByaWNlUGVyUGllY2VPcmRlclVNID0gZGJsUHJpY2VQZXJQaWVjZU9yZGVyVU0uc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTs7DQoNCiAgfQ0KDQogIC8qIGFkZCBQTyBsaW5lIG9wZW4gY2hhcmdlIHRvIHJlY2VpcHQgbGlzdA0KICAgKi8NCiAgcHVibGljIGFkZFRvTGluZU9wZW5DaGFyZ2VSZWNlaXB0TGlzdChTdHJpbmcgZWFjaFBVTk8sIEhhc2h0YWJsZSBlYWNoTGluZSwgSGFzaHRhYmxlIGVhY2hMaW5lUmVjZWlwdCwgSGFzaHRhYmxlIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdCkgew0KICAgIFN0cmluZyBQTkxJID0gZWFjaExpbmUuZ2V0KCdQTkxJJyk7DQogICAgU3RyaW5nIFBOTFMgPSBlYWNoTGluZS5nZXQoJ1BOTFMnKTsNCiAgICBTdHJpbmcgQ0RTRSA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ0NEU0VfTENSJyk7DQogICAgU3RyaW5nIENFSUQgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdDRUlEX0xDUicpOw0KICAgIFN0cmluZyBSRVBOID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSRVBOJyk7DQogICAgU3RyaW5nIFJFTFAgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJFTFAnKTsNCiAgICBTdHJpbmcgVFgzMCA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ1RYMzBfTENSJyk7DQogICAgU3RyaW5nIEVYVFkgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdFWFRZX0xDUicpOw0KICAgIFN0cmluZyBJVE5PID0gZWFjaExpbmUuZ2V0KCdJVE5PJyk7DQogICAgU3RyaW5nIFBQVU4gPSBlYWNoTGluZS5nZXQoJ1BQVU4nKTsNCiAgICBTdHJpbmcgUFVVTiA9IGVhY2hMaW5lLmdldCgnUFVVTicpOw0KDQogICAgSGFzaHRhYmxlIHRlbXBUYWJsZSA9IG5ldyBIYXNodGFibGUgPCBTdHJpbmcsIFN0cmluZyA+ICgpOw0KICAgIHRlbXBUYWJsZS5wdXQoIlBVTk8iLCBlYWNoUFVOTyk7DQogICAgdGVtcFRhYmxlLnB1dCgiUE5MSSIsIFBOTEkpOw0KICAgIHRlbXBUYWJsZS5wdXQoIlBOTFMiLCBQTkxTKTsNCiAgICB0ZW1wVGFibGUucHV0KCJTZXF1ZW5jZU51bWJlciIsIENEU0UpOw0KICAgIHRlbXBUYWJsZS5wdXQoIkNvc3RpbmdFbGVtZW50IiwgQ0VJRCk7DQogICAgdGVtcFRhYmxlLnB1dCgiUmVjZWlwdE51bWJlciIsIFJFUE4pOw0KICAgIHRlbXBUYWJsZS5wdXQoIkNvc3RpbmdFbGVtZW50RGVzY3JpcHRpb24iLCBUWDMwKTsNCiAgICB0ZW1wVGFibGUucHV0KCJDaGFyZ2VUeXBlIiwgRVhUWSk7DQogICAgdGVtcFRhYmxlLnB1dCgiSXRlbU51bWJlciIsIElUTk8pOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YyUkVMUCcsIFJFTFApOw0KDQogICAgdGVtcFRhYmxlLnB1dCgiQW1vdW50T3BlbiIsIEFtb3VudE9wZW5QcmljZVVNKTsNCiAgICB0ZW1wVGFibGUucHV0KCJBbW91bnRPcmRlcmVkIiwgQW1vdW50UmVjZWl2ZWRQcmljZVVNKTsNCiAgICB0ZW1wVGFibGUucHV0KCJQcmljZSIsIFByaWNlUGVyUGllY2VQcmljZVVNKTsNCiAgICB0ZW1wVGFibGUucHV0KCJVbml0IiwgUFBVTik7DQogICAgdGVtcFRhYmxlLnB1dCgiUXVhbnRpdHlPcGVuIiwgT3BlblF1YW50aXR5UHJpY2VVTSk7DQogICAgdGVtcFRhYmxlLnB1dCgiUXVhbnRpdHlJbnZvaWNlZCIsIEludm9pY2VkUXVhbnRpdHlQcmljZVVNKTsNCiAgICB0ZW1wVGFibGUucHV0KCJRdWFudGl0eU9yZGVyZWQiLCBPcmRlcmVkUXVhbnRpdHlQcmljZVVNKTsNCiAgICB0ZW1wVGFibGUucHV0KCJRdWFudGl0eVJlY2VpdmVkIiwgUmVjZWl2ZWRRdWFudGl0eVByaWNlVU0pOw0KDQogICAgaWYgKFBVVU4uZXF1YWxzKFBQVU4udHJpbSgpKSkgew0KICAgICAgdGVtcFRhYmxlLnB1dCgiQWx0ZXJuYXRpdmVVbml0IiwgIi0iKTsNCiAgICAgIHRlbXBUYWJsZS5wdXQoIkFsdGVybmF0aXZlUXVhbnRpdHlPcGVuIiwgIjAuMCIpOw0KICAgICAgdGVtcFRhYmxlLnB1dCgiQWx0ZXJuYXRpdmVQcmljZSIsICIwLjAiKTsNCiAgICB9IGVsc2Ugew0KICAgICAgdGVtcFRhYmxlLnB1dCgiQWx0ZXJuYXRpdmVVbml0IiwgUFVVTik7DQogICAgICB0ZW1wVGFibGUucHV0KCJBbHRlcm5hdGl2ZVF1YW50aXR5T3BlbiIsIE9wZW5RdWFudGl0eU9yZGVyVU0pOw0KICAgICAgdGVtcFRhYmxlLnB1dCgiQWx0ZXJuYXRpdmVQcmljZSIsIFByaWNlUGVyUGllY2VPcmRlclVNKTsNCiAgICB9DQogICAgbGluZU9wZW5DaGFyZ2VSZWNlaXB0TGlzdC5hZGQodGVtcFRhYmxlKTsNCg0KICB9DQogIC8qIGdldCBsaW5lIGNoYXJnZXMgZnJvbSB0YWJsZSBNUE9FWFANCiAgICovDQogIHByaXZhdGUgZ2V0TGluZUNoYXJnZXMoU3RyaW5nIGVhY2hQVU5PLCBIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICB0ZW1wTGluZUNoYXJnZUxpc3QgPSBuZXcgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gKCk7DQogICAgTGluZUNoYXJnZUxpc3QgPSBuZXcgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gKCk7DQogICAgREJBY3Rpb24gcXVlcnlNUE9FWFAgPSBkYXRhYmFzZS50YWJsZSgiTVBPRVhQIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJJVkNPTk8iLCAiSVZQVU5PIiwgIklWUE5MSSIsICJJVlBOTFMiLCAiSVZDRFNFIiwgIklWUkVQTiIsICJJVkVYVFkiLCAiSVZDRUlEIiwgIklWRVhJQyIsICJJVldTT1AiLCAiSVZDVUNEIiwgIklWQ0VWQSIsICJJVkNFVkoiLCAiSVZUSFBSIiwgIklWSVZDUSIsICJJVkFDSU4iKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIHJlY29yZE1QT0VYUCA9IHF1ZXJ5TVBPRVhQLmdldENvbnRhaW5lcigpOw0KICAgIHJlY29yZE1QT0VYUC5zZXQoIklWQ09OTyIsIEludGVnZXIucGFyc2VJbnQoQ09OTy50cmltKCkpKTsNCiAgICByZWNvcmRNUE9FWFAuc2V0KCJJVlBVTk8iLCBlYWNoUFVOTy50cmltKCkpOw0KICAgIHJlY29yZE1QT0VYUC5zZXQoIklWUE5MSSIsIEludGVnZXIucGFyc2VJbnQoZWFjaExpbmUuZ2V0KCdQTkxJJykudG9TdHJpbmcoKSkpOw0KICAgIHJlY29yZE1QT0VYUC5zZXQoIklWUE5MUyIsIEludGVnZXIucGFyc2VJbnQoZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKSkpOw0KICAgIA0KICAgIGludCByZWFkcyA9IHF1ZXJ5TVBPRVhQLnJlYWRBbGwocmVjb3JkTVBPRVhQLCA0LCBnZXRNUE9FWFBMaW5lUmVjb3Jkcyk7DQoNCiAgfQ0KDQogIENsb3N1cmUgPCA/ID4gZ2V0TVBPRVhQTGluZVJlY29yZHMgPSB7DQogICAgREJDb250YWluZXIgcmVjb3JkIC0+DQogICAgU3RyaW5nIFBOTEkgPSByZWNvcmQuZ2V0KCdJVlBOTEknKTsNCiAgICBTdHJpbmcgUE5MUyA9IHJlY29yZC5nZXQoJ0lWUE5MUycpOw0KICAgIFN0cmluZyBDRFNFID0gcmVjb3JkLmdldCgnSVZDRFNFJyk7DQogICAgU3RyaW5nIFJFUE4gPSByZWNvcmQuZ2V0KCdJVlJFUE4nKTsNCiAgICBTdHJpbmcgRVhUWSA9IHJlY29yZC5nZXQoJ0lWRVhUWScpOw0KICAgIFN0cmluZyBDRUlEID0gcmVjb3JkLmdldCgnSVZDRUlEJyk7DQogICAgU3RyaW5nIEVYSUMgPSByZWNvcmQuZ2V0KCdJVkVYSUMnKTsNCiAgICBTdHJpbmcgV1NPUCA9IHJlY29yZC5nZXQoJ0lWV1NPUCcpOw0KICAgIFN0cmluZyBDVUNEID0gcmVjb3JkLmdldCgnSVZDVUNEJyk7DQogICAgU3RyaW5nIENFVkEgPSByZWNvcmQuZ2V0KCdJVkNFVkEnKTsNCiAgICBTdHJpbmcgQ0VWSiA9IHJlY29yZC5nZXQoJ0lWQ0VWSicpOw0KICAgIFN0cmluZyBUSFBSID0gcmVjb3JkLmdldCgnSVZUSFBSJyk7DQogICAgU3RyaW5nIElWQ1EgPSByZWNvcmQuZ2V0KCdJVklWQ1EnKTsNCiAgICBTdHJpbmcgQUNJTiA9IHJlY29yZC5nZXQoJ0lWQUNJTicpOw0KICAgIEhhc2h0YWJsZSB0ZW1wVGFibGUgPSBuZXcgSGFzaHRhYmxlIDwgU3RyaW5nLA0KICAgIFN0cmluZyA+ICgpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BOTEknLCBQTkxJKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQTkxTJywgUE5MUyk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0RTRScsIENEU0UpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1JFUE4nLCBSRVBOKTsNCiAgICB0ZW1wVGFibGUucHV0KCdFWFRZJywgRVhUWSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0VJRCcsIENFSUQpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0VYSUMnLCBFWElDKTsNCiAgICB0ZW1wVGFibGUucHV0KCdXU09QJywgV1NPUCk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ1VDRCcsIENVQ0QpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NFVkEnLCBDRVZBKTsNCiAgICB0ZW1wVGFibGUucHV0KCdDRVZKJywgQ0VWSik7DQogICAgdGVtcFRhYmxlLnB1dCgnVEhQUicsIFRIUFIpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0lWQ1EnLCBJVkNRKTsNCiAgICB0ZW1wVGFibGUucHV0KCdBQ0lOJywgQUNJTik7DQogICAgdGVtcExpbmVDaGFyZ2VMaXN0LmFkZCh0ZW1wVGFibGUpOw0KDQogIH0NCiAgLyogZ2V0IGxpbmUgY2hhcmdlIHRleHQgdXNpbmcgUFBTMjgwTUkuR2V0RWxlbWVudA0KICAgKi8NCiAgcHJpdmF0ZSBnZXRMaW5lQ2hhcmdlVGV4dChTdHJpbmcgZWFjaFBVTk8sIEhhc2h0YWJsZSBlYWNoVGVtcExpbmVDaGFyZ2UsIEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIFN0cmluZyBDRUlEID0gZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnQ0VJRCcpOw0KICAgIFN0cmluZyBpUFVOTyA9IGVhY2hQVU5POw0KICAgIFN0cmluZyBpUE5MSSA9IGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ1BOTEknKTsNCiAgICBTdHJpbmcgaVBOTFMgPSBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdQTkxTJyk7DQogICAgU3RyaW5nIGlDRFNFID0gZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnQ0RTRScpOw0KICAgIFN0cmluZyBpQ0VJRCA9IGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ0NFSUQnKTsNCiAgICBTdHJpbmcgaVdTT1AgPSBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdXU09QJyk7DQogICAgU3RyaW5nIFRYMzAgPSAiIjsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBUWDMwID0gcmVzdWx0cy5nZXQoJ1RYMzAnKTsNCg0KICAgICAgfQ0KDQogICAgICBTdHJpbmcgRVhUWSA9IGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ0VYVFknKTsNCg0KICAgICAgaWYgKHZhbGlkQ2hhcmdlVHlwZXMuY29udGFpbnMoRVhUWS50cmltKCkpKSB7DQoNCiAgICAgICAgbGluZU9wZW5DaGFyZ2VSZWNlaXB0TGlzdC5lYWNoIHsNCg0KICAgICAgICAgIGxpbmVPcGVuQ2hhcmdlUmVjZWlwdCAtPg0KICAgICAgICAgICAgSGFzaHRhYmxlIGh0T3BlblJlY2VpcHRDaGFyZ2UgPSBsaW5lT3BlbkNoYXJnZVJlY2VpcHQ7DQoNCiAgICAgICAgICBTdHJpbmcgcHVubyA9IGh0T3BlblJlY2VpcHRDaGFyZ2UuY29udGFpbnNLZXkoIlBVTk8iKSA/IGh0T3BlblJlY2VpcHRDaGFyZ2UNCiAgICAgICAgICAgIC5nZXQoIlBVTk8iKSA6IG51bGw7DQogICAgICAgICAgU3RyaW5nIHBubGkgPSBodE9wZW5SZWNlaXB0Q2hhcmdlLmNvbnRhaW5zS2V5KCJQTkxJIikgPyBodE9wZW5SZWNlaXB0Q2hhcmdlDQogICAgICAgICAgICAuZ2V0KCJQTkxJIikgOiBudWxsOw0KICAgICAgICAgIFN0cmluZyBwbmxzID0gaHRPcGVuUmVjZWlwdENoYXJnZS5jb250YWluc0tleSgiUE5MUyIpID8gaHRPcGVuUmVjZWlwdENoYXJnZQ0KICAgICAgICAgICAgLmdldCgiUE5MUyIpIDogbnVsbDsNCiAgICAgICAgICBTdHJpbmcgY2RzZSA9IGh0T3BlblJlY2VpcHRDaGFyZ2UuY29udGFpbnNLZXkoIlNlcXVlbmNlTnVtYmVyIikgPyBodE9wZW5SZWNlaXB0Q2hhcmdlDQogICAgICAgICAgICAuZ2V0KCJTZXF1ZW5jZU51bWJlciIpIDogbnVsbDsNCiAgICAgICAgICBTdHJpbmcgY2VpZCA9IGh0T3BlblJlY2VpcHRDaGFyZ2UuY29udGFpbnNLZXkoIkNvc3RpbmdFbGVtZW50IikgPyBodE9wZW5SZWNlaXB0Q2hhcmdlDQogICAgICAgICAgICAuZ2V0KCJDb3N0aW5nRWxlbWVudCIpIDogbnVsbDsNCiAgICAgICAgICBwdW5vID0gcHVubyA9PSBudWxsID8gIiIgOiBwdW5vLnRyaW0oKTsNCiAgICAgICAgICBwbmxpID0gcG5saSA9PSBudWxsID8gIiIgOiBwbmxpLnRyaW0oKTsNCiAgICAgICAgICBwbmxzID0gcG5scyA9PSBudWxsID8gIiIgOiBwbmxzLnRyaW0oKTsNCiAgICAgICAgICBjZHNlID0gY2RzZSA9PSBudWxsID8gIiIgOiBjZHNlLnRyaW0oKTsNCiAgICAgICAgICBjZWlkID0gY2VpZCA9PSBudWxsID8gIiIgOiBjZWlkLnRyaW0oKTsNCiAgICAgICAgICBpZiAocHVuby5lcXVhbHMoaVBVTk8pICYmIHBubGkuZXF1YWxzKGlQTkxJKSAmJiBwbmxzLmVxdWFscyhpUE5MUykgJiYNCiAgICAgICAgICAgIGNkc2UuZXF1YWxzKGlDRFNFKSAmJiBjZWlkLmVxdWFscyhpQ0VJRCkpIHsNCg0KICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoIk9wZXJhdG9yIiwgZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnV1NPUCcpKTsNCiAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJDb3N0aW5nRWxlbWVudERlc2NyaXB0aW9uIiwgVFgzMCk7DQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiVGhpcmRQYXJ0eUNvc3RzIiwgZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnVEhQUicpKTsNCiAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJJbnZvaWNlQ29zdHMiLCBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdJVkNRJykpOw0KICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoIkFjY0ludm9pY2VDb3N0cyIsIGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ0FDSU4nKSk7DQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiQ3VycmVuY3kiLCBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdDVUNEJykpOw0KICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoIkNvc3RpbmdFbGVtZW50QW1vdW50IiwgZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnQ0VWQScpKTsNCiAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJBZGp1c3RlZENvc3RpbmdFbGVtZW50QW1vdW50IiwgZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnQ0VWSicpKTsNCiAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJWQVRDb2RlIiwgZWFjaExpbmUuZ2V0KCdWVENEJykpOw0KICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoIkNoYXJnZUZhY3RvciIsIGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ0VYSUMnKSk7DQogICAgICAgICAgICBib29sZWFuIGFkZENoYXJnZSA9IHRydWU7DQogICAgICAgICAgICBpV1NPUCA9ICIyMCI7DQogICAgICAgICAgICBpZiAoZml4ZWRDaGFyZ2VUeXBlcy5jb250YWlucyhpV1NPUCkpIHsNCg0KICAgICAgICAgICAgICBCaWdEZWNpbWFsIHF1YW50aXR5SW52b2ljZWQgPSBuZXcgQmlnRGVjaW1hbChodE9wZW5SZWNlaXB0Q2hhcmdlLmdldCgiUXVhbnRpdHlJbnZvaWNlZCIpLnRvU3RyaW5nKCkpOw0KDQogICAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJRdWFudGl0eU9wZW4iLCAiMSIpOw0KICAgICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiUXVhbnRpdHlJbnZvaWNlZCIsICIxIik7DQogICAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJRdWFudGl0eU9yZGVyZWQiLCAiMSIpOw0KICAgICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiUXVhbnRpdHlSZWNlaXZlZCIsICIxIik7DQogICAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJQcmljZSIsIGh0T3BlblJlY2VpcHRDaGFyZ2UuZ2V0KCJBbW91bnRPcmRlcmVkIikpOw0KDQogICAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJBbHRlcm5hdGl2ZVF1YW50aXR5T3BlbiIsICIxIik7DQogICAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJBbHRlcm5hdGl2ZVByaWNlIiwgaHRPcGVuUmVjZWlwdENoYXJnZS5nZXQoIkFtb3VudE9yZGVyZWQiKSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChhZGRDaGFyZ2UpIHsNCg0KICAgICAgICAgICAgICBMaW5lQ2hhcmdlTGlzdC5hZGQoaHRPcGVuUmVjZWlwdENoYXJnZSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJDRUlEIjogQ0VJRC50cmltKCldOw0KICAgIG1pQ2FsbGVyLmNhbGwoIlBQUzI4ME1JIiwgIkdldEVsZW1lbnQiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCiAgfQ0KICAvKiBzZW5kIGxpbmUgY2hhcmdlIGRldGFpbHMgdG8gb3V0cHV0DQogICAqLw0KICBwcml2YXRlIHdyaXRlTGluZUNoYXJnZXMoU3RyaW5nIFBVTk8sIEhhc2h0YWJsZSBlYWNoTGluZUNoYXJnZSwgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQoNCiAgICBpZiAoZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSA8ICc4NScgfHwgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSA9PSAnODUnICYmIGVhY2hMaW5lQ2hhcmdlLmdldCgiVGhpcmRQYXJ0eUNvc3RzIikgPT0gMSkgew0KICAgICAgaWYgKCghZWFjaExpbmVDaGFyZ2UuZ2V0KCJDb3N0aW5nRWxlbWVudEFtb3VudCIpLmVxdWFscygiMC4wMCIpICYmIGVhY2hMaW5lQ2hhcmdlLmdldCgiUHJpY2UiKSA9PSBudWxsKSB8fCBlYWNoTGluZUNoYXJnZS5nZXQoIlByaWNlIikgIT0gbnVsbCkgew0KICAgICAgICBTdHJpbmcgb09yZGVyTnVtYmVyID0gUFVOTzsNCiAgICAgICAgU3RyaW5nIG9MaW5lTnVtYmVyID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJQTkxJIik7DQogICAgICAgIFN0cmluZyBvU3ViTGluZU51bWJlciA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiUE5MUyIpOw0KICAgICAgICANCiAgICAgICAgU3RyaW5nIG9TZXF1ZW5jZU51bWJlciA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiU2VxdWVuY2VOdW1iZXIiKTsNCiAgICAgICAgdGVtcFRhYmxlQ2hhcmdlcy5nZXQob09yZGVyTnVtYmVyICsgb0xpbmVOdW1iZXIgKyBvU3ViTGluZU51bWJlciArIG9TZXF1ZW5jZU51bWJlcik7DQoNCiAgICAgICAgU3RyaW5nIGludlF0eSA9IHRlbXBUYWJsZUNoYXJnZXMuZ2V0KG9PcmRlck51bWJlciArIG9MaW5lTnVtYmVyICsgb1N1YkxpbmVOdW1iZXIgKyBvU2VxdWVuY2VOdW1iZXIpOw0KDQogICAgICAgIFN0cmluZyBvQ29zdGluZ0VsZW1lbnQgPSBlYWNoTGluZUNoYXJnZS5nZXQoIkNvc3RpbmdFbGVtZW50Iik7DQogICAgICAgIFN0cmluZyBvUmVjZWlwdE51bWJlciA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiUmVjZWlwdE51bWJlciIpOw0KICAgICAgICBTdHJpbmcgb0Nvc3RpbmdFbGVtZW50RGVzY3JpcHRpb24gPSBlYWNoTGluZUNoYXJnZS5nZXQoIkNvc3RpbmdFbGVtZW50RGVzY3JpcHRpb24iKTsNCiAgICAgICAgU3RyaW5nIG9DaGFyZ2VUeXBlID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJDaGFyZ2VUeXBlIik7DQogICAgICAgIFN0cmluZyBvT3BlcmF0b3IgPSBlYWNoTGluZUNoYXJnZS5nZXQoIk9wZXJhdG9yIik7DQogICAgICAgIFN0cmluZyBvSXRlbU51bWJlciA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiSXRlbU51bWJlciIpOw0KICAgICAgICBTdHJpbmcgb1RoaXJkUGFydHlDb3N0cyA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiVGhpcmRQYXJ0eUNvc3RzIik7DQogICAgICAgIFN0cmluZyBvSW52b2ljZUNvc3RzID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJJbnZvaWNlQ29zdHMiKTsNCg0KICAgICAgICBTdHJpbmcgb0N1cnJlbmN5ID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJDdXJyZW5jeSIpOw0KICAgICAgICBTdHJpbmcgb0Nvc3RpbmdFbGVtZW50QW1vdW50ID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJDb3N0aW5nRWxlbWVudEFtb3VudCIpOw0KICAgICAgICBTdHJpbmcgb0FjY0ludm9pY2VDb3N0cyA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiQWNjSW52b2ljZUNvc3RzIik7DQogICAgICAgIFN0cmluZyBvQWRqdXN0ZWRDb3N0aW5nRWxlbWVudEFtb3VudCA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiQWRqdXN0ZWRDb3N0aW5nRWxlbWVudEFtb3VudCIpOw0KICAgICAgICBTdHJpbmcgb1ZBVENvZGUgPSBlYWNoTGluZUNoYXJnZS5nZXQoIlZBVENvZGUiKTsNCiAgICAgICAgU3RyaW5nIG9DaGFyZ2VGYWN0b3IgPSBlYWNoTGluZUNoYXJnZS5nZXQoIkNoYXJnZUZhY3RvciIpOw0KICAgICAgICBTdHJpbmcgb0Ftb3VudE9wZW4gPSBlYWNoTGluZUNoYXJnZS5nZXQoIkFtb3VudE9wZW4iKTsNCiAgICAgICAgU3RyaW5nIG9BbW91bnRPcmRlcmVkID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJBbW91bnRPcmRlcmVkIik7DQogICAgICAgIFN0cmluZyBvUHJpY2UgPSBlYWNoTGluZUNoYXJnZS5nZXQoIlByaWNlIik7DQogICAgICAgIFN0cmluZyBvVW5pdCA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiVW5pdCIpOw0KICAgICAgICBTdHJpbmcgb1F1YW50aXR5T3BlbiA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiUXVhbnRpdHlPcGVuIik7DQogICAgICAgIFN0cmluZyBvUXVhbnRpdHlJbnZvaWNlZCA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiUXVhbnRpdHlJbnZvaWNlZCIpOw0KICAgICAgICBTdHJpbmcgb1F1YW50aXR5T3JkZXJlZCA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiUXVhbnRpdHlPcmRlcmVkIik7DQogICAgICAgIFN0cmluZyBvUXVhbnRpdHlSZWNlaXZlZCA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiUXVhbnRpdHlSZWNlaXZlZCIpOw0KICAgICAgICBTdHJpbmcgb0FsdGVybmF0aXZlVW5pdCA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiQWx0ZXJuYXRpdmVVbml0Iik7DQogICAgICAgIFN0cmluZyBvQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4gPSBlYWNoTGluZUNoYXJnZS5nZXQoIkFsdGVybmF0aXZlUXVhbnRpdHlPcGVuIik7DQogICAgICAgIFN0cmluZyBvQWx0ZXJuYXRpdmVQcmljZSA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiQWx0ZXJuYXRpdmVQcmljZSIpOw0KICAgICAgICBTdHJpbmcgRjJSRUxQID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJGMlJFTFAiKTsNCg0KICAgICAgICBvQW1vdW50T3BlbiA9IG9BbW91bnRPcGVuID09IG51bGwgPyBvQ29zdGluZ0VsZW1lbnRBbW91bnQgOiBvQW1vdW50T3BlbjsNCiAgICAgICAgb0Ftb3VudE9yZGVyZWQgPSBvQW1vdW50T3JkZXJlZCA9PSBudWxsID8gIjEiIDogb0Ftb3VudE9yZGVyZWQ7DQogICAgICAgIG9QcmljZSA9IG9QcmljZSA9PSBudWxsID8gb0Nvc3RpbmdFbGVtZW50QW1vdW50IDogb1ByaWNlOw0KICAgICAgICBvVW5pdCA9IG9Vbml0ID09IG51bGwgPyAiICIgOiBvVW5pdDsNCiAgICAgICAgb1F1YW50aXR5T3BlbiA9IG9RdWFudGl0eU9wZW4gPT0gbnVsbCA/ICIxIiA6IG9RdWFudGl0eU9wZW47DQogICAgICAgIG9RdWFudGl0eUludm9pY2VkID0gb1F1YW50aXR5SW52b2ljZWQgPT0gbnVsbCA/ICIgIiA6IG9RdWFudGl0eUludm9pY2VkOw0KICAgICAgICBvUXVhbnRpdHlPcmRlcmVkID0gb1F1YW50aXR5T3JkZXJlZCA9PSBudWxsID8gIiAiIDogb1F1YW50aXR5T3JkZXJlZDsNCiAgICAgICAgb1F1YW50aXR5UmVjZWl2ZWQgPSBvUXVhbnRpdHlSZWNlaXZlZCA9PSBudWxsID8gIiAiIDogb1F1YW50aXR5UmVjZWl2ZWQ7DQogICAgICAgIG9BbHRlcm5hdGl2ZVVuaXQgPSBvQWx0ZXJuYXRpdmVVbml0ID09IG51bGwgPyAiICIgOiBvQWx0ZXJuYXRpdmVVbml0Ow0KICAgICAgICBvQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4gPSBvQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4gPT0gbnVsbCA/ICIgIiA6IG9BbHRlcm5hdGl2ZVF1YW50aXR5T3BlbjsNCiAgICAgICAgb0FsdGVybmF0aXZlUHJpY2UgPSBvQWx0ZXJuYXRpdmVQcmljZSA9PSBudWxsID8gIiAiIDogb0FsdGVybmF0aXZlUHJpY2U7DQogICAgICAgIFN0cmluZyBQcmljID0gIiI7DQogICAgICAgIFN0cmluZyBBY0ludm9pY2VDb3N0ID0gRG91YmxlLnBhcnNlRG91YmxlKG9Db3N0aW5nRWxlbWVudEFtb3VudCkgLSBEb3VibGUucGFyc2VEb3VibGUob0FjY0ludm9pY2VDb3N0cykNCiAgICAgICAgU3RyaW5nIG9wZW5RdHkgPSBEb3VibGUucGFyc2VEb3VibGUocmVwUXR5KSAtIERvdWJsZS5wYXJzZURvdWJsZShpbnZRdHkpOw0KDQogICAgICAgIGlmICghb3BlblF0eS5lcXVhbHMoIjAuMCIpKSB7DQogICAgICAgICAgZG91YmxlIGNvbnZlcnRlZCA9IERvdWJsZS5wYXJzZURvdWJsZShBY0ludm9pY2VDb3N0KSAvIERvdWJsZS5wYXJzZURvdWJsZShvcGVuUXR5KTsNCg0KICAgICAgICAgIERlY2ltYWxGb3JtYXQgZGZfb2JqID0gbmV3IERlY2ltYWxGb3JtYXQoIiMuIyMjIyMjIik7DQogICAgICAgICAgUHJpYyA9IGRmX29iai5mb3JtYXQoY29udmVydGVkKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBkb3VibGUgY29udmVydGVkID0gMC4wMDAwMDANCg0KICAgICAgICAgIERlY2ltYWxGb3JtYXQgZGZfb2JqID0gbmV3IERlY2ltYWxGb3JtYXQoIiMuIyMjIyMjIik7DQogICAgICAgICAgUHJpYyA9IGRmX29iai5mb3JtYXQoY29udmVydGVkKTsNCiAgICAgICAgfQ0KICAgICAgICBkb3VibGUgb3BRdHkgPSBEb3VibGUucGFyc2VEb3VibGUocmVwUXR5KSAtIERvdWJsZS5wYXJzZURvdWJsZShpbnZRdHkpOw0KICAgICAgICANCiAgICAgICAgbG9nZ2VyLmluZm8oIm9BY2NJbnZvaWNlQ29zdHMiICsgb0FjY0ludm9pY2VDb3N0cyk7DQogICAgICAgIGxvZ2dlci5pbmZvKCJvQ2hhcmdlRmFjdG9yIiArIG9DaGFyZ2VGYWN0b3IpOw0KICAgICAgICBpZiAob3BRdHkgPiAwIHx8IG9wUXR5IDwgMCkgew0KICAgICAgICAgIGlmICgoIW9BY2NJbnZvaWNlQ29zdHMuZXF1YWxzKCIiKSB8fCAhb0FjY0ludm9pY2VDb3N0cy5lcXVhbHMoIjAuMCIpKSAmJiAhb0NoYXJnZUZhY3Rvci5lcXVhbHMoIjEiKSkgew0KICAgICAgICAgICAgbG9nZ2VyLmluZm8oImluaWZpZm5vdCB6ZXJvIik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICJMQyIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVTk8nLCBvT3JkZXJOdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBvTGluZU51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MUycsIG9TdWJMaW5lTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRFNFJywgb1NlcXVlbmNlTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRUlEJywgb0Nvc3RpbmdFbGVtZW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSUE5NJywgb1JlY2VpcHROdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09BT1UnLCBBY0ludm9pY2VDb3N0KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPQUxDJywgT3BlbkFtb3VudExvY2FsQ3VycmVuY3kpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09RT1UnLCBvcGVuUXR5KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRUxEJywgb0Nvc3RpbmdFbGVtZW50RGVzY3JpcHRpb24pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0VYVFknLCBvQ2hhcmdlVHlwZSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnV1NPUCcsIG9PcGVyYXRvcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVEhQUicsIG9UaGlyZFBhcnR5Q29zdHMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NVQ0QnLCBvQ3VycmVuY3kpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWQ1MnLCBvSW52b2ljZUNvc3RzKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDSEZDJywgb0NoYXJnZUZhY3Rvcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VWQScsIG9Db3N0aW5nRWxlbWVudEFtb3VudCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VWSicsIG9BZGp1c3RlZENvc3RpbmdFbGVtZW50QW1vdW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgb1ZBVENvZGUpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBvSXRlbU51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUCcsIG9BbW91bnRPcGVuKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9SJywgb0Ftb3VudE9yZGVyZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBQcmljKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdVTklUJywgb1VuaXQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09QUVQnLCBvUXVhbnRpdHlPcGVuKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgb1F1YW50aXR5SW52b2ljZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUT1InLCBvUXVhbnRpdHlPcmRlcmVkKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVFJWJywgb1F1YW50aXR5UmVjZWl2ZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFUnLCBvQWx0ZXJuYXRpdmVVbml0KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFFPJywgb0FsdGVybmF0aXZlUXVhbnRpdHlPcGVuKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRQJywgb0FsdGVybmF0aXZlUHJpY2UpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JFTFAnLCBGMlJFTFApOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JQUVQnLCBSZWNlaXB0UXVhbnRpdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JRQUwnLCBSZWNlaXB0UXVhbnRpdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVFJEVCcsIGVhY2hMaW5lLmdldCgnVFJEVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xXSEwnLCBlYWNoTGluZS5nZXQoJ1dITE8nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdJVE5PJywgZWFjaExpbmUuZ2V0KCdJVE5PJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUElURCcsIGVhY2hMaW5lLmdldCgnUElURCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVFQnLCBlYWNoTGluZS5nZXQoJ1BJVFQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTSVRFJywgZWFjaExpbmUuZ2V0KCdTSVRFJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0FRQScsIGVhY2hMaW5lLmdldCgnQ0FRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JKUUEnLCBlYWNoTGluZS5nZXQoJ1JKUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTRFFBJywgZWFjaExpbmUuZ2V0KCdTRFFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRQScsIGVhY2hMaW5lLmdldCgnT1JRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWUUEnLCBpbnZRdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JWUUEnLCBlYWNoTGluZS5nZXQoJ1JWUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRlFBJywgZWFjaExpbmUuZ2V0KCdDRlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FQVScsIGVhY2hMaW5lLmdldCgnT3BlblF1YW50aXR5UHJpY2VVTScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUkMnLCBlYWNoTGluZS5nZXQoJ1BVUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMQlVZJywgZWFjaExpbmUuZ2V0KCdCVVlFJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1RVTScsIGVhY2hMaW5lLmdldCgnU3RhbmRhcmRVTScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOTVMnLCBlYWNoTGluZS5nZXQoJ1VOTVMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFVNJywgZWFjaExpbmUuZ2V0KCdBbHRlcm5hdGVVTScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NXVU4nLCAiIik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTE5BTScsIGVhY2hMaW5lLmdldCgnTE5BTScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUFInLCBlYWNoTGluZS5nZXQoJ1ByaWNlUGVyUGllY2VTdGFuZGFyZFVNJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVRVCcsIGVhY2hMaW5lLmdldCgnUFVRVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUFInLCBlYWNoTGluZS5nZXQoJ0FsdGVybmF0aXZlUHJpY2UnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBpZiAoZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKS5sZW5ndGgoKSA9PSAxKSB7DQoNCiAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCAnMCcgKyBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnR1JNVCcsIGVhY2hMaW5lLmdldCgnR1JNVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xNT0QnLCBlYWNoTGluZS5nZXQoJ01PREwnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVEJywgZWFjaExpbmUuZ2V0KCdURURMJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFRFTCcsIGVhY2hMaW5lLmdldCgnVEVMMScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xQU0wnLCBlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNUJywgZWFjaExpbmUuZ2V0KCdQVVNUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE9QTicsIGVhY2hMaW5lLmdldCgnUE9QTl9FQTEzJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9SQycsIGVhY2hMaW5lLmdldCgnUk9SQycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUk4nLCBlYWNoTGluZS5nZXQoJ1JPUk4nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JMJywgZWFjaExpbmUuZ2V0KCdST1JMJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9SWCcsIGVhY2hMaW5lLmdldCgnUk9SWCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVRE8nLCBlYWNoTGluZS5nZXQoJ1NVRE8nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdGUlJDJywgZWFjaExpbmUuZ2V0KCdGUlJDJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSRScsIGVhY2hMaW5lLmdldCgnRlJSRScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FEUUEnLCBlYWNoTGluZS5nZXQoJ0FEUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUlFUJywgZWFjaExpbmUuZ2V0KCdPUlFUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUCcsIGVhY2hMaW5lLmdldCgnQW1vdW50T3BlbicpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1InLCBvQ29zdGluZ0VsZW1lbnRBbW91bnQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBQcmljKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdVTklUJywgZWFjaExpbmUuZ2V0KCdBbHRlcm5hdGVVTScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09QUVQnLCBlYWNoTGluZS5nZXQoJ09wZW5RdWFudGl0eVN0YW5kYXJkVU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgZWFjaExpbmUuZ2V0KCdJbnZvaWNlZFF1YW50aXR5U3RhbmRhcmRVTScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUT1InLCBlYWNoTGluZS5nZXQoJ09yZGVyZWRRdWFudGl0eVN0YW5kYXJkVU0nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUUlYnLCBlYWNoTGluZS5nZXQoJ1JlY2VpdmVkUXVhbnRpdHlTdGFuZGFyZFVNJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUVScsIGVhY2hMaW5lLmdldCgnQWx0ZXJuYXRlVU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFFPJywgZWFjaExpbmUuZ2V0KCdBbHRlcm5hdGl2ZVF1YW50aXR5T3BlbicpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFAnLCBlYWNoTGluZS5nZXQoJ0FsdGVybmF0aXZlUHJpY2UnKS50b1N0cmluZygpKTsNCg0KICAgICAgICAgICAgbWkud3JpdGUoKTsNCg0KICAgICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgIkxDIik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVOTycsIG9PcmRlck51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MSScsIG9MaW5lTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgb1N1YkxpbmVOdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NEU0UnLCBvU2VxdWVuY2VOdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFSUQnLCBvQ29zdGluZ0VsZW1lbnQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JQTk0nLCBvUmVjZWlwdE51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT0FPVScsIEFjSW52b2ljZUNvc3QpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09BTEMnLCBPcGVuQW1vdW50TG9jYWxDdXJyZW5jeSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FPVScsIG9wZW5RdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFTEQnLCBvQ29zdGluZ0VsZW1lbnREZXNjcmlwdGlvbik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRVhUWScsIG9DaGFyZ2VUeXBlKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdXU09QJywgb09wZXJhdG9yKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdUSFBSJywgb1RoaXJkUGFydHlDb3N0cyk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ1VDRCcsIG9DdXJyZW5jeSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVZDUycsIG9JbnZvaWNlQ29zdHMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NIRkMnLCBvQ2hhcmdlRmFjdG9yKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRVZBJywgb0Nvc3RpbmdFbGVtZW50QW1vdW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRVZKJywgb0FkanVzdGVkQ29zdGluZ0VsZW1lbnRBbW91bnQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCBvVkFUQ29kZSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVROTycsIG9JdGVtTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgb0Ftb3VudE9wZW4pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1InLCBvQW1vdW50T3JkZXJlZCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIFByaWMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBvVW5pdCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIG9RdWFudGl0eU9wZW4pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUSVYnLCBvUXVhbnRpdHlJbnZvaWNlZCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIG9RdWFudGl0eU9yZGVyZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUUlYnLCBvUXVhbnRpdHlSZWNlaXZlZCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUVScsIG9BbHRlcm5hdGl2ZVVuaXQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBvQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFAnLCBvQWx0ZXJuYXRpdmVQcmljZSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkVMUCcsIEYyUkVMUCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlBRVCcsIFJlY2VpcHRRdWFudGl0eSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlFBTCcsIFJlY2VpcHRRdWFudGl0eSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MSScsIGVhY2hMaW5lLmdldCgnUE5MSScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdUUkRUJywgZWFjaExpbmUuZ2V0KCdUUkRUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFdITCcsIGVhY2hMaW5lLmdldCgnV0hMTycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBlYWNoTGluZS5nZXQoJ0lUTk8nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQSVREJywgZWFjaExpbmUuZ2V0KCdQSVREJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUElUVCcsIGVhY2hMaW5lLmdldCgnUElUVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NJVEUnLCBlYWNoTGluZS5nZXQoJ1NJVEUnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDQVFBJywgZWFjaExpbmUuZ2V0KCdDQVFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkpRQScsIGVhY2hMaW5lLmdldCgnUkpRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NEUUEnLCBlYWNoTGluZS5nZXQoJ1NEUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUlFBJywgZWFjaExpbmUuZ2V0KCdPUlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVZRQScsIGludlF0eSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlZRQScsIGVhY2hMaW5lLmdldCgnUlZRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NGUUEnLCBlYWNoTGluZS5nZXQoJ0NGUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUVBVJywgZWFjaExpbmUuZ2V0KCdPcGVuUXVhbnRpdHlQcmljZVVNJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVSQycsIGVhY2hMaW5lLmdldCgnUFVSQycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xCVVknLCBlYWNoTGluZS5nZXQoJ0JVWUUnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTVFVNJywgZWFjaExpbmUuZ2V0KCdTdGFuZGFyZFVNJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5NUycsIGVhY2hMaW5lLmdldCgnVU5NUycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVU0nLCBlYWNoTGluZS5nZXQoJ0FsdGVybmF0ZVVNJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ1dVTicsICIiKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMTkFNJywgZWFjaExpbmUuZ2V0KCdMTkFNJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVQUicsIGVhY2hMaW5lLmdldCgnUHJpY2VQZXJQaWVjZVN0YW5kYXJkVU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVVFUJywgZWFjaExpbmUuZ2V0KCdQVVFUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxQUicsIGVhY2hMaW5lLmdldCgnQWx0ZXJuYXRpdmVQcmljZScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIGlmIChlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpLmxlbmd0aCgpID09IDEpIHsNCg0KICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsICcwJyArIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdHUk1UJywgZWFjaExpbmUuZ2V0KCdHUk1UJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTE1PRCcsIGVhY2hMaW5lLmdldCgnTU9ETCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xURUQnLCBlYWNoTGluZS5nZXQoJ1RFREwnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVMJywgZWFjaExpbmUuZ2V0KCdURUwxJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFBTTCcsIGVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xQU1QnLCBlYWNoTGluZS5nZXQoJ1BVU1QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQT1BOJywgZWFjaExpbmUuZ2V0KCdQT1BOX0VBMTMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JDJywgZWFjaExpbmUuZ2V0KCdST1JDJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STicsIGVhY2hMaW5lLmdldCgnUk9STicpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUkwnLCBlYWNoTGluZS5nZXQoJ1JPUkwnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JYJywgZWFjaExpbmUuZ2V0KCdST1JYJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1VETycsIGVhY2hMaW5lLmdldCgnU1VETycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0ZSUkMnLCBlYWNoTGluZS5nZXQoJ0ZSUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdGUlJFJywgZWFjaExpbmUuZ2V0KCdGUlJFJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQURRQScsIGVhY2hMaW5lLmdldCgnQURRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09SUVQnLCBlYWNoTGluZS5nZXQoJ09SUVQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgZWFjaExpbmUuZ2V0KCdBbW91bnRPcGVuJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUicsIG9Db3N0aW5nRWxlbWVudEFtb3VudCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIFByaWMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBlYWNoTGluZS5nZXQoJ0FsdGVybmF0ZVVNJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIGVhY2hMaW5lLmdldCgnT3BlblF1YW50aXR5U3RhbmRhcmRVTScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUSVYnLCBlYWNoTGluZS5nZXQoJ0ludm9pY2VkUXVhbnRpdHlTdGFuZGFyZFVNJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIGVhY2hMaW5lLmdldCgnT3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVTScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRSVicsIGVhY2hMaW5lLmdldCgnUmVjZWl2ZWRRdWFudGl0eVN0YW5kYXJkVU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRVJywgZWFjaExpbmUuZ2V0KCdBbHRlcm5hdGVVTScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBlYWNoTGluZS5nZXQoJ0FsdGVybmF0aXZlUXVhbnRpdHlPcGVuJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUUCcsIGVhY2hMaW5lLmdldCgnQWx0ZXJuYXRpdmVQcmljZScpLnRvU3RyaW5nKCkpOw0KDQogICAgICAgICAgICBtaS53cml0ZSgpOw0KDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQp9"}}}