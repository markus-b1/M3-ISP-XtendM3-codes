{"utilities":{},"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"ISPGetSuppliers":{"sourceUuid":"2a01a64a-904e-40cf-814d-6eed84d468ea","name":"ISPGetSuppliers","program":"EXT001MI","description":"ALL_MI_0001_GetSuppliers","active":true,"multi":true,"modified":1678269326406,"modifiedBy":"APE_SMA","outputFields":[{"name":"RCTP","description":"Record Type","length":1,"mandatory":false,"type":"A"},{"name":"DIVI","description":"division","length":3,"mandatory":false,"type":"A"},{"name":"SUNO","description":"supplier","length":10,"mandatory":false,"type":"A"},{"name":"SUNM","description":"supplier name","length":36,"mandatory":false,"type":"A"},{"name":"PHNO","description":"telephone number 1","length":16,"mandatory":false,"type":"A"},{"name":"TEPY","description":"payment terms","length":3,"mandatory":false,"type":"A"},{"name":"TECD","description":"cash discount term","length":3,"mandatory":false,"type":"A"},{"name":"PYME","description":"payment method - accounts payable","length":3,"mandatory":false,"type":"A"},{"name":"VTCD","description":"VAT code","length":2,"mandatory":false,"type":"N"},{"name":"CSCD","description":"country","length":3,"mandatory":false,"type":"A"},{"name":"STAT","description":"status","length":2,"mandatory":false,"type":"A"},{"name":"VRNO","description":"VAT registration number","length":16,"mandatory":false,"type":"A"},{"name":"EMAL","description":"email address","length":60,"mandatory":false,"type":"A"},{"name":"PRSU","description":"payee","length":10,"mandatory":false,"type":"A"},{"name":"SUCM","description":"supplier computer communication address","length":20,"mandatory":false,"type":"A"},{"name":"ADR1","description":"address line 1","length":36,"mandatory":false,"type":"A"},{"name":"ADR2","description":"address line 2","length":36,"mandatory":false,"type":"A"},{"name":"ADR3","description":"address line 3","length":36,"mandatory":false,"type":"A"},{"name":"ADR4","description":"address line 4","length":36,"mandatory":false,"type":"A"},{"name":"ASCD","description":"CSCD Address","length":3,"mandatory":false,"type":"A"},{"name":"PONO","description":"Postal code","length":10,"mandatory":false,"type":"A"},{"name":"EDES","description":"place","length":10,"mandatory":false,"type":"A"},{"name":"TOWN","description":"city","length":20,"mandatory":false,"type":"A"},{"name":"ECAR","description":"state","length":2,"mandatory":false,"type":"A"},{"name":"IAPC","description":"invoice approval condition 1","length":1,"mandatory":false,"type":"N"},{"name":"BDIV","description":"Bank Division","length":3,"mandatory":false,"type":"A"},{"name":"BKID","description":"bank account identity","length":5,"mandatory":false,"type":"A"},{"name":"BAF1","description":"bank account field 1","length":15,"mandatory":false,"type":"A"},{"name":"FIAN","description":"account number at financial institution","length":25,"mandatory":false,"type":"A"},{"name":"IBAN","description":"international bank account number","length":34,"mandatory":false,"type":"A"},{"name":"CBPY","description":"bank priority","length":2,"mandatory":false,"type":"N"},{"name":"BKST","description":"Bank Status","length":2,"mandatory":false,"type":"A"}],"inputFields":[{"name":"SUNO","description":"supplier","length":10,"mandatory":false,"type":"A"},{"name":"DIVI","description":"Division","length":3,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{}}},"sources":{"2a01a64a-904e-40cf-814d-6eed84d468ea":{"uuid":"2a01a64a-904e-40cf-814d-6eed84d468ea","updated":1678269307499,"updatedBy":"APE_SMA","created":1671807205407,"createdBy":"RLO","apiVersion":"0.14","beVersion":"16.0.0.20221210044646.5","codeHash":"F0205D42CCD2F6C0CD7550FECE979A918B6E852443654149A008307885741ABF","code":"LyoqDQogKiBOYW1lOiBJU1BHZXRTdXBwbGllcnMNCiAqIFR5cGUgOiBFeHRlbmRNM0FQSQ0KICogRGVzY3JpcHRpb246IFNlbmQgTTMgU3VwcGxpZXIgZGV0YWlscyAoQmFzaWMgZGV0YWlscywgYWRkcmVzcyBkZXRhaWxzLCBlbWFpbCBhZGRyZXNzLCBCYW5rIERldGFpbHMpIHRvIDNyZCBwYXJ0eSBhcHBsaWNhdGlvbg0KICogKg0KICogQ3JlYXRlZCBCeTogQXBleCBzeXN0ZW1zDQogKiBBdXRob3I6IFNoYXNoYW5rIE1hbGFsaSwgQW5naGVsbyBGZXJuYW5kZXoNCiAqDQogKiBIaXN0b3J5Og0KICogMjAyMi0wNS0xOTogQmFzZSBzY3JpcHQgY3JlYXRlZA0KICogMjAyMjExMTIgQ29kZSBjbGVhbiB1cA0KICoNCiAqLw0KDQpwdWJsaWMgY2xhc3MgSVNQR2V0U3VwcGxpZXJzIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7DQogIHByaXZhdGUgZmluYWwgTUlBUEkgbWk7DQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtOw0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyOw0KICBwcml2YXRlIGZpbmFsIExvZ2dlckFQSSBsb2dnZXI7DQogIHByaXZhdGUgU3RyaW5nIGRpdmlzaW9uTGlzdCA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBzdGF0dXNMaXN0ID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIGFjdGl2ZVN1cHBsaWVyID0gIiINCiAgcHJpdmF0ZSBTdHJpbmcgYWN0aXZlU3VwcGxpZXJOYW1lID0gIiINCiAgcHJpdmF0ZSBTdHJpbmcgQ09OTyA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBGUlNVID0gIiI7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgU3RyaW5nID4gYmFua0FjY291bnRzdGF0dXNMaXN0ID0gbnVsbDsNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBTdHJpbmcgPiBleGNsdWRlZEFjY291bnRzTGlzdCA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgU3RyaW5nID4gYWRkcmVzc1R5cGVzTGlzdCA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgU3RyaW5nID4gYWRkcmVzc0lkc0xpc3QgPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IHN1cHBsaWVyTGlzdCA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gYWRkcmVzc0xpc3QgPSBudWxsOw0KICBwcml2YXRlIFN0cmluZyBTVEFUID0gIiIsIFBITk8gPSAiIiwgQ1NDRCA9ICIiLCBWUk5PID0gIiIsIFNVQ00gPSAiIiwgVlRDRCA9ICIiLCBURVBZID0gIiIsIFBZTUUgPSAiIiwgUFJTVSA9ICIiLCBURUNEID0gIiIsIElBUEMgPSAiIiwgRU1BTCA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBBRFIxID0gIiIsIEFEUjIgPSAiIiwgQURSMyA9ICIiLCBBRFI0ID0gIiIsIFRPV04gPSAiIiwgRUNBUiA9ICIiLCBQT05PID0gIiIsIEFTQ0QgPSAiIiwgRURFUyA9ICIiOw0KICBwcml2YXRlIGJvb2xlYW4gZW5kT2ZMaXN0ID0gZmFsc2U7DQoNCiAgcHVibGljIElTUEdldFN1cHBsaWVycyhNSUFQSSBtaSwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBNSUNhbGxlckFQSSBtaUNhbGxlciwgTG9nZ2VyQVBJIGxvZ2dlcikgew0KICAgIHRoaXMubWkgPSBtaTsNCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtOw0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcjsNCiAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjsNCiAgfQ0KDQogIHB1YmxpYyB2b2lkIG1haW4oKSB7DQogICAgZGl2aXNpb25MaXN0ID0gbWkuaW5EYXRhLmdldCgnRElWSScpOw0KICAgIENPTk8gPSBwcm9ncmFtLkxEQVpELmdldCgnQ09OTycpOw0KICAgIEZSU1UgPSBtaS5pbkRhdGEuZ2V0KCdTVU5PJyk7DQogICAgcG9wdWxhdGVDb250cm9sUHJvcGVydGllcygpOw0KICAgIGdhdGhlckFsbFN1cHBsaWVycygpOw0KICAgIGlmIChzdXBwbGllckxpc3Quc2l6ZSA8IDIwMCkgew0KICAgICAgZW5kT2ZMaXN0ID0gdHJ1ZTsNCiAgICB9DQogICAgaWYgKCFGUlNVLnRyaW0oKS5pc0VtcHR5KCkpIHsNCiAgICAgIHN1cHBsaWVyTGlzdC5yZW1vdmUoMCk7DQogICAgfQ0KICAgIGlmIChzdXBwbGllckxpc3Quc2l6ZSA+IDIwMCkgew0KICAgICAgc3VwcGxpZXJMaXN0LnNpemUgPSAyMDA7DQogICAgfQ0KDQogICAgc3VwcGxpZXJMaXN0LmVhY2ggew0KICAgICAgdmFsdWUgLT4NCiAgICAgICAgSGFzaHRhYmxlIGVhY2hTdXBwbGllciA9IHZhbHVlOw0KICAgICAgY2xlYXJTdXBwbGllckRldGFpbHNWYXJpYWJsZXMoKTsNCiAgICAgIGdldFN1cHBsaWVyRGV0YWlscyhlYWNoU3VwcGxpZXIpOw0KICAgICAgZ2V0U3VwcGxpZXJFbWFpbChlYWNoU3VwcGxpZXIpOw0KICAgICAgZ2V0U3VwcGxpZXJBZGRyZXNzKGVhY2hTdXBwbGllcik7DQoNCiAgICAgIHNldGFkZHJlc3MoKTsNCg0KICAgICAgd3JpdGVTdXBwbGllclRvT3V0cHV0KGVhY2hTdXBwbGllcik7DQogICAgICBnZXRCYW5rRGV0YWlscyhlYWNoU3VwcGxpZXIpOw0KDQogICAgfQ0KICAgIGlmIChlbmRPZkxpc3QpIHsNCiAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgJ0wnKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdTVU5PJywgJyUlRU9GJSUnKTsNCiAgICAgIG1pLndyaXRlKCk7DQogICAgfQ0KDQogIH0NCg0KICAvKioNCiAgICogR2V0IENvbnRyb2wgcHJvcGVyaWVzIGZyb20gQ1VHRVgxDQogICAqIA0KICAgKi8NCiAgcHVibGljIHBvcHVsYXRlQ29udHJvbFByb3BlcnRpZXMoKSB7DQogICAgYmFua0FjY291bnRzdGF0dXNMaXN0ID0gbmV3IEFycmF5TGlzdCA8IFN0cmluZyA+ICgpOw0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZTsNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIFN0cmluZyBiYW5rQWNjb3VudFN0YXR1c2VzID0gcmVzdWx0cy5nZXQoJ0ExMjEnKTsNCiAgICAgICAgU3RyaW5nW10gYmFua0FjY291bnRTdGF0dXNBcnJheSA9IGJhbmtBY2NvdW50U3RhdHVzZXMuc3BsaXQoJzsnKTsNCiAgICAgICAgYmFua0FjY291bnRTdGF0dXNBcnJheS5lYWNoIHsNCiAgICAgICAgICB2YWx1ZSAtPg0KICAgICAgICAgICAgU3RyaW5nIGJhbmtBY2NvdW50U3RhdHVzID0gdmFsdWU7DQogICAgICAgICAgYmFua0FjY291bnRzdGF0dXNMaXN0LmFkZChiYW5rQWNjb3VudFN0YXR1cy50cmltKCkpOw0KDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLmVycm9yKCJQbGVhc2UgbWFpbnRhaW4gcmVjb3JkIGluIENVR0VYMSBmb3IgQkFOS0FDQ09VTlRTVEFUVVMiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJGSUxFIjogIklTUEZJTEUiLCAiUEswMSI6ICJHRVRTVVBQTElFUlMiLCAiUEswMiI6ICJCQU5LQUNDT1VOVFNUQVRVUyJdOw0KICAgIG1pQ2FsbGVyLmNhbGwoIkNVU0VYVE1JIiwgIkdldEZpZWxkVmFsdWUiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCg0KICAgIGV4Y2x1ZGVkQWNjb3VudHNMaXN0ID0gbmV3IEFycmF5TGlzdCA8IFN0cmluZyA+ICgpOw0KICAgIGRlZiBjYWxsYmFjazIgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIFN0cmluZyBleGNsdWRlZEFjY291bnRzID0gcmVzdWx0cy5nZXQoJ0ExMjEnKTsNCiAgICAgICAgU3RyaW5nW10gZXhjbHVkZWRBY2NvdW50c0FycmF5ID0gZXhjbHVkZWRBY2NvdW50cy5zcGxpdCgnOycpOw0KICAgICAgICBleGNsdWRlZEFjY291bnRzQXJyYXkuZWFjaCB7DQogICAgICAgICAgdmFsdWUgLT4NCiAgICAgICAgICAgIFN0cmluZyBleGNsdWRlZEFjY291bnQgPSB2YWx1ZTsNCiAgICAgICAgICBleGNsdWRlZEFjY291bnRzTGlzdC5hZGQoZXhjbHVkZWRBY2NvdW50KTsNCg0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiUGxlYXNlIG1haW50YWluIHJlY29yZCBpbiBDVUdFWDEgZm9yIEVYQ0xVREVEQUNDT1VOVFMiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zMiA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUU1VQUExJRVJTIiwgIlBLMDIiOiAiRVhDTFVERURBQ0NPVU5UUyJdOw0KICAgIG1pQ2FsbGVyLmNhbGwoIkNVU0VYVE1JIiwgIkdldEZpZWxkVmFsdWUiLCBwYXJhbXMyLCBjYWxsYmFjazIpOw0KDQogICAgYWRkcmVzc1R5cGVzTGlzdCA9IG5ldyBBcnJheUxpc3QgPCBTdHJpbmcgPiAoKTsNCiAgICBkZWYgY2FsbGJhY2szID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBTdHJpbmcgYWRkcmVzc1R5cGVzID0gcmVzdWx0cy5nZXQoJ0ExMjEnKTsNCiAgICAgICAgU3RyaW5nW10gYWRkcmVzc1R5cGVzQXJyYXkgPSBhZGRyZXNzVHlwZXMuc3BsaXQoJzsnKTsNCiAgICAgICAgYWRkcmVzc1R5cGVzQXJyYXkuZWFjaCB7DQogICAgICAgICAgdmFsdWUgLT4NCiAgICAgICAgICAgIFN0cmluZyBhZGRyZXNzVHlwZSA9IHZhbHVlOw0KICAgICAgICAgIGFkZHJlc3NUeXBlc0xpc3QuYWRkKGFkZHJlc3NUeXBlKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkuZXJyb3IoIlBsZWFzZSBtYWludGFpbiByZWNvcmQgaW4gQ1VHRVgxIGZvciBBRERSRVNTVFlQRSIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXMzID0gWyJGSUxFIjogIklTUEZJTEUiLCAiUEswMSI6ICJHRVRTVVBQTElFUlMiLCAiUEswMiI6ICJBRERSRVNTVFlQRSJdOw0KICAgIG1pQ2FsbGVyLmNhbGwoIkNVU0VYVE1JIiwgIkdldEZpZWxkVmFsdWUiLCBwYXJhbXMzLCBjYWxsYmFjazMpOw0KDQogICAgYWRkcmVzc0lkc0xpc3QgPSBuZXcgQXJyYXlMaXN0IDwgU3RyaW5nID4gKCk7DQogICAgZGVmIGNhbGxiYWNrNCA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgU3RyaW5nIGFkZHJlc3NJZHMgPSByZXN1bHRzLmdldCgnQTEyMScpOw0KICAgICAgICBTdHJpbmdbXSBhZGRyZXNzSWRzQXJyYXkgPSBhZGRyZXNzSWRzLnNwbGl0KCc7Jyk7DQogICAgICAgIGFkZHJlc3NJZHNBcnJheS5lYWNoIHsNCiAgICAgICAgICB2YWx1ZSAtPg0KICAgICAgICAgICAgU3RyaW5nIGFkZHJlc3NJZCA9IHZhbHVlOw0KICAgICAgICAgIGFkZHJlc3NJZHNMaXN0LmFkZChhZGRyZXNzSWQpOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiUGxlYXNlIG1haW50YWluIHJlY29yZCBpbiBDVUdFWDEgZm9yIEFERFJFU1NJRCIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXM0ID0gWyJGSUxFIjogIklTUEZJTEUiLCAiUEswMSI6ICJHRVRTVVBQTElFUlMiLCAiUEswMiI6ICJBRERSRVNTSUQiXTsNCiAgICBtaUNhbGxlci5jYWxsKCJDVVNFWFRNSSIsICJHZXRGaWVsZFZhbHVlIiwgcGFyYW1zNCwgY2FsbGJhY2s0KTsNCiAgfQ0KDQogIC8qKg0KICAgKiBMaXN0IGFsbCBTdXBwbGllcnMgdXNpbmcgQ1JTNjIwTUkuTHN0U3VwcGxpZXJzDQogICAqIA0KICAgKi8NCiAgcHVibGljIGdhdGhlckFsbFN1cHBsaWVycygpIHsNCiAgICBzdXBwbGllckxpc3QgPSBuZXcgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gKCk7DQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgU3RyaW5nIFNVTk8gPSByZXN1bHRzLmdldCgnU1VOTycpOw0KICAgICAgICBTdHJpbmcgU1VOTSA9IHJlc3VsdHMuZ2V0KCdTVU5NJyk7DQogICAgICAgIEhhc2h0YWJsZSB0ZW1wVGFibGUgPSBuZXcgSGFzaHRhYmxlKCk7DQogICAgICAgIHRlbXBUYWJsZS5wdXQoJ1NVTk8nLCBTVU5PLnRyaW0oKSk7DQogICAgICAgIHRlbXBUYWJsZS5wdXQoJ1NVTk0nLCBTVU5NLnRyaW0oKSk7DQogICAgICAgIHN1cHBsaWVyTGlzdC5hZGQodGVtcFRhYmxlKTsNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICdGUlNVJzogRlJTVV07DQogICAgbWlDYWxsZXIuc2V0TGlzdE1heFJlY29yZHMoMjAxKTsNCiAgICBtaUNhbGxlci5jYWxsKCJDUlM2MjBNSSIsICJMc3RTdXBwbGllcnMiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCiAgfQ0KDQogIHB1YmxpYyBjbGVhclN1cHBsaWVyRGV0YWlsc1ZhcmlhYmxlcygpIHsNCiAgICBTVEFUID0gIiI7DQogICAgUEhOTyA9ICIiOw0KICAgIENTQ0QgPSAiIjsNCiAgICBWUk5PID0gIiI7DQogICAgU1VDTSA9ICIiOw0KICAgIFZUQ0QgPSAiIjsNCiAgICBURVBZID0gIiI7DQogICAgUFlNRSA9ICIiOw0KICAgIFBSU1UgPSAiIjsNCiAgICBURUNEID0gIiI7DQogICAgSUFQQyA9ICIiOw0KICAgIEVNQUwgPSAiIjsNCiAgICBBRFIxID0gIiI7DQogICAgQURSMiA9ICIiOw0KICAgIEFEUjMgPSAiIjsNCiAgICBBRFI0ID0gIiI7DQogICAgVE9XTiA9ICIiOw0KICAgIEVDQVIgPSAiIjsNCiAgICBQT05PID0gIiI7DQogICAgQVNDRCA9ICIiOw0KICAgIEVERVMgPSAiIjsNCiAgfQ0KDQogIC8qKg0KICAgKiBHZXQgQmFzaWMgZGV0YWlscyBmb3IgZWFjaCBzdXBwbGllcg0KICAgKiANCiAgICovDQogIHB1YmxpYyBnZXRTdXBwbGllckRldGFpbHMoSGFzaHRhYmxlIGVhY2hTdXBwbGllcikgew0KICAgIFN0cmluZyBTVU5PID0gZWFjaFN1cHBsaWVyLmdldCgnU1VOTycpOw0KDQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgU1RBVCA9IHJlc3VsdHMuZ2V0KCdTVEFUJyk7DQogICAgICAgIFBITk8gPSByZXN1bHRzLmdldCgnUEhOTycpOw0KICAgICAgICBDU0NEID0gcmVzdWx0cy5nZXQoJ0NTQ0QnKTsNCiAgICAgICAgVlJOTyA9IHJlc3VsdHMuZ2V0KCdWUk5PJyk7DQogICAgICAgIFNVQ00gPSByZXN1bHRzLmdldCgnU1VDTScpOw0KICAgICAgICBWVENEID0gcmVzdWx0cy5nZXQoJ1ZUQ0QnKTsNCiAgICAgICAgVEVQWSA9IHJlc3VsdHMuZ2V0KCdURVBZJyk7DQogICAgICAgIFBZTUUgPSByZXN1bHRzLmdldCgnUFlNRScpOw0KICAgICAgICBQUlNVID0gcmVzdWx0cy5nZXQoJ1BSU1UnKSAhPSBudWxsICYmICFyZXN1bHRzLmdldCgnUFJTVScpLnRyaW0oKS5pc0JsYW5rKCkgPyByZXN1bHRzLmdldCgnUFJTVScpIDogU1VOTzsNCiAgICAgICAgVEVDRCA9IHJlc3VsdHMuZ2V0KCdURUNEJyk7DQogICAgICAgIElBUEMgPSByZXN1bHRzLmdldCgnSUFQQycpOw0KDQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLCAiU1VOTyI6IFNVTk9dOw0KICAgIA0KICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzYyME1JIiwgIkdldEJhc2ljRGF0YSIsIHBhcmFtcywgY2FsbGJhY2spOw0KICB9DQoNCiAgLyoqDQogICAqIEdldCBlbWFpbCBhZGRyZXNzIGZvciBlYWNoIHN1cHBsaWVyDQogICAqIA0KICAgKi8NCiAgcHVibGljIGdldFN1cHBsaWVyRW1haWwoSGFzaHRhYmxlIGVhY2hTdXBwbGllcikgew0KICAgIFN0cmluZyBTVU5PID0gZWFjaFN1cHBsaWVyLmdldCgnU1VOTycpOw0KDQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgRU1BTCA9IHJlc3VsdHMuZ2V0KCdFTUFMJyk7DQoNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiRU1UUCI6ICIwMiIsICJFTUtZIjogU1VOT107DQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTMTExTUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjayk7DQogIH0NCg0KICAvKioNCiAgICogRGVwZW5kIHVwb24gY29udHJvbCBwcm9wZXJ0eSAsIGdldCBzdXBwbGllciBhZGRyZXNzIGRldGFpbHMNCiAgICogDQogICAqLw0KICBwdWJsaWMgZ2V0U3VwcGxpZXJBZGRyZXNzKEhhc2h0YWJsZSBlYWNoU3VwcGxpZXIpIHsNCiAgICBTdHJpbmcgU1VOTyA9IGVhY2hTdXBwbGllci5nZXQoJ1NVTk8nKTsNCg0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZTsNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQoNCiAgICAgICAgU3RyaW5nIEFEVEUgPSAiIjsNCiAgICAgICAgU3RyaW5nIEFESUQgPSAiIjsNCiAgICAgICAgQURURSA9IHJlc3VsdHMuZ2V0KCdBRFRFJyk7DQogICAgICAgIEFESUQgPSByZXN1bHRzLmdldCgnQURJRCcpOw0KICAgICAgICBBRFIxID0gcmVzdWx0cy5nZXQoJ0FEUjEnKTsNCiAgICAgICAgQURSMiA9IHJlc3VsdHMuZ2V0KCdBRFIyJyk7DQogICAgICAgIEFEUjMgPSByZXN1bHRzLmdldCgnQURSMycpOw0KICAgICAgICBBRFI0ID0gcmVzdWx0cy5nZXQoJ0FEUjQnKTsNCiAgICAgICAgVE9XTiA9IHJlc3VsdHMuZ2V0KCdUT1dOJyk7DQogICAgICAgIEVDQVIgPSByZXN1bHRzLmdldCgnRUNBUicpOw0KICAgICAgICBQT05PID0gcmVzdWx0cy5nZXQoJ1BPTk8nKTsNCiAgICAgICAgQVNDRCA9IHJlc3VsdHMuZ2V0KCdDU0NEJyk7DQogICAgICAgIEVERVMgPSByZXN1bHRzLmdldCgnRURFUycpOw0KDQogICAgICAgIEhhc2h0YWJsZSB0ZW1wVGFibGUgPSBuZXcgSGFzaHRhYmxlKCk7DQogICAgICAgIHRlbXBUYWJsZS5wdXQoJ0FEVEUnLCBBRFRFKTsNCiAgICAgICAgdGVtcFRhYmxlLnB1dCgnQURJRCcsIEFESUQpOw0KICAgICAgICB0ZW1wVGFibGUucHV0KCdBRFIxJywgQURSMSk7DQogICAgICAgIHRlbXBUYWJsZS5wdXQoJ0FEUjInLCBBRFIyKTsNCiAgICAgICAgdGVtcFRhYmxlLnB1dCgnQURSMycsIEFEUjMpOw0KICAgICAgICB0ZW1wVGFibGUucHV0KCdBRFI0JywgQURSNCk7DQogICAgICAgIHRlbXBUYWJsZS5wdXQoJ1RPV04nLCBUT1dOKTsNCiAgICAgICAgdGVtcFRhYmxlLnB1dCgnRUNBUicsIEVDQVIpOw0KICAgICAgICB0ZW1wVGFibGUucHV0KCdQT05PJywgUE9OTyk7DQogICAgICAgIHRlbXBUYWJsZS5wdXQoJ0NTQ0QnLCBDU0NEKTsNCiAgICAgICAgdGVtcFRhYmxlLnB1dCgnRURFUycsIEVERVMpOw0KICAgICAgICBhZGRyZXNzTGlzdC5hZGQodGVtcFRhYmxlKTsNCg0KICAgICAgICAvKmlmKGFkZHJlc3NUeXBlc0xpc3QuY29udGFpbnMoQURURS50cmltKCkpICYmIGFkZHJlc3NJZHNMaXN0LmNvbnRhaW5zKEFESUQudHJpbSgpKSl7DQogICAgICAgICAgIEFEUjE9cmVzdWx0cy5nZXQoJ0FEUjEnKTsNCiAgICAgICAgICAgQURSMj1yZXN1bHRzLmdldCgnQURSMicpOw0KICAgICAgICAgICBBRFIzPXJlc3VsdHMuZ2V0KCdBRFIzJyk7DQogICAgICAgICAgIEFEUjQ9cmVzdWx0cy5nZXQoJ0FEUjQnKTsNCiAgICAgICAgICAgVE9XTj1yZXN1bHRzLmdldCgnVE9XTicpOw0KICAgICAgICAgICBFQ0FSPXJlc3VsdHMuZ2V0KCdFQ0FSJyk7DQogICAgICAgICAgIFBPTk89cmVzdWx0cy5nZXQoJ1BPTk8nKTsgDQogICAgICAgICAgIEFTQ0Q9cmVzdWx0cy5nZXQoJ0NTQ0QnKTsNCiAgICAgICAgICAgRURFUz1yZXN1bHRzLmdldCgnRURFUycpOw0KICAgICAgICB9ICovDQoNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiU1VOTyI6IFNVTk9dOw0KICAgIG1pQ2FsbGVyLnNldExpc3RNYXhSZWNvcmRzKDUwKTsNCiAgICBtaUNhbGxlci5jYWxsKCJDUlM2MjBNSSIsICJMc3RBZGRyZXNzZXMiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCiAgfQ0KDQogIHB1YmxpYyBzZXRhZGRyZXNzKCkgew0KICAgIGFkZHJlc3NMaXN0LmVhY2ggew0KICAgICAgdmFsdWUgLT4NCiAgICAgICAgSGFzaHRhYmxlIGVhY2hhZGRyZXNzTGlzdCA9IHZhbHVlOw0KICAgICAgc2V0QWRkcmVzc0RldGFpbHMoZWFjaGFkZHJlc3NMaXN0KTsNCiAgICB9DQogIH0NCg0KICAvKiBzZXQgdGhlIGFkZHJlc3MgZGV0YWlscyBpbiBvdXRwdXQgdmVyaWFibGVzICovDQoNCiAgcHVibGljIHNldEFkZHJlc3NEZXRhaWxzKEhhc2h0YWJsZSBlYWNoYWRkcmVzc0xpc3QpIHsNCg0KICAgIFN0cmluZyB0ZW1wQURURSA9IGVhY2hhZGRyZXNzTGlzdC5nZXQoJ0FEVEUnKTsNCiAgICBTdHJpbmcgdGVtcEFESUQgPSBlYWNoYWRkcmVzc0xpc3QuZ2V0KCdBRElEJyk7DQogICAgU3RyaW5nIHRlbXBBRFIxID0gZWFjaGFkZHJlc3NMaXN0LmdldCgnQURSMScpOw0KICAgIFN0cmluZyB0ZW1wQURSMiA9IGVhY2hhZGRyZXNzTGlzdC5nZXQoJ0FEUjInKTsNCiAgICBTdHJpbmcgdGVtcEFEUjMgPSBlYWNoYWRkcmVzc0xpc3QuZ2V0KCdBRFIzJyk7DQogICAgU3RyaW5nIHRlbXBBRFI0ID0gZWFjaGFkZHJlc3NMaXN0LmdldCgnQURSNCcpOw0KICAgIFN0cmluZyB0ZW1wVE9XTiA9IGVhY2hhZGRyZXNzTGlzdC5nZXQoJ1RPV04nKTsNCiAgICBTdHJpbmcgdGVtcEVDQVIgPSBlYWNoYWRkcmVzc0xpc3QuZ2V0KCdFQ0FSJyk7DQogICAgU3RyaW5nIHRlbXBQT05PID0gZWFjaGFkZHJlc3NMaXN0LmdldCgnUE9OTycpOw0KICAgIFN0cmluZyB0ZW1wQ1NDRCA9IGVhY2hhZGRyZXNzTGlzdC5nZXQoJ0NTQ0QnKTsNCiAgICBTdHJpbmcgdGVtcEVERVMgPSBlYWNoYWRkcmVzc0xpc3QuZ2V0KCdFREVTJyk7DQoNCiAgICBpZiAoYWRkcmVzc1R5cGVzTGlzdC5jb250YWlucyh0ZW1wQURURS50cmltKCkpICYmIGFkZHJlc3NJZHNMaXN0LmNvbnRhaW5zKHRlbXBBRElELnRyaW0oKSkpIHsNCiAgICAgIEFEUjEgPSBlYWNoYWRkcmVzc0xpc3QuZ2V0KCdBRFIxJyk7DQogICAgICBBRFIyID0gZWFjaGFkZHJlc3NMaXN0LmdldCgnQURSMicpOw0KICAgICAgQURSMyA9IGVhY2hhZGRyZXNzTGlzdC5nZXQoJ0FEUjMnKTsNCiAgICAgIEFEUjQgPSBlYWNoYWRkcmVzc0xpc3QuZ2V0KCdBRFI0Jyk7DQogICAgICBUT1dOID0gZWFjaGFkZHJlc3NMaXN0LmdldCgnVE9XTicpOw0KICAgICAgRUNBUiA9IGVhY2hhZGRyZXNzTGlzdC5nZXQoJ0VDQVInKTsNCiAgICAgIFBPTk8gPSBlYWNoYWRkcmVzc0xpc3QuZ2V0KCdQT05PJyk7DQogICAgICBDU0NEID0gZWFjaGFkZHJlc3NMaXN0LmdldCgnQ1NDRCcpOw0KICAgICAgRURFUyA9IGVhY2hhZGRyZXNzTGlzdC5nZXQoJ0VERVMnKTsNCiAgICB9DQoNCiAgfQ0KDQogIHB1YmxpYyB3cml0ZVN1cHBsaWVyVG9PdXRwdXQoSGFzaHRhYmxlIGVhY2hTdXBwbGllcikgew0KICAgIFN0cmluZyBTVU5PID0gZWFjaFN1cHBsaWVyLmdldCgnU1VOTycpOw0KICAgIFN0cmluZyBTVU5NID0gZWFjaFN1cHBsaWVyLmdldCgnU1VOTScpOw0KDQogICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAnSCcpOw0KICAgIG1pLm91dERhdGEucHV0KCdESVZJJywgIiIpOw0KICAgIG1pLm91dERhdGEucHV0KCdTVU5PJywgU1VOTyk7DQogICAgbWkub3V0RGF0YS5wdXQoJ1NVTk0nLCBTVU5NKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnUEhOTycsIFBITk8pOw0KICAgIG1pLm91dERhdGEucHV0KCdURVBZJywgVEVQWSk7DQogICAgbWkub3V0RGF0YS5wdXQoJ1RFQ0QnLCBURUNEKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnUFlNRScsIFBZTUUpOw0KDQogICAgaWYgKFZUQ0QudHJpbSgpLmxlbmd0aCgpID09IDEpIHsNCiAgICAgIA0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCAiMCIgKyBWVENELnRvU3RyaW5nKCkpOw0KICAgIH0gZWxzZSB7DQogICAgICANCiAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgVlRDRCk7DQogICAgfQ0KICAgIG1pLm91dERhdGEucHV0KCdDU0NEJywgQ1NDRCk7DQogICAgbWkub3V0RGF0YS5wdXQoJ1NUQVQnLCBTVEFUKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnVlJOTycsIFZSTk8pOw0KICAgIG1pLm91dERhdGEucHV0KCdFTUFMJywgRU1BTCk7DQogICAgbWkub3V0RGF0YS5wdXQoJ1BSU1UnLCBQUlNVKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnU1VDTScsIFNVQ00pOw0KICAgIG1pLm91dERhdGEucHV0KCdBRFIxJywgQURSMSk7DQogICAgbWkub3V0RGF0YS5wdXQoJ0FEUjInLCBBRFIyKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnQURSMycsIEFEUjMpOw0KICAgIG1pLm91dERhdGEucHV0KCdBRFI0JywgQURSNCk7DQogICAgbWkub3V0RGF0YS5wdXQoJ0FTQ0QnLCBBU0NEKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnUE9OTycsIFBPTk8pOw0KICAgIG1pLm91dERhdGEucHV0KCdFREVTJywgRURFUyk7DQogICAgbWkub3V0RGF0YS5wdXQoJ1RPV04nLCBUT1dOKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnRUNBUicsIEVDQVIpOw0KICAgIG1pLm91dERhdGEucHV0KCdJQVBDJywgSUFQQyk7DQogICAgbWkud3JpdGUoKTsNCg0KICB9DQoNCiAgLyoqDQogICAqIERlcGVuZCB1cG9uIGNvbnRyb2wgcHJvcGVydHkgLCBnZXQgc3VwcGxpZXIgYmFuayBkZXRhaWxzDQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgZ2V0QmFua0RldGFpbHMoSGFzaHRhYmxlIGVhY2hTdXBwbGllcikgew0KDQogICAgU3RyaW5nIFNVTk8gPSBlYWNoU3VwcGxpZXIuZ2V0KCdTVU5PJyk7DQogICAgU3RyaW5nIFNVTk0gPSBlYWNoU3VwcGxpZXIuZ2V0KCdTVU5NJyk7DQoNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBTdHJpbmcgU1RBVCA9IHJlc3VsdHMuZ2V0KCdTVEFUJyk7DQogICAgICAgIFN0cmluZyBESVZJID0gcmVzdWx0cy5nZXQoJ0RJVkknKTsNCiAgICAgICAgU3RyaW5nIEJLSUQgPSByZXN1bHRzLmdldCgnQktJRCcpOw0KICAgICAgICBTdHJpbmcgQUNITyA9IHJlc3VsdHMuZ2V0KCdBQ0hPJyk7DQogICAgICAgIFN0cmluZyBDQlBZID0gcmVzdWx0cy5nZXQoJ0NCUFknKTsNCiAgICAgICAgU3RyaW5nIEZJQU4gPSByZXN1bHRzLmdldCgnRklBTicpOw0KICAgICAgICBTdHJpbmcgSUJBTiA9IHJlc3VsdHMuZ2V0KCdJQkFOJyk7DQogICAgICAgIFN0cmluZyBCQUYxID0gcmVzdWx0cy5nZXQoJ0JBRjEnKTsNCiAgICAgICAgYm9vbGVhbiB0ZXN0ID0gYmFua0FjY291bnRzdGF0dXNMaXN0LmNvbnRhaW5zKFNUQVQudHJpbSgpKTsNCg0KICAgICAgICBpZiAoYmFua0FjY291bnRzdGF0dXNMaXN0LmNvbnRhaW5zKFNUQVQpICYmICFleGNsdWRlZEFjY291bnRzTGlzdC5jb250YWlucyhCS0lELnRyaW0oKSkgJiYgKGRpdmlzaW9uTGlzdC5pc0VtcHR5KCkgfHwgZGl2aXNpb25MaXN0LnRyaW0oKS5lcXVhbHMoIjEiKSB8fCBkaXZpc2lvbkxpc3QuY29udGFpbnMoRElWSS50cmltKCkpKSkgew0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgIkIiKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRElWSScsICIiKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1VOTycsIFNVTk8pOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTVU5NJywgU1VOTSk7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0JLSUQnLCBCS0lEKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQkRJVicsIERJVkkpOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdCS1NUJywgU1RBVCk7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NCUFknLCBDQlBZKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRklBTicsIEZJQU4pOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdJQkFOJywgSUJBTik7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0JBRjEnLCBCQUYxKTsNCiAgICAgICAgICBtaS53cml0ZSgpOw0KICAgICAgICB9DQoNCiAgICAgIH0NCiAgICB9DQoNCiAgICANCiAgICBkZWYgcGFyYW1zID0gWyJCS1RQIjogIjAzIiwgIkFDSE8iOiBTVU5PXTsNCiAgICANCiAgICBtaUNhbGxlci5jYWxsKCJDUlM2OTJNSSIsICJMc3RCeUFjY0hvbGRlciIsIHBhcmFtcywgY2FsbGJhY2spOw0KDQogIH0NCg0KfQ=="}}}