{"utilities":{},"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"ISPGetLdgrActs":{"sourceUuid":"f5df9ba5-1cd2-457c-aaef-ace499d78ca3","name":"ISPGetLdgrActs","program":"EXT001MI","description":"ALL_MI_0001_GetLedgerAccounts","active":true,"multi":true,"modified":1678212057743,"modifiedBy":"APE_SMA","outputFields":[{"name":"RCTP","description":"Record Type","length":1,"mandatory":false,"type":"A"},{"name":"DIVI","description":"division","length":3,"mandatory":false,"type":"A"},{"name":"AITP","description":"accounting dimension","length":1,"mandatory":false,"type":"N"},{"name":"AITM","description":"accounting identity","length":10,"mandatory":false,"type":"A"},{"name":"TX40","description":"description","length":40,"mandatory":false,"type":"A"},{"name":"LCCD","description":"blocked accounting identity","length":1,"mandatory":false,"type":"N"},{"name":"VFDT","description":"valid from","length":8,"mandatory":false,"type":"N"},{"name":"VTDT","description":"valid to","length":8,"mandatory":false,"type":"N"},{"name":"MQCD","description":"quantity mandatory","length":1,"mandatory":false,"type":"N"},{"name":"ACR2","description":"ACR for accounting dimension 2","length":1,"mandatory":false,"type":"N"},{"name":"ACR3","description":"ACR for accounting dimension 3","length":1,"mandatory":false,"type":"N"},{"name":"ACR4","description":"ACR for accounting dimension 4","length":1,"mandatory":false,"type":"N"},{"name":"ACR5","description":"ACR for accounting dimension 5","length":1,"mandatory":false,"type":"N"},{"name":"ACR6","description":"ACR for accounting dimension 6","length":1,"mandatory":false,"type":"N"},{"name":"ACR7","description":"ACR for accounting dimension 7","length":1,"mandatory":false,"type":"N"},{"name":"AT04","description":"VAT account type","length":1,"mandatory":false,"type":"N"},{"name":"KV06","description":"Dimension","length":15,"mandatory":false,"type":"A"},{"name":"FV02","description":"Range","length":40,"mandatory":false,"type":"A"},{"name":"FV03","description":"From Value","length":40,"mandatory":false,"type":"A"},{"name":"FV04","description":"To Value","length":40,"mandatory":false,"type":"A"}],"inputFields":[{"name":"AITM","description":"accounting identity","length":10,"mandatory":false,"type":"A"},{"name":"DIVI","description":"Division","length":3,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{}}},"sources":{"f5df9ba5-1cd2-457c-aaef-ace499d78ca3":{"uuid":"f5df9ba5-1cd2-457c-aaef-ace499d78ca3","updated":1678212038807,"updatedBy":"APE_SMA","created":1671807129239,"createdBy":"RLO","apiVersion":"0.14","beVersion":"16.0.0.20221210044646.5","codeHash":"7E351D9629F3EA5C10C67D6773AE3FD99FD0AF9514D2A45086188AEA94F77CF0","code":"LyoqDQogKiBOYW1lOiBJU1BHZXRMZGdyQWN0cw0KICogVHlwZSA6IEV4dGVuZE0zQVBJDQogKiBEZXNjcmlwdGlvbjogU2VuZCBTcGVjaWZpYyBNMyBnZW5lcmFsIGxlZGdlciBkZXRhaWxzIHRvIDNyZCBwYXJ0eSBhcHBsaWNhdGlvbg0KICogKg0KICogQ3JlYXRlZCBCeTogQXBleCBTeXN0ZW1zDQogKiBBdXRob3I6IFNoYXNoYW5rIE1hbGFsaSwgQW5naGVsbyBGZXJuYW5kZXoNCiAqDQogKiBIaXN0b3J5Og0KICogU2NyaXB0IGNyZWF0ZWQgaW4gMjAyMS4NCiAqIFNjcmlwdCBjaGFuZ2VkIG9uIDIwMjIwODA1DQogKiBDb2RlIGNsZWFuIHVwIGRvbmUgMjAyMjExMTINCiAqLw0KDQpwdWJsaWMgY2xhc3MgSVNQR2V0TGRnckFjdHMgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsNCiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaTsNCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW07DQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXI7DQogIHByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2UNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBTdHJpbmcgPiBsZWRnZXJBY2NvdW50VHlwZSA9IG51bGw7DQogIHByaXZhdGUgTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiBkaW1lbnNpb25NYXAgPSBudWxsOw0KICBwcml2YXRlIE1hcCA8IFN0cmluZywgU3RyaW5nID4gcXVhbnRpdHlNYXAgPSBudWxsOw0KICBwcml2YXRlIE1hcCA8IFN0cmluZywgU3RyaW5nID4gdmF0UmFuZ2VNYXAgPSBudWxsOw0KICBwcml2YXRlIFN0cmluZyBDT05PID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIGlucHV0QUlUTSA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBpbnB1dERJVkkgPSAiIjsNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBIYXNodGFibGUgPiBsZWRnZXJBY2NvdW50cyA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gYWNyTGlzdCA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gdmF0UmFuZ2VMaXN0ID0gbnVsbDsNCiAgcHJpdmF0ZSBib29sZWFuIGlzRW5kT2ZGaWxlID0gZmFsc2U7DQoNCiAgcHVibGljIElTUEdldExkZ3JBY3RzKE1JQVBJIG1pLCBQcm9ncmFtQVBJIHByb2dyYW0sIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSkgew0KICAgIHRoaXMubWkgPSBtaTsNCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtOw0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcjsNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2U7DQogIH0NCg0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIGlucHV0QUlUTSA9IG1pLmluRGF0YS5nZXQoJ0FJVE0nKTsNCiAgICBpbnB1dERJVkkgPSBtaS5pbkRhdGEuZ2V0KCdESVZJJyk7DQogICAgcG9wdWxhdGVSYW5nZU1hcHMoKTsNCiAgICBnZXRBbGxMZWRnZXJBY2NvdW50cygpOw0KICAgIGlmIChsZWRnZXJBY2NvdW50cy5zaXplIDwgMTAwMCkgew0KICAgICAgaXNFbmRPZkZpbGUgPSB0cnVlOw0KICAgIH0NCiAgICBpZiAoIWlucHV0QUlUTS50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICBsZWRnZXJBY2NvdW50cy5yZW1vdmUoMCk7DQogICAgfQ0KICAgIGxlZGdlckFjY291bnRzLmVhY2ggew0KICAgICAgZWFjaEFjY291bnQgLT4NCiAgICAgICAgZmlsbEFDUkxpc3QoZWFjaEFjY291bnQpOw0KICAgICAgbWFwVmFsdWVzVG9JU1AoZWFjaEFjY291bnQpOw0KICAgICAgZmlsbEFDUlJhbmdlKGVhY2hBY2NvdW50KTsNCiAgICAgIGZpbGxWQVRSYW5nZShlYWNoQWNjb3VudCk7DQogICAgfQ0KICAgIGlmIChpc0VuZE9mRmlsZSkgew0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAnTCcpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FJVE0nLCAnJSVFT0YlJScpOw0KICAgICAgbWkud3JpdGUoKTsNCiAgICB9DQogIH0NCg0KICAvKiBDaGVjayBhbmQgcmV0cml2ZSBjb250cm9sIHByb3BlcnRpZXMgZnJvbSBDVUdFWDENCiAgICovDQoNCiAgcHVibGljIHBvcHVsYXRlUmFuZ2VNYXBzKCkgew0KICAgIENPTk8gPSBwcm9ncmFtLkxEQVpELmdldCgnQ09OTycpOw0KDQogICAgbGVkZ2VyQWNjb3VudFR5cGUgPSBuZXcgQXJyYXlMaXN0IDwgU3RyaW5nID4gKCk7DQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgU3RyaW5nIGxlZGdlckFjdHMgPSByZXN1bHRzLmdldCgnQTEyMScpOw0KICAgICAgICBTdHJpbmdbXSBsZWRnZXJBY3RzQXJyYXkgPSBsZWRnZXJBY3RzLnNwbGl0KCc7Jyk7DQogICAgICAgIGxlZGdlckFjdHNBcnJheS5lYWNoIHsNCiAgICAgICAgICB2YWx1ZSAtPg0KICAgICAgICAgICAgU3RyaW5nIGxlZGdlckFjY291bnQgPSB2YWx1ZTsNCiAgICAgICAgICBsZWRnZXJBY2NvdW50VHlwZS5hZGQobGVkZ2VyQWNjb3VudC50cmltKCkpOw0KDQogICAgICAgIH0NCg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkuZXJyb3IoIlBsZWFzZSBtYWludGFpbiByZWNvcmQgaW4gQ1VHRVgxIGZvciBMRURHRVJBQ1RUWVBFIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCg0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJGSUxFIjogIklTUEZJTEUiLCAiUEswMSI6ICJHRVRMRURHRVJBQ0NPVU5UUyIsICJQSzAyIjogIkxFREdFUkFDVFRZUEUiXTsNCiAgICBtaUNhbGxlci5jYWxsKCJDVVNFWFRNSSIsICJHZXRGaWVsZFZhbHVlIiwgcGFyYW1zLCBjYWxsYmFjayk7DQoNCiAgICBkaW1lbnNpb25NYXAgPSBuZXcgSGFzaE1hcCA8IFN0cmluZywgU3RyaW5nID4gKCk7DQoNCiAgICBkZWYgY2FsbGJhY2syID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBTdHJpbmcgYWN0RGltZW5zaW9ucyA9IHJlc3VsdHMuZ2V0KCdBMTIxJyk7DQogICAgICAgIFN0cmluZ1tdIGFjdERpbWVuc2lvbnNBcnJheSA9IGFjdERpbWVuc2lvbnMuc3BsaXQoJzsnKTsNCiAgICAgICAgYWN0RGltZW5zaW9uc0FycmF5LmVhY2ggew0KICAgICAgICAgIHZhbHVlIC0+DQogICAgICAgICAgICBTdHJpbmcgYWN0RGltZW5zaW9uID0gdmFsdWU7DQogICAgICAgICAgZGltZW5zaW9uTWFwLnB1dChhY3REaW1lbnNpb24uc3Vic3RyaW5nKDAsIDEpLCBhY3REaW1lbnNpb24uc3Vic3RyaW5nKDIsIDMpKTsNCg0KICAgICAgICB9DQoNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLmVycm9yKCJQbGVhc2UgbWFpbnRhaW4gcmVjb3JkIGluIENVR0VYMSBmb3IgQUNURElNRU5TSU9OIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCg0KICAgIH0NCiAgICBkZWYgcGFyYW1zMiA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUTEVER0VSQUNDT1VOVFMiLCAiUEswMiI6ICJBQ1RESU1FTlNJT04iXTsNCiAgICBtaUNhbGxlci5jYWxsKCJDVVNFWFRNSSIsICJHZXRGaWVsZFZhbHVlIiwgcGFyYW1zMiwgY2FsbGJhY2syKTsNCg0KICAgIHF1YW50aXR5TWFwID0gbmV3IEhhc2hNYXAgPCBTdHJpbmcsIFN0cmluZyA+ICgpOw0KDQogICAgZGVmIGNhbGxiYWNrMyA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgU3RyaW5nIHF1YW50aXRpZXMgPSByZXN1bHRzLmdldCgnQTEyMScpOw0KICAgICAgICBTdHJpbmdbXSBxdWFudGl0eVZhbHVlQXJyYXkgPSBxdWFudGl0aWVzLnNwbGl0KCc7Jyk7DQogICAgICAgIHF1YW50aXR5VmFsdWVBcnJheS5lYWNoIHsNCiAgICAgICAgICB2YWx1ZSAtPg0KICAgICAgICAgICAgU3RyaW5nIHF1YW50aXR5VmFsdWUgPSB2YWx1ZTsNCiAgICAgICAgICBxdWFudGl0eU1hcC5wdXQocXVhbnRpdHlWYWx1ZS5zdWJzdHJpbmcoMCwgMSksIHF1YW50aXR5VmFsdWUuc3Vic3RyaW5nKDIsIDMpKTsNCiAgICAgICAgfQ0KDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiUGxlYXNlIG1haW50YWluIHJlY29yZCBpbiBDVUdFWDEgZm9yIFFVQU5USVRZIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCg0KICAgIH0NCiAgICBkZWYgcGFyYW1zMyA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUTEVER0VSQUNDT1VOVFMiLCAiUEswMiI6ICJRVUFOVElUWSJdOw0KICAgIG1pQ2FsbGVyLmNhbGwoIkNVU0VYVE1JIiwgIkdldEZpZWxkVmFsdWUiLCBwYXJhbXMzLCBjYWxsYmFjazMpOw0KDQogICAgdmF0UmFuZ2VNYXAgPSBuZXcgSGFzaE1hcCA8IFN0cmluZywgU3RyaW5nID4gKCk7DQoNCiAgICBkZWYgY2FsbGJhY2s0ID0gew0KDQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIFN0cmluZyB2YXRSYW5nZXMgPSByZXN1bHRzLmdldCgnQTEyMScpOw0KICAgICAgICBTdHJpbmdbXSB2YXRSYW5nZUFycmF5ID0gdmF0UmFuZ2VzLnNwbGl0KCc7Jyk7DQogICAgICAgIHZhdFJhbmdlQXJyYXkuZWFjaCB7DQogICAgICAgICAgdmFsdWUgLT4NCiAgICAgICAgICAgIFN0cmluZyB2YXRSYW5nZSA9IHZhbHVlOw0KICAgICAgICAgIHZhdFJhbmdlTWFwLnB1dCh2YXRSYW5nZS5zdWJzdHJpbmcoMCwgMSksIHZhdFJhbmdlLnN1YnN0cmluZygyLCAzKSk7DQogICAgICAgIH0NCg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkuZXJyb3IoIlBsZWFzZSBtYWludGFpbiByZWNvcmQgaW4gQ1VHRVgxIGZvciBWQVRSQU5HRSIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQoNCiAgICB9DQogICAgZGVmIHBhcmFtczQgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVExFREdFUkFDQ09VTlRTIiwgIlBLMDIiOiAiVkFUUkFOR0UiXTsNCiAgICBtaUNhbGxlci5jYWxsKCJDVVNFWFRNSSIsICJHZXRGaWVsZFZhbHVlIiwgcGFyYW1zNCwgY2FsbGJhY2s0KTsNCg0KICB9DQoNCiAgLyoqDQogICAqIGdldCBNMyBsZWRnZXIgYWNjb3VudCB1c2luZyBDUlM2MzBNSS5Mc3RBY2NvdW50SUQNCiAgICogDQogICAqLw0KICBwdWJsaWMgZ2V0QWxsTGVkZ2VyQWNjb3VudHMoKSB7DQogICAgbGVkZ2VyQWNjb3VudHMgPSBuZXcgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gKCk7DQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgU3RyaW5nIEFJVFAgPSByZXN1bHRzLmdldCgnQUlUUCcpOw0KICAgICAgICBTdHJpbmcgQVQwNCA9IHJlc3VsdHMuZ2V0KCdBVDA0Jyk7DQoNCiAgICAgICAgaWYgKEFJVFAudHJpbSgpLmVxdWFscygiMSIpICYmIGxlZGdlckFjY291bnRUeXBlLmNvbnRhaW5zKEFUMDQudHJpbSgpKSkgew0KICAgICAgICAgIEhhc2h0YWJsZSBhY2NvdW50ID0gbmV3IEhhc2h0YWJsZSgpOw0KICAgICAgICAgIGFjY291bnQucHV0KCJESVZJIiwgcmVzdWx0cy5nZXQoJ0RJVkknKSk7DQogICAgICAgICAgYWNjb3VudC5wdXQoIkFJVFAiLCByZXN1bHRzLmdldCgnQUlUUCcpKTsNCiAgICAgICAgICBhY2NvdW50LnB1dCgiQUlUTSIsIHJlc3VsdHMuZ2V0KCdBSVRNJykpOw0KICAgICAgICAgIGFjY291bnQucHV0KCJUWDQwIiwgcmVzdWx0cy5nZXQoJ1RYNDAnKSk7DQogICAgICAgICAgYWNjb3VudC5wdXQoIkxDQ0QiLCByZXN1bHRzLmdldCgnTENDRCcpKTsNCiAgICAgICAgICBhY2NvdW50LnB1dCgiVkZEVCIsIHJlc3VsdHMuZ2V0KCdWRkRUJykpOw0KICAgICAgICAgIGFjY291bnQucHV0KCJWVERUIiwgcmVzdWx0cy5nZXQoJ1ZURFQnKSk7DQogICAgICAgICAgYWNjb3VudC5wdXQoIkFDUjIiLCByZXN1bHRzLmdldCgnQUNSMicpKTsNCiAgICAgICAgICBhY2NvdW50LnB1dCgiQUNSMyIsIHJlc3VsdHMuZ2V0KCdBQ1IzJykpOw0KICAgICAgICAgIGFjY291bnQucHV0KCJBQ1I0IiwgcmVzdWx0cy5nZXQoJ0FDUjQnKSk7DQogICAgICAgICAgYWNjb3VudC5wdXQoIkFDUjUiLCByZXN1bHRzLmdldCgnQUNSNScpKTsNCiAgICAgICAgICBhY2NvdW50LnB1dCgiQUNSNiIsIHJlc3VsdHMuZ2V0KCdBQ1I2JykpOw0KICAgICAgICAgIGFjY291bnQucHV0KCJBQ1I3IiwgcmVzdWx0cy5nZXQoJ0FDUjcnKSk7DQogICAgICAgICAgYWNjb3VudC5wdXQoIkFUMDQiLCByZXN1bHRzLmdldCgnQVQwNCcpKTsNCiAgICAgICAgICBhY2NvdW50LnB1dCgiQUNSViIsIHJlc3VsdHMuZ2V0KCdBQ1JWJykpOw0KICAgICAgICAgIGFjY291bnQucHV0KCJNUUNEIiwgcmVzdWx0cy5nZXQoJ01RQ0QnKSk7DQogICAgICAgICAgYWNjb3VudC5wdXQoIkFUMTMiLCByZXN1bHRzLmdldCgnQVQxMycpKTsNCiAgICAgICAgICBsZWRnZXJBY2NvdW50cy5hZGQoYWNjb3VudCk7DQoNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJBSVRQIjogIjEiLCAiQUlUTSI6IGlucHV0QUlUTSwgIkRJVkkiOiBpbnB1dERJVkldOw0KICAgIG1pQ2FsbGVyLnNldExpc3RNYXhSZWNvcmRzKDIwMDAwKTsNCiAgICBtaUNhbGxlci5jYWxsKCJDUlM2MzBNSSIsICJMc3RBY2NvdW50SUQiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCiAgICByZXR1cm4gcmVjb3JkRXhpc3RzOw0KDQogIH0NCg0KICBwdWJsaWMgZmlsbEFDUkxpc3QoSGFzaHRhYmxlIGFjY291bnQpIHsNCiAgICBhY3JMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgIFN0cmluZyBBQ1IyID0gYWNjb3VudC5nZXQoIkFDUjIiKTsNCiAgICBTdHJpbmcgQUNSMyA9IGFjY291bnQuZ2V0KCJBQ1IzIik7DQogICAgU3RyaW5nIEFDUjQgPSBhY2NvdW50LmdldCgiQUNSNCIpOw0KICAgIFN0cmluZyBBQ1I1ID0gYWNjb3VudC5nZXQoIkFDUjUiKTsNCiAgICBTdHJpbmcgQUNSNiA9IGFjY291bnQuZ2V0KCJBQ1I2Iik7DQogICAgU3RyaW5nIEFDUjcgPSBhY2NvdW50LmdldCgiQUNSNyIpOw0KDQogICAgaWYgKEFDUjIuZXF1YWxzKCIyIikgfHwgQUNSMi5lcXVhbHMoIjQiKSB8fCBBQ1IyLmVxdWFscygiNiIpKSB7DQogICAgICBqYXZhLnV0aWwuSGFzaHRhYmxlIGFjciA9IG5ldyBqYXZhLnV0aWwuSGFzaHRhYmxlKCk7DQogICAgICBhY3IucHV0KCJBQ1IiLCAiMiIpOw0KICAgICAgYWNyLnB1dCgiVmFsdWUiLCBBQ1IyKTsNCiAgICAgIGFjckxpc3QuYWRkKGFjcik7DQogICAgfQ0KICAgIGlmIChBQ1IzLmVxdWFscygiMiIpIHx8IEFDUjMuZXF1YWxzKCI0IikgfHwgQUNSMy5lcXVhbHMoIjYiKSkgew0KICAgICAgamF2YS51dGlsLkhhc2h0YWJsZSBhY3IgPSBuZXcgamF2YS51dGlsLkhhc2h0YWJsZSgpOw0KICAgICAgYWNyLnB1dCgiQUNSIiwgIjMiKTsNCiAgICAgIGFjci5wdXQoIlZhbHVlIiwgQUNSMyk7DQogICAgICBhY3JMaXN0LmFkZChhY3IpOw0KICAgIH0NCiAgICBpZiAoQUNSNC5lcXVhbHMoIjIiKSB8fCBBQ1I0LmVxdWFscygiNCIpIHx8IEFDUjQuZXF1YWxzKCI2IikpIHsNCiAgICAgIGphdmEudXRpbC5IYXNodGFibGUgYWNyID0gbmV3IGphdmEudXRpbC5IYXNodGFibGUoKTsNCiAgICAgIGFjci5wdXQoIkFDUiIsICI0Iik7DQogICAgICBhY3IucHV0KCJWYWx1ZSIsIEFDUjQpOw0KICAgICAgYWNyTGlzdC5hZGQoYWNyKTsNCiAgICB9DQogICAgaWYgKEFDUjUuZXF1YWxzKCIyIikgfHwgQUNSNS5lcXVhbHMoIjQiKSB8fCBBQ1I1LmVxdWFscygiNiIpKSB7DQogICAgICBqYXZhLnV0aWwuSGFzaHRhYmxlIGFjciA9IG5ldyBqYXZhLnV0aWwuSGFzaHRhYmxlKCk7DQogICAgICBhY3IucHV0KCJBQ1IiLCAiNSIpOw0KICAgICAgYWNyLnB1dCgiVmFsdWUiLCBBQ1I1KTsNCiAgICAgIGFjckxpc3QuYWRkKGFjcik7DQogICAgfQ0KICAgIGlmIChBQ1I2LmVxdWFscygiMiIpIHx8IEFDUjYuZXF1YWxzKCI0IikgfHwgQUNSNi5lcXVhbHMoIjYiKSkgew0KICAgICAgamF2YS51dGlsLkhhc2h0YWJsZSBhY3IgPSBuZXcgamF2YS51dGlsLkhhc2h0YWJsZSgpOw0KICAgICAgYWNyLnB1dCgiQUNSIiwgIjYiKTsNCiAgICAgIGFjci5wdXQoIlZhbHVlIiwgQUNSNik7DQogICAgICBhY3JMaXN0LmFkZChhY3IpOw0KICAgIH0NCiAgICBpZiAoQUNSNy5lcXVhbHMoIjIiKSB8fCBBQ1I3LmVxdWFscygiNCIpIHx8IEFDUjcuZXF1YWxzKCI2IikpIHsNCiAgICAgIGphdmEudXRpbC5IYXNodGFibGUgYWNyID0gbmV3IGphdmEudXRpbC5IYXNodGFibGUoKTsNCiAgICAgIGFjci5wdXQoIkFDUiIsICI3Iik7DQogICAgICBhY3IucHV0KCJWYWx1ZSIsIEFDUjcpOw0KICAgICAgYWNyTGlzdC5hZGQoYWNyKTsNCiAgICB9DQoNCiAgfQ0KDQogIC8qIFNlbmQgZGF0YSB0byBvdXRwdXQNCiAgICovDQoNCiAgcHVibGljIG1hcFZhbHVlc1RvSVNQKEhhc2h0YWJsZSBhY2NvdW50KSB7DQogICAgU3RyaW5nIERJVkkgPSBhY2NvdW50LmdldCgiRElWSSIpOw0KICAgIFN0cmluZyBBSVRQID0gYWNjb3VudC5nZXQoIkFJVFAiKTsNCiAgICBTdHJpbmcgQUlUTSA9IGFjY291bnQuZ2V0KCJBSVRNIik7DQogICAgU3RyaW5nIFRYNDAgPSBhY2NvdW50LmdldCgiVFg0MCIpOw0KICAgIFN0cmluZyBMQ0NEID0gYWNjb3VudC5nZXQoIkxDQ0QiKTsNCiAgICBTdHJpbmcgVkZEVCA9IGFjY291bnQuZ2V0KCJWRkRUIik7DQogICAgU3RyaW5nIFZURFQgPSBhY2NvdW50LmdldCgiVlREVCIpOw0KICAgIFN0cmluZyBBQ1IyID0gYWNjb3VudC5nZXQoIkFDUjIiKTsNCiAgICBTdHJpbmcgQUNSMyA9IGFjY291bnQuZ2V0KCJBQ1IzIik7DQogICAgU3RyaW5nIEFDUjQgPSBhY2NvdW50LmdldCgiQUNSNCIpOw0KICAgIFN0cmluZyBBQ1I1ID0gYWNjb3VudC5nZXQoIkFDUjUiKTsNCiAgICBTdHJpbmcgQUNSNiA9IGFjY291bnQuZ2V0KCJBQ1I2Iik7DQogICAgU3RyaW5nIEFDUjcgPSBhY2NvdW50LmdldCgiQUNSNyIpOw0KICAgIFN0cmluZyBBVDA0ID0gYWNjb3VudC5nZXQoIkFUMDQiKTsNCiAgICBTdHJpbmcgQUNSViA9IGFjY291bnQuZ2V0KCJBQ1JWIik7DQogICAgU3RyaW5nIE1RQ0QgPSBhY2NvdW50LmdldCgiTVFDRCIpOw0KICAgIFN0cmluZyBBVDEzID0gYWNjb3VudC5nZXQoIkFUMTMiKTsNCg0KICAgIEFDUjIgPSBkaW1lbnNpb25NYXAuZ2V0KEFDUjIpID09IG51bGwgPyAiIiA6IGRpbWVuc2lvbk1hcC5nZXQoQUNSMik7DQogICAgQUNSMyA9IGRpbWVuc2lvbk1hcC5nZXQoQUNSMykgPT0gbnVsbCA/ICIiIDogZGltZW5zaW9uTWFwLmdldChBQ1IzKTsNCiAgICBBQ1I0ID0gZGltZW5zaW9uTWFwLmdldChBQ1I0KSA9PSBudWxsID8gIiIgOiBkaW1lbnNpb25NYXAuZ2V0KEFDUjQpOw0KICAgIEFDUjUgPSBkaW1lbnNpb25NYXAuZ2V0KEFDUjUpID09IG51bGwgPyAiIiA6IGRpbWVuc2lvbk1hcC5nZXQoQUNSNSk7DQogICAgQUNSNiA9IGRpbWVuc2lvbk1hcC5nZXQoQUNSNikgPT0gbnVsbCA/ICIiIDogZGltZW5zaW9uTWFwLmdldChBQ1I2KTsNCiAgICBBQ1I3ID0gZGltZW5zaW9uTWFwLmdldChBQ1I3KSA9PSBudWxsID8gIiIgOiBkaW1lbnNpb25NYXAuZ2V0KEFDUjcpOw0KICAgIE1RQ0QgPSBxdWFudGl0eU1hcC5nZXQoTVFDRCkgPT0gbnVsbCA/ICIiIDogcXVhbnRpdHlNYXAuZ2V0KE1RQ0QpOw0KICAgIEFUMDQgPSB2YXRSYW5nZU1hcC5nZXQoQVQwNCkgPT0gbnVsbCA/ICIwIiA6IHZhdFJhbmdlTWFwLmdldChBVDA0KTsNCiAgICBpZiAoTENDRC5lcXVhbHMoJzAnKSAmJiBBVDEzLmVxdWFscygnMCcpKSB7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICdIJyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRElWSScsIERJVkkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FJVFAnLCBBSVRQKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdBSVRNJywgQUlUTSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVFg0MCcsIFRYNDApOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xDQ0QnLCBMQ0NEKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdWRkRUJywgVkZEVCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVlREVCcsIFZURFQpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FDUjInLCBBQ1IyKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdBQ1IzJywgQUNSMyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQUNSNCcsIEFDUjQpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FDUjUnLCBBQ1I1KTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdBQ1I2JywgQUNSNik7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQUNSNycsIEFDUjcpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FUMDQnLCBBVDA0KTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdNUUNEJywgTVFDRCk7DQogICAgICBtaS53cml0ZSgpOw0KICAgIH0NCiAgfQ0KDQogIC8qIFJldHJpdmUgYWRkaXRpb25hbCBkZXRhaWxzIGZyb20gdGFibGUgRkNIQ0hLDQogICAqLw0KDQogIHB1YmxpYyBmaWxsQUNSUmFuZ2UoSGFzaHRhYmxlIGFjY291bnQpIHsNCiAgICBTdHJpbmcgRElWSSA9IGFjY291bnQuZ2V0KCdESVZJJyk7DQogICAgU3RyaW5nIEFJVFAgPSBhY2NvdW50LmdldCgnQUlUUCcpOw0KICAgIFN0cmluZyBBSVRNID0gYWNjb3VudC5nZXQoJ0FJVE0nKTsNCiAgICBTdHJpbmcgS1YwNiA9ICIiOw0KICAgIFN0cmluZyBLVjA3ID0gIiI7DQoNCiAgICBhY3JMaXN0LmVhY2ggew0KICAgICAgdmFsdWUgLT4NCiAgICAgICAgSGFzaHRhYmxlIGFjclJhbmdlVGFibGUgPSB2YWx1ZTsNCiAgICAgIEtWMDYgPSBhY3JSYW5nZVRhYmxlLmdldCgnQUNSJyk7DQogICAgICBLVjA3ID0gYWNyUmFuZ2VUYWJsZS5nZXQoJ1ZhbHVlJyk7DQoNCiAgICAgIERCQWN0aW9uIHF1ZXJ5RkNIQ0hLID0gZGF0YWJhc2UudGFibGUoIkZDSENISyIpDQogICAgICAgIC5pbmRleCgiMDAiKQ0KICAgICAgICAuc2VsZWN0aW9uKCJFQ0NPTk8iLCAiRUNESVZJIiwgIkVDQUlUUCIsICJFQ0FJVE0iLCAiRUNDSFBVIiwgIkVDQUlUViIsICJFQ0FDUkMiLCAiRUNSTElOIiwgIkVDQUlURiIsICJFQ0FJVFQiLCAiRUNBSVRWIikuYnVpbGQoKQ0KICAgICAgREJDb250YWluZXIgcmVjb3JkRkNIQ0hLID0gcXVlcnlGQ0hDSEsuZ2V0Q29udGFpbmVyKCkNCiAgICAgIHJlY29yZEZDSENISy5zZXQoIkVDQ09OTyIsIENPTk8udG9JbnRlZ2VyKCkpOw0KICAgICAgcmVjb3JkRkNIQ0hLLnNldCgiRUNESVZJIiwgRElWSSk7DQogICAgICByZWNvcmRGQ0hDSEsuc2V0KCJFQ0FJVFAiLCBBSVRQLnRvSW50ZWdlcigpKTsNCiAgICAgIHJlY29yZEZDSENISy5zZXQoIkVDQUlUTSIsIEFJVE0pOw0KICAgICAgcmVjb3JkRkNIQ0hLLnNldCgiRUNDSFBVIiwgMSk7DQogICAgICByZWNvcmRGQ0hDSEsuc2V0KCJFQ0FJVFYiLCBLVjA2LnRvSW50ZWdlcigpKTsNCiAgICAgIHJlY29yZEZDSENISy5zZXQoIkVDQUNSQyIsIEtWMDcudG9JbnRlZ2VyKCkpOw0KDQogICAgICBtaS5vdXREYXRhLnB1dCgnQUlUTScsIGFjY291bnQuZ2V0KCdBSVRNJykudG9TdHJpbmcoKSk7DQoNCiAgICAgIGludCByZWFkcyA9IHF1ZXJ5RkNIQ0hLLnJlYWRBbGwocmVjb3JkRkNIQ0hLLCA3LCBnZXRGQ0hDSEtSZWNvcmRzKTsNCg0KICAgIH0NCiAgICBhY3JMaXN0LmNsZWFyKCk7DQoNCiAgfQ0KICBDbG9zdXJlIDwgPyA+IGdldEZDSENIS1JlY29yZHMgPSB7DQogICAgREJDb250YWluZXIgcmVjb3JkIC0+DQogICAgU3RyaW5nIEZWMDIgPSByZWNvcmQuZ2V0KCdFQ1JMSU4nKTsNCiAgICBTdHJpbmcgRlYwMyA9IHJlY29yZC5nZXQoJ0VDQUlURicpOw0KICAgIFN0cmluZyBGVjA0ID0gcmVjb3JkLmdldCgnRUNBSVRUJyk7DQogICAgU3RyaW5nIEtWMDYgPSByZWNvcmQuZ2V0KCdFQ0FJVFYnKTsNCiAgICBTdHJpbmcgRElWSSA9IHJlY29yZC5nZXQoJ0VDRElWSScpOw0KICAgIFN0cmluZyBBSVRQID0gcmVjb3JkLmdldCgnRUNBSVRQJyk7DQoNCiAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICdSJyk7DQogICAgbWkub3V0RGF0YS5wdXQoJ0RJVkknLCBESVZJKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnQUlUUCcsIEFJVFApOw0KICAgIG1pLm91dERhdGEucHV0KCdLVjA2JywgS1YwNik7DQogICAgbWkub3V0RGF0YS5wdXQoJ0ZWMDInLCBGVjAyKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnRlYwMycsIEZWMDMpOw0KICAgIG1pLm91dERhdGEucHV0KCdGVjA0JywgRlYwNCk7DQogICAgbWkud3JpdGUoKTsNCiAgfQ0KDQogIC8qIFJldHJpdmUgYWRkaXRpb25hbCBkZXRhaWxzIGZyb20gdGFibGUgRkNIQ0hLDQogICAqLw0KICBwdWJsaWMgZmlsbFZBVFJhbmdlKEhhc2h0YWJsZSBhY2NvdW50KSB7DQogICAgdmF0UmFuZ2VMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgIFN0cmluZyBBQ1JWID0gYWNjb3VudC5nZXQoJ0FDUlYnKTsNCiAgICBTdHJpbmcgRElWSSA9IGFjY291bnQuZ2V0KCdESVZJJyk7DQogICAgU3RyaW5nIEFJVFAgPSBhY2NvdW50LmdldCgnQUlUUCcpOw0KICAgIFN0cmluZyBBSVRNID0gYWNjb3VudC5nZXQoJ0FJVE0nKTsNCg0KICAgIGlmIChBQ1JWLnRyaW0oKS5lcXVhbHMoIjQiKSkgew0KDQogICAgICBEQkFjdGlvbiBxdWVyeUZDSENISyA9IGRhdGFiYXNlLnRhYmxlKCJGQ0hDSEsiKQ0KICAgICAgICAuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJFQ0NPTk8iLCAiRUNESVZJIiwgIkVDQUlUUCIsICJFQ0FJVE0iLCAiRUNDSFBVIiwgIkVDQUlUViIsICJFQ0FDUkMiLCAiRUNBSVRWIiwgIkVDUkxJTiIsICJFQ1ZUQ0YiLCAiRUNWVENUIikuYnVpbGQoKQ0KICAgICAgREJDb250YWluZXIgcmVjb3JkRkNIQ0hLID0gcXVlcnlGQ0hDSEsuZ2V0Q29udGFpbmVyKCkNCiAgICAgIHJlY29yZEZDSENISy5zZXQoIkVDQ09OTyIsIENPTk8udG9JbnRlZ2VyKCkpOw0KICAgICAgcmVjb3JkRkNIQ0hLLnNldCgiRUNESVZJIiwgRElWSSk7DQogICAgICByZWNvcmRGQ0hDSEsuc2V0KCJFQ0FJVFAiLCBBSVRQLnRvSW50ZWdlcigpKTsNCiAgICAgIHJlY29yZEZDSENISy5zZXQoIkVDQUlUTSIsIEFJVE0pOw0KICAgICAgcmVjb3JkRkNIQ0hLLnNldCgiRUNDSFBVIiwgMSk7DQogICAgICByZWNvcmRGQ0hDSEsuc2V0KCJFQ0FJVFYiLCA4KTsNCiAgICAgIHJlY29yZEZDSENISy5zZXQoIkVDQUNSQyIsIEFDUlYudG9JbnRlZ2VyKCkpOw0KDQogICAgICBpbnQgcmVhZHMgPSBxdWVyeUZDSENISy5yZWFkQWxsKHJlY29yZEZDSENISywgNywgZ2V0RkNIQ0hLUmVjb3JkczIpOw0KDQogICAgfQ0KICB9DQoNCiAgQ2xvc3VyZSA8ID8gPiBnZXRGQ0hDSEtSZWNvcmRzMiA9IHsNCiAgICBEQkNvbnRhaW5lciByZWNvcmQgLT4NCiAgICBTdHJpbmcgRlYwMSA9IHJlY29yZC5nZXQoIkVDQUlUViIpID09IG51bGwgPyAiIiA6IHJlY29yZC5nZXQoIkVDQUlUViIpOw0KICAgIFN0cmluZyBGVjAyID0gcmVjb3JkLmdldCgiRUNSTElOIikgPT0gbnVsbCA/ICIiIDogcmVjb3JkLmdldCgiRUNSTElOIik7DQogICAgU3RyaW5nIEZWMDUgPSByZWNvcmQuZ2V0KCJFQ1ZUQ0YiKSA9PSBudWxsID8gIjAwIiA6IHJlY29yZC5nZXQoIkVDVlRDRiIpOw0KICAgIFN0cmluZyBGVjA2ID0gcmVjb3JkLmdldCgiRUNWVENUIikgPT0gbnVsbCA/ICIwMCIgOiByZWNvcmQuZ2V0KCJFQ1ZUQ1QiKTsNCiAgICBTdHJpbmcgQUlUTSA9IHJlY29yZC5nZXQoIkVDQUlUTSIpID09IG51bGwgPyAiIiA6IHJlY29yZC5nZXQoIkVDQUlUTSIpOw0KICAgIFN0cmluZyBESVZJID0gcmVjb3JkLmdldCgiRUNESVZJIikgPT0gbnVsbCA/ICIiIDogcmVjb3JkLmdldCgiRUNESVZJIik7DQogICAgU3RyaW5nIEFJVFAgPSByZWNvcmQuZ2V0KCJFQ0FJVFAiKSA9PSBudWxsID8gIiIgOiByZWNvcmQuZ2V0KCJFQ0FJVFAiKTsNCg0KICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgJ1YnKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnRElWSScsIERJVkkpOw0KICAgIG1pLm91dERhdGEucHV0KCdBSVRQJywgQUlUUCk7DQogICAgbWkub3V0RGF0YS5wdXQoJ0FJVE0nLCBBSVRNKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnS1YwNicsICI4Iik7DQogICAgbWkub3V0RGF0YS5wdXQoJ0ZWMDInLCBGVjAyKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnRlYwMycsIEZWMDUpOw0KICAgIG1pLm91dERhdGEucHV0KCdGVjA0JywgRlYwNik7DQogICAgbWkud3JpdGUoKTsNCg0KICB9DQp9"}}}